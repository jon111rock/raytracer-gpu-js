/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/Objects/Lights.js":
/*!*******************************!*\
  !*** ./src/Objects/Lights.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _modules_vec3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../modules/vec3 */ \"./src/modules/vec3.js\");\n\nvar ambient = 0;\nvar ambientIntensity = 0.65;\nvar point = 1;\nvar pointIntensity = 0.5;\nvar pointPosition = new _modules_vec3__WEBPACK_IMPORTED_MODULE_0__.Vector3(1, 1, 0);\nvar directional = 2;\nvar directionalIntensity = 0.2;\nvar directionalLookAt = new _modules_vec3__WEBPACK_IMPORTED_MODULE_0__.Vector3(1, 4, 4);\nvar lights = [[ambient, ambientIntensity, -1, -1, -1], [point, pointIntensity, pointPosition.toArray()[0], pointPosition.toArray()[1], pointPosition.toArray()[2]], [directional, directionalIntensity, directionalLookAt.toArray()[0], directionalLookAt.toArray()[1], directionalLookAt.toArray()[2]]];\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (lights);\n\n//# sourceURL=webpack://raytracer-gpu/./src/Objects/Lights.js?");

/***/ }),

/***/ "./src/Objects/Sphere.js":
/*!*******************************!*\
  !*** ./src/Objects/Sphere.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// x, y, z, r, g, b, radius, shine, reflective\nvar spheres = [[-0.3, 0.1, -1, 0.8, 0.7, 0.5, 0.5, 50, 0.05], [1.5, 0, -0.75, 0.5, 0.3, 0.2, 0.25, 30, 0.2], [0.7, 0.1, -1, 0.6, 0.2, 0.5, 0.4, 65, 0.3], [0, -100.5, -1, 0.5, 0.6, 0.1, 100, 70, 0.1]];\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (spheres);\n\n//# sourceURL=webpack://raytracer-gpu/./src/Objects/Sphere.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _modules_gpu__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modules/gpu */ \"./src/modules/gpu.js\");\n/* harmony import */ var _modules_gpu__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_modules_gpu__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _modules_vec3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./modules/vec3 */ \"./src/modules/vec3.js\");\n/* harmony import */ var _Objects_Sphere__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Objects/Sphere */ \"./src/Objects/Sphere.js\");\n/* harmony import */ var _Objects_Lights__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Objects/Lights */ \"./src/Objects/Lights.js\");\n/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./style.css */ \"./src/style.css\");\n\n\n\n\n\nvar gpu = new _modules_gpu__WEBPACK_IMPORTED_MODULE_0__.GPU();\n/************\n * Function *\n ************/\n\nfunction unitVectorX(vx, vy, vz) {\n  var length = Math.sqrt(vx * vx + vy * vy + vz * vz);\n  var div = 1.0 / length;\n  return div * vx;\n}\n\nfunction unitVectorY(vx, vy, vz) {\n  var length = Math.sqrt(vx * vx + vy * vy + vz * vz);\n  var div = 1.0 / length;\n  return div * vy;\n}\n\nfunction unitVectorZ(vx, vy, vz) {\n  var length = Math.sqrt(vx * vx + vy * vy + vz * vz);\n  var div = 1.0 / length;\n  return div * vz;\n}\n\nfunction dot(v1_x, v1_y, v1_z, v2_x, v2_y, v2_z) {\n  return v1_x * v2_x + v1_y * v2_y + v1_z * v2_z;\n}\n\nfunction degreesToRadians(degrees) {\n  var pi = Math.PI;\n  return degrees * (pi / 180);\n}\n\nfunction intersectRaySphere(sphere_center_x, sphere_center_y, sphere_center_z, sphere_radius, ray_o_x, ray_o_y, ray_o_z, ray_d_x, ray_d_y, ray_d_z) {\n  var oc_x = ray_o_x - sphere_center_x;\n  var oc_y = ray_o_y - sphere_center_y;\n  var oc_z = ray_o_z - sphere_center_z;\n  var a = ray_d_x * ray_d_x + ray_d_y * ray_d_y + ray_d_z * ray_d_z;\n  var b = 2 * (oc_x * ray_d_x + oc_y * ray_d_y + oc_z * ray_d_z);\n  var c = oc_x * oc_x + oc_y * oc_y + oc_z * oc_z - sphere_radius * sphere_radius;\n  var discriminant = b * b - 4 * a * c;\n\n  if (discriminant < 0) {\n    return [this.constants.INFINITY, this.constants.INFINITY];\n  } else {\n    return [(-b - Math.sqrt(discriminant)) / (2.0 * a), (-b + Math.sqrt(discriminant)) / (2.0 * a)];\n  }\n}\n\nfunction reflectVector(ray_x, ray_y, ray_z, normal_x, normal_y, normal_z) {\n  var n_dot_r = normal_x * ray_x + normal_y * ray_y + normal_z * ray_z;\n  return [2 * normal_x * n_dot_r - ray_x, 2 * normal_y * n_dot_r - ray_y, 2 * normal_z * n_dot_r - ray_z];\n}\n\nfunction createCamera(lookfrom, lookat, vup, vfov) {\n  var thera = degreesToRadians(vfov);\n  var h = Math.tan(thera / 2);\n  var viewportHeight = 2 * h;\n  var viewportWidth = aspectRatio * viewportHeight;\n  var w = (0,_modules_vec3__WEBPACK_IMPORTED_MODULE_1__.normalize)(lookfrom.sub(lookat));\n  var u = (0,_modules_vec3__WEBPACK_IMPORTED_MODULE_1__.normalize)((0,_modules_vec3__WEBPACK_IMPORTED_MODULE_1__.cross)(vup, w));\n  var v = (0,_modules_vec3__WEBPACK_IMPORTED_MODULE_1__.cross)(w, u);\n  var origin = lookfrom;\n  var horizontal = u.multiplyScalar(viewportWidth);\n  var vertical = v.multiplyScalar(viewportHeight);\n  var lowerLeftCorner = origin.sub(horizontal.divideScalar(2)).sub(vertical.divideScalar(2)).sub(w);\n  return [origin.toArray(), horizontal.toArray(), vertical.toArray(), lowerLeftCorner.toArray()];\n}\n\nvar kernelFunctions = [unitVectorX, unitVectorY, unitVectorZ, dot, degreesToRadians, intersectRaySphere, reflectVector];\nkernelFunctions.forEach(function (f) {\n  return gpu.addFunction(f);\n});\n/**********\n * Image *\n **********/\n\nvar aspectRatio = 16 / 9;\nvar imageWidth = 800,\n    imageHeight = parseInt(imageWidth / aspectRatio);\n/***********\n * Camera *\n ***********/\n\nvar lookfrom = new _modules_vec3__WEBPACK_IMPORTED_MODULE_1__.Vector3(1, 0.5, 4);\nvar lookat = new _modules_vec3__WEBPACK_IMPORTED_MODULE_1__.Vector3(0.5, 0, -1);\nvar vup = new _modules_vec3__WEBPACK_IMPORTED_MODULE_1__.Vector3(0, 1, 0);\nvar vfov = 36;\nvar camera = createCamera(lookfrom, lookat, vup, vfov);\n/***********\n * Kernael *\n ***********/\n\nvar settings = {\n  constants: {\n    LIGHTSCOUNT: _Objects_Lights__WEBPACK_IMPORTED_MODULE_3__[\"default\"].length,\n    SPHERESCOUNT: _Objects_Sphere__WEBPACK_IMPORTED_MODULE_2__[\"default\"].length,\n    INFINITY: Number.MAX_SAFE_INTEGER\n  },\n  output: [imageWidth, imageHeight],\n  graphical: true\n};\nvar render = gpu.createKernel(function (w, h, camera, lights, spheres) {\n  var u = this.thread.x / w;\n  var v = this.thread.y / h; //#region first iterator value\n  //camera\n\n  var horizontal_x = camera[1][0];\n  var horizontal_y = camera[1][1];\n  var horizontal_z = camera[1][2];\n  var vertical_x = camera[2][0];\n  var vertical_y = camera[2][1];\n  var vertical_z = camera[2][2];\n  var lowerLeftCorner_x = camera[3][0];\n  var lowerLeftCorner_y = camera[3][1];\n  var lowerLeftCorner_z = camera[3][2]; //ray\n\n  var ray_o_x = camera[0][0];\n  var ray_o_y = camera[0][1];\n  var ray_o_z = camera[0][2];\n  var ray_d_x = lowerLeftCorner_x + u * horizontal_x + v * vertical_x - ray_o_x;\n  var ray_d_y = lowerLeftCorner_y + u * horizontal_y + v * vertical_y - ray_o_y;\n  var ray_d_z = lowerLeftCorner_z + u * horizontal_z + v * vertical_z - ray_o_z;\n  var final_color_r = 0;\n  var final_color_g = 0;\n  var final_color_b = 0; // backgroundColor\n\n  var t = 0.5 * 1.2;\n  var backgroundColor = [(1 - t) * 1 + t * 0.5, (1 - t) * 1 + t * 0.7, (1 - t) * 1 + t * 1];\n  var t_min = 0.001;\n  var t_max = this.constants.INFINITY; //#endregion\n  //#region find closest_t\n  //closest sphere init\n\n  var closest_t = this.constants.INFINITY;\n  var closest_sphere_center_x = 0;\n  var closest_sphere_center_y = 0;\n  var closest_sphere_center_z = 0;\n  var closest_sphere_color_r = 0;\n  var closest_sphere_color_g = 0;\n  var closest_sphere_color_b = 0;\n  var closest_sphere_radius = 0;\n  var closest_sphere_shine = 0;\n  var closest_sphere_reflect = 0;\n\n  for (var _i = 0; _i < this.constants.SPHERESCOUNT; _i++) {\n    //\n    var current_sphere_center_x = spheres[_i][0];\n    var current_sphere_center_y = spheres[_i][1];\n    var current_sphere_center_z = spheres[_i][2];\n    var current_sphere_radius = spheres[_i][6];\n    var ts = intersectRaySphere(current_sphere_center_x, current_sphere_center_y, current_sphere_center_z, current_sphere_radius, ray_o_x, ray_o_y, ray_o_z, ray_d_x, ray_d_y, ray_d_z);\n\n    if (ts[0] < closest_t && t_min <= ts[0] && ts[0] <= t_max) {\n      closest_t = ts[0];\n      closest_sphere_center_x = spheres[_i][0];\n      closest_sphere_center_y = spheres[_i][1];\n      closest_sphere_center_z = spheres[_i][2];\n      closest_sphere_color_r = spheres[_i][3];\n      closest_sphere_color_g = spheres[_i][4];\n      closest_sphere_color_b = spheres[_i][5];\n      closest_sphere_radius = spheres[_i][6];\n      closest_sphere_shine = spheres[_i][7];\n      closest_sphere_reflect = spheres[_i][8];\n    }\n\n    if (ts[1] < closest_t && t_min <= ts[1] && ts[1] <= t_max) {\n      closest_t = ts[1];\n      closest_sphere_center_x = spheres[_i][0];\n      closest_sphere_center_y = spheres[_i][1];\n      closest_sphere_center_z = spheres[_i][2];\n      closest_sphere_color_r = spheres[_i][3];\n      closest_sphere_color_g = spheres[_i][4];\n      closest_sphere_color_b = spheres[_i][5];\n      closest_sphere_radius = spheres[_i][6];\n      closest_sphere_shine = spheres[_i][7];\n      closest_sphere_reflect = spheres[_i][8];\n    } // closest_sphere\n\n  } //#endregion\n\n\n  var temp_color_r = 0;\n  var temp_color_g = 0;\n  var temp_color_b = 0;\n  var reflect_color_r = 0;\n  var reflect_color_g = 0;\n  var reflect_color_b = 0;\n  var reflect_sphere_first_r = 0;\n\n  if (closest_t == this.constants.INFINITY) {\n    //沒打到東西 返回背景顏色\n    temp_color_r = backgroundColor[0];\n    temp_color_g = backgroundColor[1];\n    temp_color_b = backgroundColor[2];\n  } else {\n    // 有打到東西 計算光線\n    //#region compute lighting\n    var lighting = 0;\n    var hitPoint_x = ray_o_x + closest_t * ray_d_x;\n    var hitPoint_y = ray_o_y + closest_t * ray_d_y;\n    var hitPoint_z = ray_o_z + closest_t * ray_d_z;\n    var hitNormal_x = hitPoint_x - closest_sphere_center_x;\n    var hitNormal_y = hitPoint_y - closest_sphere_center_y;\n    var hitNormal_z = hitPoint_z - closest_sphere_center_z;\n    var hitNormal_ux = unitVectorX(hitNormal_x, hitNormal_y, hitNormal_z);\n    var hitNormal_uy = unitVectorY(hitNormal_x, hitNormal_y, hitNormal_z);\n    var hitNormal_uz = unitVectorZ(hitNormal_x, hitNormal_y, hitNormal_z);\n\n    for (var _i2 = 0; _i2 < this.constants.LIGHTSCOUNT; _i2++) {\n      var lightType = lights[_i2][0];\n      var lightIntensity = lights[_i2][1];\n      var lightPosition_x = lights[_i2][2];\n      var lightPosition_y = lights[_i2][3];\n      var lightPosition_z = lights[_i2][4];\n      var L_x = 0;\n      var L_y = 0;\n      var L_z = 0;\n\n      if (lightType == 0) {\n        // ambient\n        lighting += lightIntensity;\n      } else {\n        if (lightType == 1) {\n          // point\n          L_x = lightPosition_x - hitPoint_x;\n          L_y = lightPosition_y - hitPoint_y;\n          L_z = lightPosition_z - hitPoint_z;\n        } else {\n          // directional\n          L_x = lightPosition_x;\n          L_y = lightPosition_y;\n          L_z = lightPosition_z;\n        } // shadow\n\n\n        var shadow_ray_o_x = hitPoint_x;\n        var shadow_ray_o_y = hitPoint_y;\n        var shadow_ray_o_z = hitPoint_z;\n        var shadow_ray_d_x = L_x;\n        var shadow_ray_d_y = L_y;\n        var shadow_ray_d_z = L_z;\n        var shadow_t = this.constants.INFINITY;\n\n        for (var _i3 = 0; _i3 < this.constants.SPHERESCOUNT; _i3++) {\n          var _current_sphere_center_x = spheres[_i3][0];\n          var _current_sphere_center_y = spheres[_i3][1];\n          var _current_sphere_center_z = spheres[_i3][2];\n          var _current_sphere_radius = spheres[_i3][6];\n\n          var _ts = intersectRaySphere(_current_sphere_center_x, _current_sphere_center_y, _current_sphere_center_z, _current_sphere_radius, shadow_ray_o_x, shadow_ray_o_y, shadow_ray_o_z, shadow_ray_d_x, shadow_ray_d_y, shadow_ray_d_z);\n\n          if (_ts[0] < closest_t && t_min <= _ts[0] && _ts[0] <= t_max) {\n            shadow_t = _ts[0];\n          }\n\n          if (_ts[1] < closest_t && t_min <= _ts[1] && _ts[1] <= t_max) {\n            shadow_t = _ts[1];\n          }\n        }\n\n        if (shadow_t != this.constants.INFINITY) {\n          continue;\n        } // diffuse\n\n\n        var N_dot_L = dot(hitNormal_ux, hitNormal_uy, hitNormal_uz, L_x, L_y, L_z);\n\n        if (N_dot_L > 0) {\n          var length_N = Math.sqrt(hitPoint_x * hitPoint_x + hitPoint_y * hitPoint_y + hitPoint_z * hitPoint_z);\n          var length_L = Math.sqrt(L_x * L_x + L_y * L_y + L_z * L_z);\n          lighting += lightIntensity * N_dot_L / (length_N * length_L);\n        } // Specular\n\n\n        if (closest_sphere_shine != -1) {\n          var R_x = 2 * hitNormal_ux * N_dot_L - L_x;\n          var R_y = 2 * hitNormal_uy * N_dot_L - L_y;\n          var R_z = 2 * hitNormal_uz * N_dot_L - L_z;\n          var V_x = -1 * ray_d_x;\n          var V_y = -1 * ray_d_y;\n          var V_z = -1 * ray_d_z;\n          var R_dot_V = dot(R_x, R_y, R_z, V_x, V_y, V_z);\n          var length_R = Math.sqrt(R_x * R_x + R_y * R_y + R_z * R_z);\n          var length_V = Math.sqrt(V_x * V_x + V_y * V_y + V_z * V_z);\n\n          if (R_dot_V > 0) {\n            lighting += lightIntensity * Math.pow(R_dot_V / (length_R * length_V), closest_sphere_shine);\n          }\n        }\n      }\n    } //#endregion\n\n\n    temp_color_r = closest_sphere_color_r * lighting; // local color\n\n    temp_color_g = closest_sphere_color_g * lighting;\n    temp_color_b = closest_sphere_color_b * lighting; //compute reflect\n\n    reflect_sphere_first_r = closest_sphere_reflect;\n\n    if (reflect_sphere_first_r >= 0) {\n      var R = reflectVector(-ray_d_x, -ray_d_y, -ray_d_z, hitNormal_ux, hitNormal_uy, hitNormal_uz);\n      var reflect_ray_o_x = hitPoint_x;\n      var reflect_ray_o_y = hitPoint_y;\n      var reflect_ray_o_z = hitPoint_z;\n      var reflect_ray_d_x = R[0];\n      var reflect_ray_d_y = R[1];\n      var reflect_ray_d_z = R[2]; //#region find reflect closest_t\n      //closest sphere init\n\n      var _closest_t = this.constants.INFINITY;\n      var _closest_sphere_center_x = 0;\n      var _closest_sphere_center_y = 0;\n      var _closest_sphere_center_z = 0;\n      var _closest_sphere_color_r = 0;\n      var _closest_sphere_color_g = 0;\n      var _closest_sphere_color_b = 0;\n      var _closest_sphere_radius = 0;\n      var _closest_sphere_shine = 0;\n      var _closest_sphere_reflect = 0;\n\n      for (var _i4 = 0; _i4 < this.constants.SPHERESCOUNT; _i4++) {\n        //\n        var _current_sphere_center_x2 = spheres[_i4][0];\n        var _current_sphere_center_y2 = spheres[_i4][1];\n        var _current_sphere_center_z2 = spheres[_i4][2];\n        var _current_sphere_radius2 = spheres[_i4][6];\n\n        var _ts2 = intersectRaySphere(_current_sphere_center_x2, _current_sphere_center_y2, _current_sphere_center_z2, _current_sphere_radius2, reflect_ray_o_x, reflect_ray_o_y, reflect_ray_o_z, reflect_ray_d_x, reflect_ray_d_y, reflect_ray_d_z);\n\n        if (_ts2[0] < _closest_t && t_min <= _ts2[0] && _ts2[0] <= t_max) {\n          _closest_t = _ts2[0];\n          _closest_sphere_center_x = spheres[_i4][0];\n          _closest_sphere_center_y = spheres[_i4][1];\n          _closest_sphere_center_z = spheres[_i4][2];\n          _closest_sphere_color_r = spheres[_i4][3];\n          _closest_sphere_color_g = spheres[_i4][4];\n          _closest_sphere_color_b = spheres[_i4][5];\n          _closest_sphere_radius = spheres[_i4][6];\n          _closest_sphere_shine = spheres[_i4][7];\n          _closest_sphere_reflect = spheres[_i4][8];\n        }\n\n        if (_ts2[1] < _closest_t && t_min <= _ts2[1] && _ts2[1] <= t_max) {\n          _closest_t = _ts2[1];\n          _closest_sphere_center_x = spheres[_i4][0];\n          _closest_sphere_center_y = spheres[_i4][1];\n          _closest_sphere_center_z = spheres[_i4][2];\n          _closest_sphere_color_r = spheres[_i4][3];\n          _closest_sphere_color_g = spheres[_i4][4];\n          _closest_sphere_color_b = spheres[_i4][5];\n          _closest_sphere_radius = spheres[_i4][6];\n          _closest_sphere_shine = spheres[_i4][7];\n          _closest_sphere_reflect = spheres[_i4][8];\n        } // closest_sphere\n\n      } //#endregion\n\n\n      if (_closest_t == this.constants.INFINITY) {\n        //沒打到東西 返回背景顏色\n        reflect_color_r = backgroundColor[0];\n        reflect_color_g = backgroundColor[1];\n        reflect_color_b = backgroundColor[2];\n      } else {\n        // 打到東西 計算反射\n        //#region compute lighting\n        var _lighting = 0;\n\n        var _hitPoint_x = reflect_ray_o_x + _closest_t * reflect_ray_d_x;\n\n        var _hitPoint_y = reflect_ray_o_y + _closest_t * reflect_ray_d_y;\n\n        var _hitPoint_z = reflect_ray_o_z + _closest_t * reflect_ray_d_z;\n\n        var _hitNormal_x = _hitPoint_x - _closest_sphere_center_x;\n\n        var _hitNormal_y = _hitPoint_y - _closest_sphere_center_y;\n\n        var _hitNormal_z = _hitPoint_z - _closest_sphere_center_z;\n\n        var _hitNormal_ux = unitVectorX(_hitNormal_x, _hitNormal_y, _hitNormal_z);\n\n        var _hitNormal_uy = unitVectorY(_hitNormal_x, _hitNormal_y, _hitNormal_z);\n\n        var _hitNormal_uz = unitVectorZ(_hitNormal_x, _hitNormal_y, _hitNormal_z);\n\n        for (var _i5 = 0; _i5 < this.constants.LIGHTSCOUNT; _i5++) {\n          var _lightType = lights[_i5][0];\n          var _lightIntensity = lights[_i5][1];\n          var _lightPosition_x = lights[_i5][2];\n          var _lightPosition_y = lights[_i5][3];\n          var _lightPosition_z = lights[_i5][4];\n          var _L_x = 0;\n          var _L_y = 0;\n          var _L_z = 0;\n\n          if (_lightType == 0) {\n            // ambient\n            _lighting += _lightIntensity;\n          } else {\n            if (_lightType == 1) {\n              // point\n              _L_x = _lightPosition_x - _hitPoint_x;\n              _L_y = _lightPosition_y - _hitPoint_y;\n              _L_z = _lightPosition_z - _hitPoint_z;\n            } else {\n              // directional\n              _L_x = _lightPosition_x;\n              _L_y = _lightPosition_y;\n              _L_z = _lightPosition_z;\n            } // shadow\n\n\n            var _shadow_ray_o_x = _hitPoint_x;\n            var _shadow_ray_o_y = _hitPoint_y;\n            var _shadow_ray_o_z = _hitPoint_z;\n            var _shadow_ray_d_x = _L_x;\n            var _shadow_ray_d_y = _L_y;\n            var _shadow_ray_d_z = _L_z;\n            var _shadow_t = this.constants.INFINITY;\n\n            for (var _i6 = 0; _i6 < this.constants.SPHERESCOUNT; _i6++) {\n              var _current_sphere_center_x3 = spheres[_i6][0];\n              var _current_sphere_center_y3 = spheres[_i6][1];\n              var _current_sphere_center_z3 = spheres[_i6][2];\n              var _current_sphere_radius3 = spheres[_i6][6];\n\n              var _ts3 = intersectRaySphere(_current_sphere_center_x3, _current_sphere_center_y3, _current_sphere_center_z3, _current_sphere_radius3, _shadow_ray_o_x, _shadow_ray_o_y, _shadow_ray_o_z, _shadow_ray_d_x, _shadow_ray_d_y, _shadow_ray_d_z);\n\n              if (_ts3[0] < _closest_t && t_min <= _ts3[0] && _ts3[0] <= t_max) {\n                _shadow_t = _ts3[0];\n              }\n\n              if (_ts3[1] < _closest_t && t_min <= _ts3[1] && _ts3[1] <= t_max) {\n                _shadow_t = _ts3[1];\n              }\n            }\n\n            if (_shadow_t != this.constants.INFINITY) {\n              continue;\n            } // diffuse\n\n\n            var _N_dot_L = dot(_hitNormal_ux, _hitNormal_uy, _hitNormal_uz, _L_x, _L_y, _L_z);\n\n            if (_N_dot_L > 0) {\n              var _length_N = Math.sqrt(_hitPoint_x * _hitPoint_x + _hitPoint_y * _hitPoint_y + _hitPoint_z * _hitPoint_z);\n\n              var _length_L = Math.sqrt(_L_x * _L_x + _L_y * _L_y + _L_z * _L_z);\n\n              _lighting += _lightIntensity * _N_dot_L / (_length_N * _length_L);\n            } // Specular\n\n\n            if (_closest_sphere_shine != -1) {\n              var _R_x = 2 * _hitNormal_ux * _N_dot_L - _L_x;\n\n              var _R_y = 2 * _hitNormal_uy * _N_dot_L - _L_y;\n\n              var _R_z = 2 * _hitNormal_uz * _N_dot_L - _L_z;\n\n              var _V_x = -1 * ray_d_x;\n\n              var _V_y = -1 * ray_d_y;\n\n              var _V_z = -1 * ray_d_z;\n\n              var _R_dot_V = dot(_R_x, _R_y, _R_z, _V_x, _V_y, _V_z);\n\n              var _length_R = Math.sqrt(_R_x * _R_x + _R_y * _R_y + _R_z * _R_z);\n\n              var _length_V = Math.sqrt(_V_x * _V_x + _V_y * _V_y + _V_z * _V_z);\n\n              if (_R_dot_V > 0) {\n                _lighting += _lightIntensity * Math.pow(_R_dot_V / (_length_R * _length_V), _closest_sphere_shine);\n              }\n            }\n          }\n        } //#endregion\n\n\n        reflect_color_r = _closest_sphere_color_r * _lighting * (1 - _closest_sphere_reflect);\n        reflect_color_g = _closest_sphere_color_g * _lighting * (1 - _closest_sphere_reflect);\n        reflect_color_b = _closest_sphere_color_b * _lighting * (1 - _closest_sphere_reflect);\n      }\n    }\n  }\n\n  final_color_r = (1 - reflect_sphere_first_r) * temp_color_r + reflect_color_r * reflect_sphere_first_r;\n  final_color_g = (1 - reflect_sphere_first_r) * temp_color_g + reflect_color_g * reflect_sphere_first_r;\n  final_color_b = (1 - reflect_sphere_first_r) * temp_color_b + reflect_color_b * reflect_sphere_first_r;\n  this.color(final_color_r, final_color_g, final_color_b, 1);\n}, settings);\n/**********\n * Render *\n **********/\n// animation\n\nvar i = 0.01;\nsetInterval(function () {\n  if (_Objects_Sphere__WEBPACK_IMPORTED_MODULE_2__[\"default\"][2][1] >= 1) i = -0.01;\n  if (_Objects_Sphere__WEBPACK_IMPORTED_MODULE_2__[\"default\"][2][1] <= 0) i = 0.01;\n  _Objects_Sphere__WEBPACK_IMPORTED_MODULE_2__[\"default\"][2][1] += i; // spheres[0][0] += i;\n\n  render(imageWidth, imageHeight, camera, _Objects_Lights__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _Objects_Sphere__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n}, 16);\nrender(imageWidth, imageHeight, camera, _Objects_Lights__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _Objects_Sphere__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\nvar canvas = render.canvas;\ndocument.getElementById(\"root\").appendChild(canvas);\n\n//# sourceURL=webpack://raytracer-gpu/./src/index.js?");

/***/ }),

/***/ "./src/modules/gpu.js":
/*!****************************!*\
  !*** ./src/modules/gpu.js ***!
  \****************************/
/***/ ((module, exports) => {

eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _get(){if(typeof Reflect!==\"undefined\"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return _get.apply(this,arguments);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,\"prototype\",{writable:false});return Constructor;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function\");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,\"prototype\",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)===\"object\"||typeof call===\"function\")){return call;}else if(call!==void 0){throw new TypeError(\"Derived constructors may only return object or undefined\");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!==\"undefined\"&&arr[Symbol.iterator]||arr[\"@@iterator\"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i[\"return\"]!=null)_i[\"return\"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _typeof(obj){\"@babel/helpers - typeof\";return _typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&\"function\"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj;},_typeof(obj);}/**\n * gpu.js\n * http://gpu.rocks/\n *\n * GPU Accelerated JavaScript\n *\n * @version 2.15.2\n * @date Mon Mar 28 2022 10:51:10 GMT-0400 (Eastern Daylight Time)\n *\n * @license MIT\n * The MIT License\n *\n * Copyright (c) 2022 gpu.js Team\n */!function(e){if(\"object\"==( false?0:_typeof(exports))&&\"undefined\"!=\"object\")module.exports=e();else if(true)!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (e),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));else{}}(function(){return function(){return function e(t,r,n){function i(a,o){if(!r[a]){if(!t[a]){var u=undefined;if(!o&&u)return require(a,!0);if(s)return s(a,!0);var l=new Error(\"Cannot find module '\"+a+\"'\");throw l.code=\"MODULE_NOT_FOUND\",l;}var h=r[a]={exports:{}};t[a][0].call(h.exports,function(e){return i(t[a][1][e]||e);},h,h.exports,e,t,r,n);}return r[a].exports;}for(var s=undefined,a=0;a<n.length;a++){i(n[a]);}return i;};}()({1:[function(e,t,r){var n;n=this,function(e){\"use strict\";var t={3:\"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile\",5:\"class enum extends super const export import\",6:\"enum\",strict:\"implements interface let package private protected public static yield\",strictBind:\"eval arguments\"},r=\"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this\",n={5:r,\"5module\":r+\" export import\",6:r+\" const class extends export import super\"},i=/^in(stanceof)?$/,s=\"ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࣇऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-鿼ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞿꟂ-ꟊꟵ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ\",a=\"‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿᫀᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿\",o=new RegExp(\"[\"+s+\"]\"),u=new RegExp(\"[\"+s+a+\"]\");s=a=null;var l=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],h=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function c(e,t){for(var r=65536,n=0;n<t.length;n+=2){if((r+=t[n])>e)return!1;if((r+=t[n+1])>=e)return!0;}}function p(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&o.test(String.fromCharCode(e)):!1!==t&&c(e,l)));}function d(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&u.test(String.fromCharCode(e)):!1!==t&&(c(e,l)||c(e,h)))));}var m=function m(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null;};function f(e,t){return new m(e,{beforeExpr:!0,binop:t});}var g={beforeExpr:!0},x={startsExpr:!0},y={};function b(e,t){return void 0===t&&(t={}),t.keyword=e,y[e]=new m(e,t);}var T={num:new m(\"num\",x),regexp:new m(\"regexp\",x),string:new m(\"string\",x),name:new m(\"name\",x),eof:new m(\"eof\"),bracketL:new m(\"[\",{beforeExpr:!0,startsExpr:!0}),bracketR:new m(\"]\"),braceL:new m(\"{\",{beforeExpr:!0,startsExpr:!0}),braceR:new m(\"}\"),parenL:new m(\"(\",{beforeExpr:!0,startsExpr:!0}),parenR:new m(\")\"),comma:new m(\",\",g),semi:new m(\";\",g),colon:new m(\":\",g),dot:new m(\".\"),question:new m(\"?\",g),questionDot:new m(\"?.\"),arrow:new m(\"=>\",g),template:new m(\"template\"),invalidTemplate:new m(\"invalidTemplate\"),ellipsis:new m(\"...\",g),backQuote:new m(\"`\",x),dollarBraceL:new m(\"${\",{beforeExpr:!0,startsExpr:!0}),eq:new m(\"=\",{beforeExpr:!0,isAssign:!0}),assign:new m(\"_=\",{beforeExpr:!0,isAssign:!0}),incDec:new m(\"++/--\",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new m(\"!/~\",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:f(\"||\",1),logicalAND:f(\"&&\",2),bitwiseOR:f(\"|\",3),bitwiseXOR:f(\"^\",4),bitwiseAND:f(\"&\",5),equality:f(\"==/!=/===/!==\",6),relational:f(\"</>/<=/>=\",7),bitShift:f(\"<</>>/>>>\",8),plusMin:new m(\"+/-\",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:f(\"%\",10),star:f(\"*\",10),slash:f(\"/\",10),starstar:new m(\"**\",{beforeExpr:!0}),coalesce:f(\"??\",1),_break:b(\"break\"),_case:b(\"case\",g),_catch:b(\"catch\"),_continue:b(\"continue\"),_debugger:b(\"debugger\"),_default:b(\"default\",g),_do:b(\"do\",{isLoop:!0,beforeExpr:!0}),_else:b(\"else\",g),_finally:b(\"finally\"),_for:b(\"for\",{isLoop:!0}),_function:b(\"function\",x),_if:b(\"if\"),_return:b(\"return\",g),_switch:b(\"switch\"),_throw:b(\"throw\",g),_try:b(\"try\"),_var:b(\"var\"),_const:b(\"const\"),_while:b(\"while\",{isLoop:!0}),_with:b(\"with\"),_new:b(\"new\",{beforeExpr:!0,startsExpr:!0}),_this:b(\"this\",x),_super:b(\"super\",x),_class:b(\"class\",x),_extends:b(\"extends\",g),_export:b(\"export\"),_import:b(\"import\",x),_null:b(\"null\",x),_true:b(\"true\",x),_false:b(\"false\",x),_in:b(\"in\",{beforeExpr:!0,binop:7}),_instanceof:b(\"instanceof\",{beforeExpr:!0,binop:7}),_typeof:b(\"typeof\",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:b(\"void\",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:b(\"delete\",{beforeExpr:!0,prefix:!0,startsExpr:!0})},v=/\\r\\n?|\\n|\\u2028|\\u2029/,S=new RegExp(v.source,\"g\");function A(e,t){return 10===e||13===e||!t&&(8232===e||8233===e);}var _=/[\\u1680\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/,E=/(?:\\s|\\/\\/.*|\\/\\*[^]*?\\*\\/)*/g,w=Object.prototype,k=w.hasOwnProperty,I=w.toString;function D(e,t){return k.call(e,t);}var C=Array.isArray||function(e){return\"[object Array]\"===I.call(e);};function $(e){return new RegExp(\"^(?:\"+e.replace(/ /g,\"|\")+\")$\");}var L=function L(e,t){this.line=e,this.column=t;};L.prototype.offset=function(e){return new L(this.line,this.column+e);};var R=function R(e,t,r){this.start=t,this.end=r,null!==e.sourceFile&&(this.source=e.sourceFile);};function F(e,t){for(var r=1,n=0;;){S.lastIndex=n;var i=S.exec(e);if(!(i&&i.index<t))return new L(r,t-n);++r,n=i.index+i[0].length;}}var N={ecmaVersion:10,sourceType:\"script\",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function V(e){var t={};for(var r in N){t[r]=e&&D(e,r)?e[r]:N[r];}if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),C(t.onToken)){var n=t.onToken;t.onToken=function(e){return n.push(e);};}return C(t.onComment)&&(t.onComment=function(e,t){return function(r,n,i,s,a,o){var u={type:r?\"Block\":\"Line\",value:n,start:i,end:s};e.locations&&(u.loc=new R(this,a,o)),e.ranges&&(u.range=[i,s]),t.push(u);};}(t,t.onComment)),t;}var M=2,O=1|M,z=4,P=8;function K(e,t){return M|(e?z:0)|(t?P:0);}var G=function G(e,r,i){this.options=e=V(e),this.sourceFile=e.sourceFile,this.keywords=$(n[e.ecmaVersion>=6?6:\"module\"===e.sourceType?\"5module\":5]);var s=\"\";if(!0!==e.allowReserved){for(var a=e.ecmaVersion;!(s=t[a]);a--){;}\"module\"===e.sourceType&&(s+=\" await\");}this.reservedWords=$(s);var o=(s?s+\" \":\"\")+t.strict;this.reservedWordsStrict=$(o),this.reservedWordsStrictBind=$(o+\" \"+t.strictBind),this.input=String(r),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf(\"\\n\",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(v).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=T.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=\"module\"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&e.allowHashBang&&\"#!\"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null;},U={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};G.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e);},U.inFunction.get=function(){return(this.currentVarScope().flags&M)>0;},U.inGenerator.get=function(){return(this.currentVarScope().flags&P)>0;},U.inAsync.get=function(){return(this.currentVarScope().flags&z)>0;},U.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0;},U.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0;},U.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope());},G.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&M)>0;},G.extend=function(){for(var e=[],t=arguments.length;t--;){e[t]=arguments[t];}for(var r=this,n=0;n<e.length;n++){r=e[n](r);}return r;},G.parse=function(e,t){return new this(t,e).parse();},G.parseExpressionAt=function(e,t,r){var n=new this(r,e,t);return n.nextToken(),n.parseExpression();},G.tokenizer=function(e,t){return new this(t,e);},Object.defineProperties(G.prototype,U);var B=G.prototype,W=/^(?:'((?:\\\\.|[^'])*?)'|\"((?:\\\\.|[^\"])*?)\")/;function j(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1;}B.strictDirective=function(e){for(;;){E.lastIndex=e,e+=E.exec(this.input)[0].length;var t=W.exec(this.input.slice(e));if(!t)return!1;if(\"use strict\"===(t[1]||t[2])){E.lastIndex=e+t[0].length;var r=E.exec(this.input),n=r.index+r[0].length,i=this.input.charAt(n);return\";\"===i||\"}\"===i||v.test(r[0])&&!(/[(`.[+\\-/*%<>=,?^&]/.test(i)||\"!\"===i&&\"=\"===this.input.charAt(n+1));}e+=t[0].length,E.lastIndex=e,e+=E.exec(this.input)[0].length,\";\"===this.input[e]&&e++;}},B.eat=function(e){return this.type===e&&(this.next(),!0);},B.isContextual=function(e){return this.type===T.name&&this.value===e&&!this.containsEsc;},B.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0);},B.expectContextual=function(e){this.eatContextual(e)||this.unexpected();},B.canInsertSemicolon=function(){return this.type===T.eof||this.type===T.braceR||v.test(this.input.slice(this.lastTokEnd,this.start));},B.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0;},B.semicolon=function(){this.eat(T.semi)||this.insertSemicolon()||this.unexpected();},B.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0;},B.expect=function(e){this.eat(e)||this.unexpected();},B.unexpected=function(e){this.raise(null!=e?e:this.start,\"Unexpected token\");},B.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,\"Comma is not permitted after the rest element\");var r=t?e.parenthesizedAssign:e.parenthesizedBind;r>-1&&this.raiseRecoverable(r,\"Parenthesized pattern\");}},B.checkExpressionErrors=function(e,t){if(!e)return!1;var r=e.shorthandAssign,n=e.doubleProto;if(!t)return r>=0||n>=0;r>=0&&this.raise(r,\"Shorthand property assignments are valid only in destructuring patterns\"),n>=0&&this.raiseRecoverable(n,\"Redefinition of __proto__ property\");},B.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,\"Yield expression cannot be a default value\"),this.awaitPos&&this.raise(this.awaitPos,\"Await expression cannot be a default value\");},B.isSimpleAssignTarget=function(e){return\"ParenthesizedExpression\"===e.type?this.isSimpleAssignTarget(e.expression):\"Identifier\"===e.type||\"MemberExpression\"===e.type;};var H=G.prototype;H.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==T.eof;){var r=this.parseStatement(null,!0,t);e.body.push(r);}if(this.inModule)for(var n=0,i=Object.keys(this.undefinedExports);n<i.length;n+=1){var s=i[n];this.raiseRecoverable(this.undefinedExports[s].start,\"Export '\"+s+\"' is not defined\");}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,\"Program\");};var X={kind:\"loop\"},q={kind:\"switch\"};H.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual(\"let\"))return!1;E.lastIndex=this.pos;var t=E.exec(this.input),r=this.pos+t[0].length,n=this.input.charCodeAt(r);if(91===n)return!0;if(e)return!1;if(123===n)return!0;if(p(n,!0)){for(var s=r+1;d(this.input.charCodeAt(s),!0);){++s;}var a=this.input.slice(r,s);if(!i.test(a))return!0;}return!1;},H.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual(\"async\"))return!1;E.lastIndex=this.pos;var e=E.exec(this.input),t=this.pos+e[0].length;return!(v.test(this.input.slice(this.pos,t))||\"function\"!==this.input.slice(t,t+8)||t+8!==this.input.length&&d(this.input.charAt(t+8)));},H.parseStatement=function(e,t,r){var n,i=this.type,s=this.startNode();switch(this.isLet(e)&&(i=T._var,n=\"let\"),i){case T._break:case T._continue:return this.parseBreakContinueStatement(s,i.keyword);case T._debugger:return this.parseDebuggerStatement(s);case T._do:return this.parseDoStatement(s);case T._for:return this.parseForStatement(s);case T._function:return e&&(this.strict||\"if\"!==e&&\"label\"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!e);case T._class:return e&&this.unexpected(),this.parseClass(s,!0);case T._if:return this.parseIfStatement(s);case T._return:return this.parseReturnStatement(s);case T._switch:return this.parseSwitchStatement(s);case T._throw:return this.parseThrowStatement(s);case T._try:return this.parseTryStatement(s);case T._const:case T._var:return n=n||this.value,e&&\"var\"!==n&&this.unexpected(),this.parseVarStatement(s,n);case T._while:return this.parseWhileStatement(s);case T._with:return this.parseWithStatement(s);case T.braceL:return this.parseBlock(!0,s);case T.semi:return this.parseEmptyStatement(s);case T._export:case T._import:if(this.options.ecmaVersion>10&&i===T._import){E.lastIndex=this.pos;var a=E.exec(this.input),o=this.pos+a[0].length,u=this.input.charCodeAt(o);if(40===u||46===u)return this.parseExpressionStatement(s,this.parseExpression());}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,\"'import' and 'export' may only appear at the top level\"),this.inModule||this.raise(this.start,\"'import' and 'export' may appear only with 'sourceType: module'\")),i===T._import?this.parseImport(s):this.parseExport(s,r);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!e);var l=this.value,h=this.parseExpression();return i===T.name&&\"Identifier\"===h.type&&this.eat(T.colon)?this.parseLabeledStatement(s,l,h,e):this.parseExpressionStatement(s,h);}},H.parseBreakContinueStatement=function(e,t){var r=\"break\"===t;this.next(),this.eat(T.semi)||this.insertSemicolon()?e.label=null:this.type!==T.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var n=0;n<this.labels.length;++n){var i=this.labels[n];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(r||\"loop\"===i.kind))break;if(e.label&&r)break;}}return n===this.labels.length&&this.raise(e.start,\"Unsyntactic \"+t),this.finishNode(e,r?\"BreakStatement\":\"ContinueStatement\");},H.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,\"DebuggerStatement\");},H.parseDoStatement=function(e){return this.next(),this.labels.push(X),e.body=this.parseStatement(\"do\"),this.labels.pop(),this.expect(T._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(T.semi):this.semicolon(),this.finishNode(e,\"DoWhileStatement\");},H.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual(\"await\")?this.lastTokStart:-1;if(this.labels.push(X),this.enterScope(0),this.expect(T.parenL),this.type===T.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var r=this.isLet();if(this.type===T._var||this.type===T._const||r){var n=this.startNode(),i=r?\"let\":this.value;return this.next(),this.parseVar(n,!0,i),this.finishNode(n,\"VariableDeclaration\"),(this.type===T._in||this.options.ecmaVersion>=6&&this.isContextual(\"of\"))&&1===n.declarations.length?(this.options.ecmaVersion>=9&&(this.type===T._in?t>-1&&this.unexpected(t):e[\"await\"]=t>-1),this.parseForIn(e,n)):(t>-1&&this.unexpected(t),this.parseFor(e,n));}var s=new j(),a=this.parseExpression(!0,s);return this.type===T._in||this.options.ecmaVersion>=6&&this.isContextual(\"of\")?(this.options.ecmaVersion>=9&&(this.type===T._in?t>-1&&this.unexpected(t):e[\"await\"]=t>-1),this.toAssignable(a,!1,s),this.checkLVal(a),this.parseForIn(e,a)):(this.checkExpressionErrors(s,!0),t>-1&&this.unexpected(t),this.parseFor(e,a));},H.parseFunctionStatement=function(e,t,r){return this.next(),this.parseFunction(e,Z|(r?0:J),!1,t);},H.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement(\"if\"),e.alternate=this.eat(T._else)?this.parseStatement(\"if\"):null,this.finishNode(e,\"IfStatement\");},H.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,\"'return' outside of function\"),this.next(),this.eat(T.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,\"ReturnStatement\");},H.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(T.braceL),this.labels.push(q),this.enterScope(0);for(var r=!1;this.type!==T.braceR;){if(this.type===T._case||this.type===T._default){var n=this.type===T._case;t&&this.finishNode(t,\"SwitchCase\"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),n?t.test=this.parseExpression():(r&&this.raiseRecoverable(this.lastTokStart,\"Multiple default clauses\"),r=!0,t.test=null),this.expect(T.colon);}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));}return this.exitScope(),t&&this.finishNode(t,\"SwitchCase\"),this.next(),this.labels.pop(),this.finishNode(e,\"SwitchStatement\");},H.parseThrowStatement=function(e){return this.next(),v.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,\"Illegal newline after throw\"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,\"ThrowStatement\");};var Y=[];H.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===T._catch){var t=this.startNode();if(this.next(),this.eat(T.parenL)){t.param=this.parseBindingAtom();var r=\"Identifier\"===t.param.type;this.enterScope(r?32:0),this.checkLVal(t.param,r?4:2),this.expect(T.parenR);}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,\"CatchClause\");}return e.finalizer=this.eat(T._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,\"Missing catch or finally clause\"),this.finishNode(e,\"TryStatement\");},H.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,\"VariableDeclaration\");},H.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(X),e.body=this.parseStatement(\"while\"),this.labels.pop(),this.finishNode(e,\"WhileStatement\");},H.parseWithStatement=function(e){return this.strict&&this.raise(this.start,\"'with' in strict mode\"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement(\"with\"),this.finishNode(e,\"WithStatement\");},H.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,\"EmptyStatement\");},H.parseLabeledStatement=function(e,t,r,n){for(var i=0,s=this.labels;i<s.length;i+=1){s[i].name===t&&this.raise(r.start,\"Label '\"+t+\"' is already declared\");}for(var a=this.type.isLoop?\"loop\":this.type===T._switch?\"switch\":null,o=this.labels.length-1;o>=0;o--){var u=this.labels[o];if(u.statementStart!==e.start)break;u.statementStart=this.start,u.kind=a;}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(n?-1===n.indexOf(\"label\")?n+\"label\":n:\"label\"),this.labels.pop(),e.label=r,this.finishNode(e,\"LabeledStatement\");},H.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,\"ExpressionStatement\");},H.parseBlock=function(e,t,r){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(T.braceL),e&&this.enterScope(0);this.type!==T.braceR;){var n=this.parseStatement(null);t.body.push(n);}return r&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,\"BlockStatement\");},H.parseFor=function(e,t){return e.init=t,this.expect(T.semi),e.test=this.type===T.semi?null:this.parseExpression(),this.expect(T.semi),e.update=this.type===T.parenR?null:this.parseExpression(),this.expect(T.parenR),e.body=this.parseStatement(\"for\"),this.exitScope(),this.labels.pop(),this.finishNode(e,\"ForStatement\");},H.parseForIn=function(e,t){var r=this.type===T._in;return this.next(),\"VariableDeclaration\"===t.type&&null!=t.declarations[0].init&&(!r||this.options.ecmaVersion<8||this.strict||\"var\"!==t.kind||\"Identifier\"!==t.declarations[0].id.type)?this.raise(t.start,(r?\"for-in\":\"for-of\")+\" loop variable declaration may not have an initializer\"):\"AssignmentPattern\"===t.type&&this.raise(t.start,\"Invalid left-hand side in for-loop\"),e.left=t,e.right=r?this.parseExpression():this.parseMaybeAssign(),this.expect(T.parenR),e.body=this.parseStatement(\"for\"),this.exitScope(),this.labels.pop(),this.finishNode(e,r?\"ForInStatement\":\"ForOfStatement\");},H.parseVar=function(e,t,r){for(e.declarations=[],e.kind=r;;){var n=this.startNode();if(this.parseVarId(n,r),this.eat(T.eq)?n.init=this.parseMaybeAssign(t):\"const\"!==r||this.type===T._in||this.options.ecmaVersion>=6&&this.isContextual(\"of\")?\"Identifier\"===n.id.type||t&&(this.type===T._in||this.isContextual(\"of\"))?n.init=null:this.raise(this.lastTokEnd,\"Complex binding patterns require an initialization value\"):this.unexpected(),e.declarations.push(this.finishNode(n,\"VariableDeclarator\")),!this.eat(T.comma))break;}return e;},H.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLVal(e.id,\"var\"===t?1:2,!1);};var Z=1,J=2;H.parseFunction=function(e,t,r,n){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!n)&&(this.type===T.star&&t&J&&this.unexpected(),e.generator=this.eat(T.star)),this.options.ecmaVersion>=8&&(e.async=!!n),t&Z&&(e.id=4&t&&this.type!==T.name?null:this.parseIdent(),!e.id||t&J||this.checkLVal(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?1:2:3));var i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(K(e.async,e.generator)),t&Z||(e.id=this.type===T.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,r,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(e,t&Z?\"FunctionDeclaration\":\"FunctionExpression\");},H.parseFunctionParams=function(e){this.expect(T.parenL),e.params=this.parseBindingList(T.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams();},H.parseClass=function(e,t){this.next();var r=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var n=this.startNode(),i=!1;for(n.body=[],this.expect(T.braceL);this.type!==T.braceR;){var s=this.parseClassElement(null!==e.superClass);s&&(n.body.push(s),\"MethodDefinition\"===s.type&&\"constructor\"===s.kind&&(i&&this.raise(s.start,\"Duplicate constructor in the same class\"),i=!0));}return this.strict=r,this.next(),e.body=this.finishNode(n,\"ClassBody\"),this.finishNode(e,t?\"ClassDeclaration\":\"ClassExpression\");},H.parseClassElement=function(e){var t=this;if(this.eat(T.semi))return null;var r=this.startNode(),n=function n(e,_n){void 0===_n&&(_n=!1);var i=t.start,s=t.startLoc;return!!t.eatContextual(e)&&(!(t.type===T.parenL||_n&&t.canInsertSemicolon())||(r.key&&t.unexpected(),r.computed=!1,r.key=t.startNodeAt(i,s),r.key.name=e,t.finishNode(r.key,\"Identifier\"),!1));};r.kind=\"method\",r[\"static\"]=n(\"static\");var i=this.eat(T.star),s=!1;i||(this.options.ecmaVersion>=8&&n(\"async\",!0)?(s=!0,i=this.options.ecmaVersion>=9&&this.eat(T.star)):n(\"get\")?r.kind=\"get\":n(\"set\")&&(r.kind=\"set\")),r.key||this.parsePropertyName(r);var a=r.key,o=!1;return r.computed||r[\"static\"]||!(\"Identifier\"===a.type&&\"constructor\"===a.name||\"Literal\"===a.type&&\"constructor\"===a.value)?r[\"static\"]&&\"Identifier\"===a.type&&\"prototype\"===a.name&&this.raise(a.start,\"Classes may not have a static property named prototype\"):(\"method\"!==r.kind&&this.raise(a.start,\"Constructor can't have get/set modifier\"),i&&this.raise(a.start,\"Constructor can't be a generator\"),s&&this.raise(a.start,\"Constructor can't be an async method\"),r.kind=\"constructor\",o=e),this.parseClassMethod(r,i,s,o),\"get\"===r.kind&&0!==r.value.params.length&&this.raiseRecoverable(r.value.start,\"getter should have no params\"),\"set\"===r.kind&&1!==r.value.params.length&&this.raiseRecoverable(r.value.start,\"setter should have exactly one param\"),\"set\"===r.kind&&\"RestElement\"===r.value.params[0].type&&this.raiseRecoverable(r.value.params[0].start,\"Setter cannot use rest params\"),r;},H.parseClassMethod=function(e,t,r,n){return e.value=this.parseMethod(t,r,n),this.finishNode(e,\"MethodDefinition\");},H.parseClassId=function(e,t){this.type===T.name?(e.id=this.parseIdent(),t&&this.checkLVal(e.id,2,!1)):(!0===t&&this.unexpected(),e.id=null);},H.parseClassSuper=function(e){e.superClass=this.eat(T._extends)?this.parseExprSubscripts():null;},H.parseExport=function(e,t){if(this.next(),this.eat(T.star))return this.options.ecmaVersion>=11&&(this.eatContextual(\"as\")?(e.exported=this.parseIdent(!0),this.checkExport(t,e.exported.name,this.lastTokStart)):e.exported=null),this.expectContextual(\"from\"),this.type!==T.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,\"ExportAllDeclaration\");if(this.eat(T._default)){var r;if(this.checkExport(t,\"default\",this.lastTokStart),this.type===T._function||(r=this.isAsyncFunction())){var n=this.startNode();this.next(),r&&this.next(),e.declaration=this.parseFunction(n,4|Z,!1,r);}else if(this.type===T._class){var i=this.startNode();e.declaration=this.parseClass(i,\"nullableID\");}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,\"ExportDefaultDeclaration\");}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),\"VariableDeclaration\"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual(\"from\"))this.type!==T.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var s=0,a=e.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local),this.checkLocalExport(o.local);}e.source=null;}this.semicolon();}return this.finishNode(e,\"ExportNamedDeclaration\");},H.checkExport=function(e,t,r){e&&(D(e,t)&&this.raiseRecoverable(r,\"Duplicate export '\"+t+\"'\"),e[t]=!0);},H.checkPatternExport=function(e,t){var r=t.type;if(\"Identifier\"===r)this.checkExport(e,t.name,t.start);else if(\"ObjectPattern\"===r)for(var n=0,i=t.properties;n<i.length;n+=1){var s=i[n];this.checkPatternExport(e,s);}else if(\"ArrayPattern\"===r)for(var a=0,o=t.elements;a<o.length;a+=1){var u=o[a];u&&this.checkPatternExport(e,u);}else\"Property\"===r?this.checkPatternExport(e,t.value):\"AssignmentPattern\"===r?this.checkPatternExport(e,t.left):\"RestElement\"===r?this.checkPatternExport(e,t.argument):\"ParenthesizedExpression\"===r&&this.checkPatternExport(e,t.expression);},H.checkVariableExport=function(e,t){if(e)for(var r=0,n=t;r<n.length;r+=1){var i=n[r];this.checkPatternExport(e,i.id);}},H.shouldParseExportStatement=function(){return\"var\"===this.type.keyword||\"const\"===this.type.keyword||\"class\"===this.type.keyword||\"function\"===this.type.keyword||this.isLet()||this.isAsyncFunction();},H.parseExportSpecifiers=function(e){var t=[],r=!0;for(this.expect(T.braceL);!this.eat(T.braceR);){if(r)r=!1;else if(this.expect(T.comma),this.afterTrailingComma(T.braceR))break;var n=this.startNode();n.local=this.parseIdent(!0),n.exported=this.eatContextual(\"as\")?this.parseIdent(!0):n.local,this.checkExport(e,n.exported.name,n.exported.start),t.push(this.finishNode(n,\"ExportSpecifier\"));}return t;},H.parseImport=function(e){return this.next(),this.type===T.string?(e.specifiers=Y,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual(\"from\"),e.source=this.type===T.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,\"ImportDeclaration\");},H.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===T.name){var r=this.startNode();if(r.local=this.parseIdent(),this.checkLVal(r.local,2),e.push(this.finishNode(r,\"ImportDefaultSpecifier\")),!this.eat(T.comma))return e;}if(this.type===T.star){var n=this.startNode();return this.next(),this.expectContextual(\"as\"),n.local=this.parseIdent(),this.checkLVal(n.local,2),e.push(this.finishNode(n,\"ImportNamespaceSpecifier\")),e;}for(this.expect(T.braceL);!this.eat(T.braceR);){if(t)t=!1;else if(this.expect(T.comma),this.afterTrailingComma(T.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual(\"as\")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,2),e.push(this.finishNode(i,\"ImportSpecifier\"));}return e;},H.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t){e[t].directive=e[t].expression.raw.slice(1,-1);}},H.isDirectiveCandidate=function(e){return\"ExpressionStatement\"===e.type&&\"Literal\"===e.expression.type&&\"string\"==typeof e.expression.value&&('\"'===this.input[e.start]||\"'\"===this.input[e.start]);};var Q=G.prototype;Q.toAssignable=function(e,t,r){if(this.options.ecmaVersion>=6&&e)switch(e.type){case\"Identifier\":this.inAsync&&\"await\"===e.name&&this.raise(e.start,\"Cannot use 'await' as identifier inside an async function\");break;case\"ObjectPattern\":case\"ArrayPattern\":case\"RestElement\":break;case\"ObjectExpression\":e.type=\"ObjectPattern\",r&&this.checkPatternErrors(r,!0);for(var n=0,i=e.properties;n<i.length;n+=1){var s=i[n];this.toAssignable(s,t),\"RestElement\"!==s.type||\"ArrayPattern\"!==s.argument.type&&\"ObjectPattern\"!==s.argument.type||this.raise(s.argument.start,\"Unexpected token\");}break;case\"Property\":\"init\"!==e.kind&&this.raise(e.key.start,\"Object pattern can't contain getter or setter\"),this.toAssignable(e.value,t);break;case\"ArrayExpression\":e.type=\"ArrayPattern\",r&&this.checkPatternErrors(r,!0),this.toAssignableList(e.elements,t);break;case\"SpreadElement\":e.type=\"RestElement\",this.toAssignable(e.argument,t),\"AssignmentPattern\"===e.argument.type&&this.raise(e.argument.start,\"Rest elements cannot have a default value\");break;case\"AssignmentExpression\":\"=\"!==e.operator&&this.raise(e.left.end,\"Only '=' operator can be used for specifying default value.\"),e.type=\"AssignmentPattern\",delete e.operator,this.toAssignable(e.left,t);case\"AssignmentPattern\":break;case\"ParenthesizedExpression\":this.toAssignable(e.expression,t,r);break;case\"ChainExpression\":this.raiseRecoverable(e.start,\"Optional chaining cannot appear in left-hand side\");break;case\"MemberExpression\":if(!t)break;default:this.raise(e.start,\"Assigning to rvalue\");}else r&&this.checkPatternErrors(r,!0);return e;},Q.toAssignableList=function(e,t){for(var r=e.length,n=0;n<r;n++){var i=e[n];i&&this.toAssignable(i,t);}if(r){var s=e[r-1];6===this.options.ecmaVersion&&t&&s&&\"RestElement\"===s.type&&\"Identifier\"!==s.argument.type&&this.unexpected(s.argument.start);}return e;},Q.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,\"SpreadElement\");},Q.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==T.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,\"RestElement\");},Q.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case T.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(T.bracketR,!0,!0),this.finishNode(e,\"ArrayPattern\");case T.braceL:return this.parseObj(!0);}return this.parseIdent();},Q.parseBindingList=function(e,t,r){for(var n=[],i=!0;!this.eat(e);){if(i?i=!1:this.expect(T.comma),t&&this.type===T.comma)n.push(null);else{if(r&&this.afterTrailingComma(e))break;if(this.type===T.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),n.push(s),this.type===T.comma&&this.raise(this.start,\"Comma is not permitted after the rest element\"),this.expect(e);break;}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),n.push(a);}}return n;},Q.parseBindingListItem=function(e){return e;},Q.parseMaybeDefault=function(e,t,r){if(r=r||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(T.eq))return r;var n=this.startNodeAt(e,t);return n.left=r,n.right=this.parseMaybeAssign(),this.finishNode(n,\"AssignmentPattern\");},Q.checkLVal=function(e,t,r){switch(void 0===t&&(t=0),e.type){case\"Identifier\":2===t&&\"let\"===e.name&&this.raiseRecoverable(e.start,\"let is disallowed as a lexically bound name\"),this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?\"Binding \":\"Assigning to \")+e.name+\" in strict mode\"),r&&(D(r,e.name)&&this.raiseRecoverable(e.start,\"Argument name clash\"),r[e.name]=!0),0!==t&&5!==t&&this.declareName(e.name,t,e.start);break;case\"ChainExpression\":this.raiseRecoverable(e.start,\"Optional chaining cannot appear in left-hand side\");break;case\"MemberExpression\":t&&this.raiseRecoverable(e.start,\"Binding member expression\");break;case\"ObjectPattern\":for(var n=0,i=e.properties;n<i.length;n+=1){var s=i[n];this.checkLVal(s,t,r);}break;case\"Property\":this.checkLVal(e.value,t,r);break;case\"ArrayPattern\":for(var a=0,o=e.elements;a<o.length;a+=1){var u=o[a];u&&this.checkLVal(u,t,r);}break;case\"AssignmentPattern\":this.checkLVal(e.left,t,r);break;case\"RestElement\":this.checkLVal(e.argument,t,r);break;case\"ParenthesizedExpression\":this.checkLVal(e.expression,t,r);break;default:this.raise(e.start,(t?\"Binding\":\"Assigning to\")+\" rvalue\");}};var ee=G.prototype;ee.checkPropClash=function(e,t,r){if(!(this.options.ecmaVersion>=9&&\"SpreadElement\"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var n,i=e.key;switch(i.type){case\"Identifier\":n=i.name;break;case\"Literal\":n=String(i.value);break;default:return;}var s=e.kind;if(this.options.ecmaVersion>=6)\"__proto__\"===n&&\"init\"===s&&(t.proto&&(r?r.doubleProto<0&&(r.doubleProto=i.start):this.raiseRecoverable(i.start,\"Redefinition of __proto__ property\")),t.proto=!0);else{var a=t[n=\"$\"+n];if(a)(\"init\"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(i.start,\"Redefinition of property\");else a=t[n]={init:!1,get:!1,set:!1};a[s]=!0;}}},ee.parseExpression=function(e,t){var r=this.start,n=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===T.comma){var s=this.startNodeAt(r,n);for(s.expressions=[i];this.eat(T.comma);){s.expressions.push(this.parseMaybeAssign(e,t));}return this.finishNode(s,\"SequenceExpression\");}return i;},ee.parseMaybeAssign=function(e,t,r){if(this.isContextual(\"yield\")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1;}var n=!1,i=-1,s=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,t.parenthesizedAssign=t.trailingComma=-1):(t=new j(),n=!0);var a=this.start,o=this.startLoc;this.type!==T.parenL&&this.type!==T.name||(this.potentialArrowAt=this.start);var u=this.parseMaybeConditional(e,t);if(r&&(u=r.call(this,u,a,o)),this.type.isAssign){var l=this.startNodeAt(a,o);return l.operator=this.value,l.left=this.type===T.eq?this.toAssignable(u,!1,t):u,n||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.left.start&&(t.shorthandAssign=-1),this.checkLVal(u),this.next(),l.right=this.parseMaybeAssign(e),this.finishNode(l,\"AssignmentExpression\");}return n&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),u;},ee.parseMaybeConditional=function(e,t){var r=this.start,n=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(T.question)){var s=this.startNodeAt(r,n);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(T.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,\"ConditionalExpression\");}return i;},ee.parseExprOps=function(e,t){var r=this.start,n=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)?i:i.start===r&&\"ArrowFunctionExpression\"===i.type?i:this.parseExprOp(i,r,n,-1,e);},ee.parseExprOp=function(e,t,r,n,i){var s=this.type.binop;if(null!=s&&(!i||this.type!==T._in)&&s>n){var a=this.type===T.logicalOR||this.type===T.logicalAND,o=this.type===T.coalesce;o&&(s=T.logicalAND.binop);var u=this.value;this.next();var l=this.start,h=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),l,h,s,i),p=this.buildBinary(t,r,e,c,u,a||o);return(a&&this.type===T.coalesce||o&&(this.type===T.logicalOR||this.type===T.logicalAND))&&this.raiseRecoverable(this.start,\"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses\"),this.parseExprOp(p,t,r,n,i);}return e;},ee.buildBinary=function(e,t,r,n,i,s){var a=this.startNodeAt(e,t);return a.left=r,a.operator=i,a.right=n,this.finishNode(a,s?\"LogicalExpression\":\"BinaryExpression\");},ee.parseMaybeUnary=function(e,t){var r,n=this.start,i=this.startLoc;if(this.isContextual(\"await\")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))r=this.parseAwait(),t=!0;else if(this.type.prefix){var s=this.startNode(),a=this.type===T.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),a?this.checkLVal(s.argument):this.strict&&\"delete\"===s.operator&&\"Identifier\"===s.argument.type?this.raiseRecoverable(s.start,\"Deleting local variable in strict mode\"):t=!0,r=this.finishNode(s,a?\"UpdateExpression\":\"UnaryExpression\");}else{if(r=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return r;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(n,i);o.operator=this.value,o.prefix=!1,o.argument=r,this.checkLVal(r),this.next(),r=this.finishNode(o,\"UpdateExpression\");}}return!t&&this.eat(T.starstar)?this.buildBinary(n,i,r,this.parseMaybeUnary(null,!1),\"**\",!1):r;},ee.parseExprSubscripts=function(e){var t=this.start,r=this.startLoc,n=this.parseExprAtom(e);if(\"ArrowFunctionExpression\"===n.type&&\")\"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return n;var i=this.parseSubscripts(n,t,r);return e&&\"MemberExpression\"===i.type&&(e.parenthesizedAssign>=i.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=i.start&&(e.parenthesizedBind=-1)),i;},ee.parseSubscripts=function(e,t,r,n){for(var i=this.options.ecmaVersion>=8&&\"Identifier\"===e.type&&\"async\"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start==5&&this.potentialArrowAt===e.start,s=!1;;){var a=this.parseSubscript(e,t,r,n,i,s);if(a.optional&&(s=!0),a===e||\"ArrowFunctionExpression\"===a.type){if(s){var o=this.startNodeAt(t,r);o.expression=a,a=this.finishNode(o,\"ChainExpression\");}return a;}e=a;}},ee.parseSubscript=function(e,t,r,n,i,s){var a=this.options.ecmaVersion>=11,o=a&&this.eat(T.questionDot);n&&o&&this.raise(this.lastTokStart,\"Optional chaining cannot appear in the callee of new expressions\");var u=this.eat(T.bracketL);if(u||o&&this.type!==T.parenL&&this.type!==T.backQuote||this.eat(T.dot)){var l=this.startNodeAt(t,r);l.object=e,l.property=u?this.parseExpression():this.parseIdent(\"never\"!==this.options.allowReserved),l.computed=!!u,u&&this.expect(T.bracketR),a&&(l.optional=o),e=this.finishNode(l,\"MemberExpression\");}else if(!n&&this.eat(T.parenL)){var h=new j(),c=this.yieldPos,p=this.awaitPos,d=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(T.parenR,this.options.ecmaVersion>=8,!1,h);if(i&&!o&&!this.canInsertSemicolon()&&this.eat(T.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,\"Cannot use 'await' as identifier inside an async function\"),this.yieldPos=c,this.awaitPos=p,this.awaitIdentPos=d,this.parseArrowExpression(this.startNodeAt(t,r),m,!0);this.checkExpressionErrors(h,!0),this.yieldPos=c||this.yieldPos,this.awaitPos=p||this.awaitPos,this.awaitIdentPos=d||this.awaitIdentPos;var f=this.startNodeAt(t,r);f.callee=e,f.arguments=m,a&&(f.optional=o),e=this.finishNode(f,\"CallExpression\");}else if(this.type===T.backQuote){(o||s)&&this.raise(this.start,\"Optional chaining cannot appear in the tag of tagged template expressions\");var g=this.startNodeAt(t,r);g.tag=e,g.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(g,\"TaggedTemplateExpression\");}return e;},ee.parseExprAtom=function(e){this.type===T.slash&&this.readRegexp();var t,r=this.potentialArrowAt===this.start;switch(this.type){case T._super:return this.allowSuper||this.raise(this.start,\"'super' keyword outside a method\"),t=this.startNode(),this.next(),this.type!==T.parenL||this.allowDirectSuper||this.raise(t.start,\"super() call outside constructor of a subclass\"),this.type!==T.dot&&this.type!==T.bracketL&&this.type!==T.parenL&&this.unexpected(),this.finishNode(t,\"Super\");case T._this:return t=this.startNode(),this.next(),this.finishNode(t,\"ThisExpression\");case T.name:var n=this.start,i=this.startLoc,s=this.containsEsc,a=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!s&&\"async\"===a.name&&!this.canInsertSemicolon()&&this.eat(T._function))return this.parseFunction(this.startNodeAt(n,i),0,!1,!0);if(r&&!this.canInsertSemicolon()){if(this.eat(T.arrow))return this.parseArrowExpression(this.startNodeAt(n,i),[a],!1);if(this.options.ecmaVersion>=8&&\"async\"===a.name&&this.type===T.name&&!s)return a=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(T.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(n,i),[a],!0);}return a;case T.regexp:var o=this.value;return(t=this.parseLiteral(o.value)).regex={pattern:o.pattern,flags:o.flags},t;case T.num:case T.string:return this.parseLiteral(this.value);case T._null:case T._true:case T._false:return(t=this.startNode()).value=this.type===T._null?null:this.type===T._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,\"Literal\");case T.parenL:var u=this.start,l=this.parseParenAndDistinguishExpression(r);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(l)&&(e.parenthesizedAssign=u),e.parenthesizedBind<0&&(e.parenthesizedBind=u)),l;case T.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(T.bracketR,!0,!0,e),this.finishNode(t,\"ArrayExpression\");case T.braceL:return this.parseObj(!1,e);case T._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case T._class:return this.parseClass(this.startNode(),!1);case T._new:return this.parseNew();case T.backQuote:return this.parseTemplate();case T._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected();}},ee.parseExprImport=function(){var e=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,\"Escape sequence in keyword import\");var t=this.parseIdent(!0);switch(this.type){case T.parenL:return this.parseDynamicImport(e);case T.dot:return e.meta=t,this.parseImportMeta(e);default:this.unexpected();}},ee.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(T.parenR)){var t=this.start;this.eat(T.comma)&&this.eat(T.parenR)?this.raiseRecoverable(t,\"Trailing comma is not allowed in import()\"):this.unexpected(t);}return this.finishNode(e,\"ImportExpression\");},ee.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),\"meta\"!==e.property.name&&this.raiseRecoverable(e.property.start,\"The only valid meta property for import is 'import.meta'\"),t&&this.raiseRecoverable(e.start,\"'import.meta' must not contain escaped characters\"),\"module\"!==this.options.sourceType&&this.raiseRecoverable(e.start,\"Cannot use 'import.meta' outside a module\"),this.finishNode(e,\"MetaProperty\");},ee.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,\"\")),this.next(),this.finishNode(t,\"Literal\");},ee.parseParenExpression=function(){this.expect(T.parenL);var e=this.parseExpression();return this.expect(T.parenR),e;},ee.parseParenAndDistinguishExpression=function(e){var t,r=this.start,n=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var s,a=this.start,o=this.startLoc,u=[],l=!0,h=!1,c=new j(),p=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==T.parenR;){if(l?l=!1:this.expect(T.comma),i&&this.afterTrailingComma(T.parenR,!0)){h=!0;break;}if(this.type===T.ellipsis){s=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===T.comma&&this.raise(this.start,\"Comma is not permitted after the rest element\");break;}u.push(this.parseMaybeAssign(!1,c,this.parseParenItem));}var m=this.start,f=this.startLoc;if(this.expect(T.parenR),e&&!this.canInsertSemicolon()&&this.eat(T.arrow))return this.checkPatternErrors(c,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=d,this.parseParenArrowList(r,n,u);u.length&&!h||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(c,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=d||this.awaitPos,u.length>1?((t=this.startNodeAt(a,o)).expressions=u,this.finishNodeAt(t,\"SequenceExpression\",m,f)):t=u[0];}else t=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(r,n);return g.expression=t,this.finishNode(g,\"ParenthesizedExpression\");}return t;},ee.parseParenItem=function(e){return e;},ee.parseParenArrowList=function(e,t,r){return this.parseArrowExpression(this.startNodeAt(e,t),r);};var te=[];ee.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,\"Escape sequence in keyword new\");var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(T.dot)){e.meta=t;var r=this.containsEsc;return e.property=this.parseIdent(!0),\"target\"!==e.property.name&&this.raiseRecoverable(e.property.start,\"The only valid meta property for new is 'new.target'\"),r&&this.raiseRecoverable(e.start,\"'new.target' must not contain escaped characters\"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,\"'new.target' can only be used in functions\"),this.finishNode(e,\"MetaProperty\");}var n=this.start,i=this.startLoc,s=this.type===T._import;return e.callee=this.parseSubscripts(this.parseExprAtom(),n,i,!0),s&&\"ImportExpression\"===e.callee.type&&this.raise(n,\"Cannot use new with import()\"),this.eat(T.parenL)?e.arguments=this.parseExprList(T.parenR,this.options.ecmaVersion>=8,!1):e.arguments=te,this.finishNode(e,\"NewExpression\");},ee.parseTemplateElement=function(e){var t=e.isTagged,r=this.startNode();return this.type===T.invalidTemplate?(t||this.raiseRecoverable(this.start,\"Bad escape sequence in untagged template literal\"),r.value={raw:this.value,cooked:null}):r.value={raw:this.input.slice(this.start,this.end).replace(/\\r\\n?/g,\"\\n\"),cooked:this.value},this.next(),r.tail=this.type===T.backQuote,this.finishNode(r,\"TemplateElement\");},ee.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var r=this.startNode();this.next(),r.expressions=[];var n=this.parseTemplateElement({isTagged:t});for(r.quasis=[n];!n.tail;){this.type===T.eof&&this.raise(this.pos,\"Unterminated template literal\"),this.expect(T.dollarBraceL),r.expressions.push(this.parseExpression()),this.expect(T.braceR),r.quasis.push(n=this.parseTemplateElement({isTagged:t}));}return this.next(),this.finishNode(r,\"TemplateLiteral\");},ee.isAsyncProp=function(e){return!e.computed&&\"Identifier\"===e.key.type&&\"async\"===e.key.name&&(this.type===T.name||this.type===T.num||this.type===T.string||this.type===T.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===T.star)&&!v.test(this.input.slice(this.lastTokEnd,this.start));},ee.parseObj=function(e,t){var r=this.startNode(),n=!0,i={};for(r.properties=[],this.next();!this.eat(T.braceR);){if(n)n=!1;else if(this.expect(T.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(T.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),r.properties.push(s);}return this.finishNode(r,e?\"ObjectPattern\":\"ObjectExpression\");},ee.parseProperty=function(e,t){var r,n,i,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(T.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===T.comma&&this.raise(this.start,\"Comma is not permitted after the rest element\"),this.finishNode(a,\"RestElement\")):(this.type===T.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,t),this.type===T.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,\"SpreadElement\"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(i=this.start,s=this.startLoc),e||(r=this.eat(T.star)));var o=this.containsEsc;return this.parsePropertyName(a),!e&&!o&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(a)?(n=!0,r=this.options.ecmaVersion>=9&&this.eat(T.star),this.parsePropertyName(a,t)):n=!1,this.parsePropertyValue(a,e,r,n,i,s,t,o),this.finishNode(a,\"Property\");},ee.parsePropertyValue=function(e,t,r,n,i,s,a,o){if((r||n)&&this.type===T.colon&&this.unexpected(),this.eat(T.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind=\"init\";else if(this.options.ecmaVersion>=6&&this.type===T.parenL)t&&this.unexpected(),e.kind=\"init\",e.method=!0,e.value=this.parseMethod(r,n);else if(t||o||!(this.options.ecmaVersion>=5)||e.computed||\"Identifier\"!==e.key.type||\"get\"!==e.key.name&&\"set\"!==e.key.name||this.type===T.comma||this.type===T.braceR||this.type===T.eq)this.options.ecmaVersion>=6&&!e.computed&&\"Identifier\"===e.key.type?((r||n)&&this.unexpected(),this.checkUnreserved(e.key),\"await\"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),e.kind=\"init\",t?e.value=this.parseMaybeDefault(i,s,e.key):this.type===T.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(r||n)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var u=\"get\"===e.kind?0:1;if(e.value.params.length!==u){var l=e.value.start;\"get\"===e.kind?this.raiseRecoverable(l,\"getter should have no params\"):this.raiseRecoverable(l,\"setter should have exactly one param\");}else\"set\"===e.kind&&\"RestElement\"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,\"Setter cannot use rest params\");}},ee.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(T.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(T.bracketR),e.key;e.computed=!1;}return e.key=this.type===T.num||this.type===T.string?this.parseExprAtom():this.parseIdent(\"never\"!==this.options.allowReserved);},ee.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1);},ee.parseMethod=function(e,t,r){var n=this.startNode(),i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=e),this.options.ecmaVersion>=8&&(n.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|K(t,n.generator)|(r?128:0)),this.expect(T.parenL),n.params=this.parseBindingList(T.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1,!0),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(n,\"FunctionExpression\");},ee.parseArrowExpression=function(e,t,r){var n=this.yieldPos,i=this.awaitPos,s=this.awaitIdentPos;return this.enterScope(16|K(r,!1)),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!r),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1),this.yieldPos=n,this.awaitPos=i,this.awaitIdentPos=s,this.finishNode(e,\"ArrowFunctionExpression\");},ee.parseFunctionBody=function(e,t,r){var n=t&&this.type!==T.braceL,i=this.strict,s=!1;if(n)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);i&&!a||(s=this.strictDirective(this.end))&&a&&this.raiseRecoverable(e.start,\"Illegal 'use strict' directive in function with non-simple parameter list\");var o=this.labels;this.labels=[],s&&(this.strict=!0),this.checkParams(e,!i&&!s&&!t&&!r&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLVal(e.id,5),e.body=this.parseBlock(!1,void 0,s&&!i),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=o;}this.exitScope();},ee.isSimpleParamList=function(e){for(var t=0,r=e;t<r.length;t+=1){if(\"Identifier\"!==r[t].type)return!1;}return!0;},ee.checkParams=function(e,t){for(var r={},n=0,i=e.params;n<i.length;n+=1){var s=i[n];this.checkLVal(s,1,t?null:r);}},ee.parseExprList=function(e,t,r,n){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(T.comma),t&&this.afterTrailingComma(e))break;var a=void 0;r&&this.type===T.comma?a=null:this.type===T.ellipsis?(a=this.parseSpread(n),n&&this.type===T.comma&&n.trailingComma<0&&(n.trailingComma=this.start)):a=this.parseMaybeAssign(!1,n),i.push(a);}return i;},ee.checkUnreserved=function(e){var t=e.start,r=e.end,n=e.name;(this.inGenerator&&\"yield\"===n&&this.raiseRecoverable(t,\"Cannot use 'yield' as identifier inside a generator\"),this.inAsync&&\"await\"===n&&this.raiseRecoverable(t,\"Cannot use 'await' as identifier inside an async function\"),this.keywords.test(n)&&this.raise(t,\"Unexpected keyword '\"+n+\"'\"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,r).indexOf(\"\\\\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(n)&&(this.inAsync||\"await\"!==n||this.raiseRecoverable(t,\"Cannot use keyword 'await' outside an async function\"),this.raiseRecoverable(t,\"The keyword '\"+n+\"' is reserved\"));},ee.parseIdent=function(e,t){var r=this.startNode();return this.type===T.name?r.name=this.value:this.type.keyword?(r.name=this.type.keyword,\"class\"!==r.name&&\"function\"!==r.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!e),this.finishNode(r,\"Identifier\"),e||(this.checkUnreserved(r),\"await\"!==r.name||this.awaitIdentPos||(this.awaitIdentPos=r.start)),r;},ee.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===T.semi||this.canInsertSemicolon()||this.type!==T.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(T.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,\"YieldExpression\");},ee.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!1),this.finishNode(e,\"AwaitExpression\");};var re=G.prototype;re.raise=function(e,t){var r=F(this.input,e);t+=\" (\"+r.line+\":\"+r.column+\")\";var n=new SyntaxError(t);throw n.pos=e,n.loc=r,n.raisedAt=this.pos,n;},re.raiseRecoverable=re.raise,re.curPosition=function(){if(this.options.locations)return new L(this.curLine,this.pos-this.lineStart);};var ne=G.prototype,ie=function ie(e){this.flags=e,this[\"var\"]=[],this.lexical=[],this.functions=[];};ne.enterScope=function(e){this.scopeStack.push(new ie(e));},ne.exitScope=function(){this.scopeStack.pop();},ne.treatFunctionsAsVarInScope=function(e){return e.flags&M||!this.inModule&&1&e.flags;},ne.declareName=function(e,t,r){var n=!1;if(2===t){var i=this.currentScope();n=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i[\"var\"].indexOf(e)>-1,i.lexical.push(e),this.inModule&&1&i.flags&&delete this.undefinedExports[e];}else if(4===t){this.currentScope().lexical.push(e);}else if(3===t){var s=this.currentScope();n=this.treatFunctionsAsVar?s.lexical.indexOf(e)>-1:s.lexical.indexOf(e)>-1||s[\"var\"].indexOf(e)>-1,s.functions.push(e);}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(e)>-1&&!(32&o.flags&&o.lexical[0]===e)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(e)>-1){n=!0;break;}if(o[\"var\"].push(e),this.inModule&&1&o.flags&&delete this.undefinedExports[e],o.flags&O)break;}n&&this.raiseRecoverable(r,\"Identifier '\"+e+\"' has already been declared\");},ne.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0][\"var\"].indexOf(e.name)&&(this.undefinedExports[e.name]=e);},ne.currentScope=function(){return this.scopeStack[this.scopeStack.length-1];},ne.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&O)return t;}},ne.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&O&&!(16&t.flags))return t;}};var se=function se(e,t,r){this.type=\"\",this.start=t,this.end=0,e.options.locations&&(this.loc=new R(e,r)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0]);},ae=G.prototype;function oe(e,t,r,n){return e.type=t,e.end=r,this.options.locations&&(e.loc.end=n),this.options.ranges&&(e.range[1]=r),e;}ae.startNode=function(){return new se(this,this.start,this.startLoc);},ae.startNodeAt=function(e,t){return new se(this,e,t);},ae.finishNode=function(e,t){return oe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc);},ae.finishNodeAt=function(e,t,r,n){return oe.call(this,e,t,r,n);};var ue=function ue(e,t,r,n,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!r,this.override=n,this.generator=!!i;},le={b_stat:new ue(\"{\",!1),b_expr:new ue(\"{\",!0),b_tmpl:new ue(\"${\",!1),p_stat:new ue(\"(\",!1),p_expr:new ue(\"(\",!0),q_tmpl:new ue(\"`\",!0,!0,function(e){return e.tryReadTemplateToken();}),f_stat:new ue(\"function\",!1),f_expr:new ue(\"function\",!0),f_expr_gen:new ue(\"function\",!0,!1,null,!0),f_gen:new ue(\"function\",!1,!1,null,!0)},he=G.prototype;he.initialContext=function(){return[le.b_stat];},he.braceIsBlock=function(e){var t=this.curContext();return t===le.f_expr||t===le.f_stat||(e!==T.colon||t!==le.b_stat&&t!==le.b_expr?e===T._return||e===T.name&&this.exprAllowed?v.test(this.input.slice(this.lastTokEnd,this.start)):e===T._else||e===T.semi||e===T.eof||e===T.parenR||e===T.arrow||(e===T.braceL?t===le.b_stat:e!==T._var&&e!==T._const&&e!==T.name&&!this.exprAllowed):!t.isExpr);},he.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(\"function\"===t.token)return t.generator;}return!1;},he.updateContext=function(e){var t,r=this.type;r.keyword&&e===T.dot?this.exprAllowed=!1:(t=r.updateContext)?t.call(this,e):this.exprAllowed=r.beforeExpr;},T.parenR.updateContext=T.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===le.b_stat&&\"function\"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr;}else this.exprAllowed=!0;},T.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?le.b_stat:le.b_expr),this.exprAllowed=!0;},T.dollarBraceL.updateContext=function(){this.context.push(le.b_tmpl),this.exprAllowed=!0;},T.parenL.updateContext=function(e){var t=e===T._if||e===T._for||e===T._with||e===T._while;this.context.push(t?le.p_stat:le.p_expr),this.exprAllowed=!0;},T.incDec.updateContext=function(){},T._function.updateContext=T._class.updateContext=function(e){!e.beforeExpr||e===T.semi||e===T._else||e===T._return&&v.test(this.input.slice(this.lastTokEnd,this.start))||(e===T.colon||e===T.braceL)&&this.curContext()===le.b_stat?this.context.push(le.f_stat):this.context.push(le.f_expr),this.exprAllowed=!1;},T.backQuote.updateContext=function(){this.curContext()===le.q_tmpl?this.context.pop():this.context.push(le.q_tmpl),this.exprAllowed=!1;},T.star.updateContext=function(e){if(e===T._function){var t=this.context.length-1;this.context[t]===le.f_expr?this.context[t]=le.f_expr_gen:this.context[t]=le.f_gen;}this.exprAllowed=!0;},T.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==T.dot&&(\"of\"===this.value&&!this.exprAllowed||\"yield\"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t;};var ce=\"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS\",pe=ce+\" Extended_Pictographic\",de={9:ce,10:pe,11:\"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic\"},me=\"Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu\",fe=\"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb\",ge=fe+\" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd\",xe={9:fe,10:ge,11:\"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho\"},ye={};function be(e){var t=ye[e]={binary:$(de[e]+\" \"+me),nonBinary:{General_Category:$(me),Script:$(xe[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions;}be(9),be(10),be(11);var Te=G.prototype,ve=function ve(e){this.parser=e,this.validFlags=\"gim\"+(e.options.ecmaVersion>=6?\"uy\":\"\")+(e.options.ecmaVersion>=9?\"s\":\"\"),this.unicodeProperties=ye[e.options.ecmaVersion>=11?11:e.options.ecmaVersion],this.source=\"\",this.flags=\"\",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue=\"\",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[];};function Se(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)));}function Ae(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125;}function _e(e){return e>=65&&e<=90||e>=97&&e<=122;}function Ee(e){return _e(e)||95===e;}function we(e){return Ee(e)||ke(e);}function ke(e){return e>=48&&e<=57;}function Ie(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102;}function De(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48;}function Ce(e){return e>=48&&e<=55;}ve.prototype.reset=function(e,t,r){var n=-1!==r.indexOf(\"u\");this.start=0|e,this.source=t+\"\",this.flags=r,this.switchU=n&&this.parser.options.ecmaVersion>=6,this.switchN=n&&this.parser.options.ecmaVersion>=9;},ve.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,\"Invalid regular expression: /\"+this.source+\"/: \"+e);},ve.prototype.at=function(e,t){void 0===t&&(t=!1);var r=this.source,n=r.length;if(e>=n)return-1;var i=r.charCodeAt(e);if(!t&&!this.switchU||i<=55295||i>=57344||e+1>=n)return i;var s=r.charCodeAt(e+1);return s>=56320&&s<=57343?(i<<10)+s-56613888:i;},ve.prototype.nextIndex=function(e,t){void 0===t&&(t=!1);var r=this.source,n=r.length;if(e>=n)return n;var i,s=r.charCodeAt(e);return!t&&!this.switchU||s<=55295||s>=57344||e+1>=n||(i=r.charCodeAt(e+1))<56320||i>57343?e+1:e+2;},ve.prototype.current=function(e){return void 0===e&&(e=!1),this.at(this.pos,e);},ve.prototype.lookahead=function(e){return void 0===e&&(e=!1),this.at(this.nextIndex(this.pos,e),e);},ve.prototype.advance=function(e){void 0===e&&(e=!1),this.pos=this.nextIndex(this.pos,e);},ve.prototype.eat=function(e,t){return void 0===t&&(t=!1),this.current(t)===e&&(this.advance(t),!0);},Te.validateRegExpFlags=function(e){for(var t=e.validFlags,r=e.flags,n=0;n<r.length;n++){var i=r.charAt(n);-1===t.indexOf(i)&&this.raise(e.start,\"Invalid regular expression flag\"),r.indexOf(i,n+1)>-1&&this.raise(e.start,\"Duplicate regular expression flag\");}},Te.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e));},Te.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue=\"\",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise(\"Unmatched ')'\"),(e.eat(93)||e.eat(125))&&e.raise(\"Lone quantifier brackets\")),e.maxBackReference>e.numCapturingParens&&e.raise(\"Invalid escape\");for(var t=0,r=e.backReferenceNames;t<r.length;t+=1){var n=r[t];-1===e.groupNames.indexOf(n)&&e.raise(\"Invalid named capture referenced\");}},Te.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);){this.regexp_alternative(e);}this.regexp_eatQuantifier(e,!0)&&e.raise(\"Nothing to repeat\"),e.eat(123)&&e.raise(\"Lone quantifier brackets\");},Te.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e);){;}},Te.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise(\"Invalid quantifier\"),!0):!(e.switchU?!this.regexp_eatAtom(e):!this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0);},Te.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t;}if(e.eat(40)&&e.eat(63)){var r=!1;if(this.options.ecmaVersion>=9&&(r=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise(\"Unterminated group\"),e.lastAssertionIsQuantifiable=!r,!0;}return e.pos=t,!1;},Te.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0);},Te.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t);},Te.regexp_eatBracedQuantifier=function(e,t){var r=e.pos;if(e.eat(123)){var n=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(n=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<n&&!t&&e.raise(\"numbers out of order in {} quantifier\"),!0;e.switchU&&!t&&e.raise(\"Incomplete quantifier\"),e.pos=r;}return!1;},Te.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e);},Te.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t;}return!1;},Te.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise(\"Unterminated group\");}e.pos=t;}return!1;},Te.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise(\"Invalid group\"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise(\"Unterminated group\");}return!1;},Te.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e);},Te.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise(\"Nothing to repeat\"),!1;},Te.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!Ae(t)&&(e.lastIntValue=t,e.advance(),!0);},Te.regexp_eatPatternCharacters=function(e){for(var t=e.pos,r=0;-1!==(r=e.current())&&!Ae(r);){e.advance();}return e.pos!==t;},Te.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0);},Te.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise(\"Duplicate capture group name\"),void e.groupNames.push(e.lastStringValue);e.raise(\"Invalid group\");}},Te.regexp_eatGroupName=function(e){if(e.lastStringValue=\"\",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise(\"Invalid capture group name\");}return!1;},Te.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue=\"\",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Se(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);){e.lastStringValue+=Se(e.lastIntValue);}return!0;}return!1;},Te.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,r=this.options.ecmaVersion>=11,n=e.current(r);return e.advance(r),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e,r)&&(n=e.lastIntValue),function(e){return p(e,!0)||36===e||95===e;}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1);},Te.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,r=this.options.ecmaVersion>=11,n=e.current(r);return e.advance(r),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e,r)&&(n=e.lastIntValue),function(e){return d(e,!0)||36===e||95===e||8204===e||8205===e;}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1);},Te.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise(\"Invalid unicode escape\"),e.raise(\"Invalid escape\")),!1);},Te.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var r=e.lastIntValue;if(e.switchU)return r>e.maxBackReference&&(e.maxBackReference=r),!0;if(r<=e.numCapturingParens)return!0;e.pos=t;}return!1;},Te.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise(\"Invalid named reference\");}return!1;},Te.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e);},Te.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t;}return!1;},Te.regexp_eatZero=function(e){return 48===e.current()&&!ke(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0);},Te.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0);},Te.regexp_eatControlLetter=function(e){var t=e.current();return!!_e(t)&&(e.lastIntValue=t%32,e.advance(),!0);},Te.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){void 0===t&&(t=!1);var r,n=e.pos,i=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var s=e.lastIntValue;if(i&&s>=55296&&s<=56319){var a=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=1024*(s-55296)+(o-56320)+65536,!0;}e.pos=a,e.lastIntValue=s;}return!0;}if(i&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&(r=e.lastIntValue)>=0&&r<=1114111)return!0;i&&e.raise(\"Invalid unicode escape\"),e.pos=n;}return!1;},Te.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0);},Te.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();}while((t=e.current())>=48&&t<=57);return!0;}return!1;},Te.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e;}(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise(\"Invalid property name\");}return!1;},Te.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var r=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var n=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,r,n),!0;}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0;}return!1;},Te.regexp_validateUnicodePropertyNameAndValue=function(e,t,r){D(e.unicodeProperties.nonBinary,t)||e.raise(\"Invalid property name\"),e.unicodeProperties.nonBinary[t].test(r)||e.raise(\"Invalid property value\");},Te.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise(\"Invalid property name\");},Te.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue=\"\";Ee(t=e.current());){e.lastStringValue+=Se(t),e.advance();}return\"\"!==e.lastStringValue;},Te.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue=\"\";we(t=e.current());){e.lastStringValue+=Se(t),e.advance();}return\"\"!==e.lastStringValue;},Te.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e);},Te.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise(\"Unterminated character class\");}return!1;},Te.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var r=e.lastIntValue;!e.switchU||-1!==t&&-1!==r||e.raise(\"Invalid character class\"),-1!==t&&-1!==r&&t>r&&e.raise(\"Range out of order in character class\");}}},Te.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var r=e.current();(99===r||Ce(r))&&e.raise(\"Invalid class escape\"),e.raise(\"Invalid escape\");}e.pos=t;}var n=e.current();return 93!==n&&(e.lastIntValue=n,e.advance(),!0);},Te.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t;}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e);},Te.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!ke(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0);},Te.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise(\"Invalid escape\"),e.pos=t;}return!1;},Te.regexp_eatDecimalDigits=function(e){var t=e.pos,r=0;for(e.lastIntValue=0;ke(r=e.current());){e.lastIntValue=10*e.lastIntValue+(r-48),e.advance();}return e.pos!==t;},Te.regexp_eatHexDigits=function(e){var t=e.pos,r=0;for(e.lastIntValue=0;Ie(r=e.current());){e.lastIntValue=16*e.lastIntValue+De(r),e.advance();}return e.pos!==t;},Te.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var r=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*r+e.lastIntValue:e.lastIntValue=8*t+r;}else e.lastIntValue=t;return!0;}return!1;},Te.regexp_eatOctalDigit=function(e){var t=e.current();return Ce(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1);},Te.regexp_eatFixedHexDigits=function(e,t){var r=e.pos;e.lastIntValue=0;for(var n=0;n<t;++n){var i=e.current();if(!Ie(i))return e.pos=r,!1;e.lastIntValue=16*e.lastIntValue+De(i),e.advance();}return!0;};var $e=function $e(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new R(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end]);},Le=G.prototype;function Re(e){return\"function\"!=typeof BigInt?null:BigInt(e.replace(/_/g,\"\"));}function Fe(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)));}Le.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,\"Escape sequence in keyword \"+this.type.keyword),this.options.onToken&&this.options.onToken(new $e(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken();},Le.getToken=function(){return this.next(),new $e(this);},\"undefined\"!=typeof Symbol&&(Le[Symbol.iterator]=function(){var e=this;return{next:function next(){var t=e.getToken();return{done:t.type===T.eof,value:t};}};}),Le.curContext=function(){return this.context[this.context.length-1];},Le.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(T.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos());},Le.readToken=function(e){return p(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e);},Le.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888;},Le.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),r=this.pos,n=this.input.indexOf(\"*/\",this.pos+=2);if(-1===n&&this.raise(this.pos-2,\"Unterminated comment\"),this.pos=n+2,this.options.locations)for(S.lastIndex=r;(e=S.exec(this.input))&&e.index<this.pos;){++this.curLine,this.lineStart=e.index+e[0].length;}this.options.onComment&&this.options.onComment(!0,this.input.slice(r+2,n),r,this.pos,t,this.curPosition());},Le.skipLineComment=function(e){for(var t=this.pos,r=this.options.onComment&&this.curPosition(),n=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!A(n);){n=this.input.charCodeAt(++this.pos);}this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,r,this.curPosition());},Le.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e;}break;default:if(!(e>8&&e<14||e>=5760&&_.test(String.fromCharCode(e))))break e;++this.pos;}}},Le.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var r=this.type;this.type=e,this.value=t,this.updateContext(r);},Le.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(T.ellipsis)):(++this.pos,this.finishToken(T.dot));},Le.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(T.assign,2):this.finishOp(T.slash,1);},Le.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),r=1,n=42===e?T.star:T.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++r,n=T.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(T.assign,r+1):this.finishOp(n,r);},Le.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(T.assign,3);return this.finishOp(124===e?T.logicalOR:T.logicalAND,2);}return 61===t?this.finishOp(T.assign,2):this.finishOp(124===e?T.bitwiseOR:T.bitwiseAND,1);},Le.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(T.assign,2):this.finishOp(T.bitwiseXOR,1);},Le.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!v.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(T.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(T.assign,2):this.finishOp(T.plusMin,1);},Le.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),r=1;return t===e?(r=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+r)?this.finishOp(T.assign,r+1):this.finishOp(T.bitShift,r)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(r=2),this.finishOp(T.relational,r)):(this.skipLineComment(4),this.skipSpace(),this.nextToken());},Le.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(T.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(T.arrow)):this.finishOp(61===e?T.eq:T.prefix,1);},Le.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(46===t){var r=this.input.charCodeAt(this.pos+2);if(r<48||r>57)return this.finishOp(T.questionDot,2);}if(63===t){if(e>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(T.assign,3);return this.finishOp(T.coalesce,2);}}return this.finishOp(T.question,1);},Le.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(T.parenL);case 41:return++this.pos,this.finishToken(T.parenR);case 59:return++this.pos,this.finishToken(T.semi);case 44:return++this.pos,this.finishToken(T.comma);case 91:return++this.pos,this.finishToken(T.bracketL);case 93:return++this.pos,this.finishToken(T.bracketR);case 123:return++this.pos,this.finishToken(T.braceL);case 125:return++this.pos,this.finishToken(T.braceR);case 58:return++this.pos,this.finishToken(T.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(T.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2);}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(T.prefix,1);}this.raise(this.pos,\"Unexpected character '\"+Fe(e)+\"'\");},Le.finishOp=function(e,t){var r=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,r);},Le.readRegexp=function(){for(var e,t,r=this.pos;;){this.pos>=this.input.length&&this.raise(r,\"Unterminated regular expression\");var n=this.input.charAt(this.pos);if(v.test(n)&&this.raise(r,\"Unterminated regular expression\"),e)e=!1;else{if(\"[\"===n)t=!0;else if(\"]\"===n&&t)t=!1;else if(\"/\"===n&&!t)break;e=\"\\\\\"===n;}++this.pos;}var i=this.input.slice(r,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new ve(this));o.reset(r,i,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var u=null;try{u=new RegExp(i,a);}catch(e){}return this.finishToken(T.regexp,{pattern:i,flags:a,value:u});},Le.readInt=function(e,t,r){for(var n=this.options.ecmaVersion>=12&&void 0===t,i=r&&48===this.input.charCodeAt(this.pos),s=this.pos,a=0,o=0,u=0,l=null==t?1/0:t;u<l;++u,++this.pos){var h=this.input.charCodeAt(this.pos),c=void 0;if(n&&95===h)i&&this.raiseRecoverable(this.pos,\"Numeric separator is not allowed in legacy octal numeric literals\"),95===o&&this.raiseRecoverable(this.pos,\"Numeric separator must be exactly one underscore\"),0===u&&this.raiseRecoverable(this.pos,\"Numeric separator is not allowed at the first of digits\"),o=h;else{if((c=h>=97?h-97+10:h>=65?h-65+10:h>=48&&h<=57?h-48:1/0)>=e)break;o=h,a=a*e+c;}}return n&&95===o&&this.raiseRecoverable(this.pos-1,\"Numeric separator is not allowed at the last of digits\"),this.pos===s||null!=t&&this.pos-s!==t?null:a;},Le.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var r=this.readInt(e);return null==r&&this.raise(this.start+2,\"Expected number in radix \"+e),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(r=Re(this.input.slice(t,this.pos)),++this.pos):p(this.fullCharCodeAtPos())&&this.raise(this.pos,\"Identifier directly after number\"),this.finishToken(T.num,r);},Le.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10,void 0,!0)||this.raise(t,\"Invalid number\");var r=this.pos-t>=2&&48===this.input.charCodeAt(t);r&&this.strict&&this.raise(t,\"Invalid number\");var n=this.input.charCodeAt(this.pos);if(!r&&!e&&this.options.ecmaVersion>=11&&110===n){var i=Re(this.input.slice(t,this.pos));return++this.pos,p(this.fullCharCodeAtPos())&&this.raise(this.pos,\"Identifier directly after number\"),this.finishToken(T.num,i);}r&&/[89]/.test(this.input.slice(t,this.pos))&&(r=!1),46!==n||r||(++this.pos,this.readInt(10),n=this.input.charCodeAt(this.pos)),69!==n&&101!==n||r||(43!==(n=this.input.charCodeAt(++this.pos))&&45!==n||++this.pos,null===this.readInt(10)&&this.raise(t,\"Invalid number\")),p(this.fullCharCodeAtPos())&&this.raise(this.pos,\"Identifier directly after number\");var s,a=(s=this.input.slice(t,this.pos),r?parseInt(s,8):parseFloat(s.replace(/_/g,\"\")));return this.finishToken(T.num,a);},Le.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf(\"}\",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,\"Code point out of bounds\");}else e=this.readHexChar(4);return e;},Le.readString=function(e){for(var t=\"\",r=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,\"Unterminated string constant\");var n=this.input.charCodeAt(this.pos);if(n===e)break;92===n?(t+=this.input.slice(r,this.pos),t+=this.readEscapedChar(!1),r=this.pos):(A(n,this.options.ecmaVersion>=10)&&this.raise(this.start,\"Unterminated string constant\"),++this.pos);}return t+=this.input.slice(r,this.pos++),this.finishToken(T.string,t);};var Ne={};Le.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken();}catch(e){if(e!==Ne)throw e;this.readInvalidTemplateToken();}this.inTemplateElement=!1;},Le.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Ne;this.raise(e,t);},Le.readTmplToken=function(){for(var e=\"\",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,\"Unterminated template\");var r=this.input.charCodeAt(this.pos);if(96===r||36===r&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==T.template&&this.type!==T.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(T.template,e)):36===r?(this.pos+=2,this.finishToken(T.dollarBraceL)):(++this.pos,this.finishToken(T.backQuote));if(92===r)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(A(r)){switch(e+=this.input.slice(t,this.pos),++this.pos,r){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+=\"\\n\";break;default:e+=String.fromCharCode(r);}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos;}else++this.pos;}},Le.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++){switch(this.input[this.pos]){case\"\\\\\":++this.pos;break;case\"$\":if(\"{\"!==this.input[this.pos+1])break;case\"`\":return this.finishToken(T.invalidTemplate,this.input.slice(this.start,this.pos));}}this.raise(this.start,\"Unterminated template\");},Le.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return\"\\n\";case 114:return\"\\r\";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Fe(this.readCodePoint());case 116:return\"\\t\";case 98:return\"\\b\";case 118:return\"\\v\";case 102:return\"\\f\";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),\"\";case 56:case 57:if(e){var r=this.pos-1;return this.invalidStringToken(r,\"Invalid escape sequence in template string\"),null;}default:if(t>=48&&t<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(n,8);return i>255&&(n=n.slice(0,-1),i=parseInt(n,8)),this.pos+=n.length-1,t=this.input.charCodeAt(this.pos),\"0\"===n&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-n.length,e?\"Octal literal in template string\":\"Octal literal in strict mode\"),String.fromCharCode(i);}return A(t)?\"\":String.fromCharCode(t);}},Le.readHexChar=function(e){var t=this.pos,r=this.readInt(16,e);return null===r&&this.invalidStringToken(t,\"Bad character escape sequence\"),r;},Le.readWord1=function(){this.containsEsc=!1;for(var e=\"\",t=!0,r=this.pos,n=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(d(i,n))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(r,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,\"Expecting Unicode escape sequence \\\\uXXXX\"),++this.pos;var a=this.readCodePoint();(t?p:d)(a,n)||this.invalidStringToken(s,\"Invalid Unicode escape\"),e+=Fe(a),r=this.pos;}t=!1;}return e+this.input.slice(r,this.pos);},Le.readWord=function(){var e=this.readWord1(),t=T.name;return this.keywords.test(e)&&(t=y[e]),this.finishToken(t,e);},G.acorn={Parser:G,version:\"7.4.0\",defaultOptions:N,Position:L,SourceLocation:R,getLineInfo:F,Node:se,TokenType:m,tokTypes:T,keywordTypes:y,TokContext:ue,tokContexts:le,isIdentifierChar:d,isIdentifierStart:p,Token:$e,isNewLine:A,lineBreak:v,lineBreakG:S,nonASCIIwhitespace:_},e.Node=se,e.Parser=G,e.Position=L,e.SourceLocation=R,e.TokContext=ue,e.Token=$e,e.TokenType=m,e.defaultOptions=N,e.getLineInfo=F,e.isIdentifierChar=d,e.isIdentifierStart=p,e.isNewLine=A,e.keywordTypes=y,e.lineBreak=v,e.lineBreakG=S,e.nonASCIIwhitespace=_,e.parse=function(e,t){return G.parse(e,t);},e.parseExpressionAt=function(e,t,r){return G.parseExpressionAt(e,t,r);},e.tokContexts=le,e.tokTypes=T,e.tokenizer=function(e,t){return G.tokenizer(e,t);},e.version=\"7.4.0\",Object.defineProperty(e,\"__esModule\",{value:!0});}(\"object\"==_typeof(r)&&void 0!==t?r:(n=n||self).acorn={});},{}],2:[function(e,t,r){},{}],3:[function(e,t,r){function n(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var _t$contextName=t.contextName,r=_t$contextName===void 0?\"gl\":_t$contextName,n=t.throwGetError,o=t.useTrackablePrimitives,u=t.readPixelsFile,_t$recording=t.recording,l=_t$recording===void 0?[]:_t$recording,_t$variables=t.variables,h=_t$variables===void 0?{}:_t$variables,c=t.onReadPixels,p=t.onUnrecognizedArgumentLookup,d=new Proxy(e,{get:function get(t,d){switch(d){case\"addComment\":return E;case\"checkThrowError\":return w;case\"getReadPixelsVariableName\":return g;case\"insertVariable\":return v;case\"reset\":return T;case\"setIndent\":return A;case\"toString\":return b;case\"getContextVariableName\":return I;}if(\"function\"==typeof e[d])return function(){switch(d){case\"getError\":return n?l.push(\"\".concat(y,\"if (\").concat(r,\".getError() !== \").concat(r,\".NONE) throw new Error('error');\")):l.push(\"\".concat(y).concat(r,\".getError();\")),e.getError();case\"getExtension\":{var _t2=\"\".concat(r,\"Variables\").concat(m.length);l.push(\"\".concat(y,\"const \").concat(_t2,\" = \").concat(r,\".getExtension('\").concat(arguments[0],\"');\"));var _n2=e.getExtension(arguments[0]);if(_n2&&\"object\"==_typeof(_n2)){var _e2=i(_n2,{getEntity:S,useTrackablePrimitives:o,recording:l,contextName:_t2,contextVariables:m,variables:h,indent:y,onUnrecognizedArgumentLookup:p});return m.push(_e2),_e2;}return m.push(null),_n2;}case\"readPixels\":var _t=m.indexOf(arguments[6]);var _a;if(-1===_t){var _e3=function(e){if(h)for(var _t3 in h){if(h[_t3]===e)return _t3;}return null;}(arguments[6]);_e3?(_a=_e3,l.push(\"\".concat(y).concat(_e3))):(_a=\"\".concat(r,\"Variable\").concat(m.length),m.push(arguments[6]),l.push(\"\".concat(y,\"const \").concat(_a,\" = new \").concat(arguments[6].constructor.name,\"(\").concat(arguments[6].length,\");\")));}else _a=\"\".concat(r,\"Variable\").concat(_t);g=_a;var _f=[arguments[0],arguments[1],arguments[2],arguments[3],S(arguments[4]),S(arguments[5]),_a];return l.push(\"\".concat(y).concat(r,\".readPixels(\").concat(_f.join(\", \"),\");\")),u&&function(e,t){var n=\"\".concat(r,\"Variable\").concat(m.length),i=\"imageDatum\".concat(x);l.push(\"\".concat(y,\"let \").concat(i,\" = [\\\"P3\\\\n# \").concat(u,\".ppm\\\\n\\\", \").concat(e,\", ' ', \").concat(t,\", \\\"\\\\n255\\\\n\\\"].join(\\\"\\\");\")),l.push(\"\".concat(y,\"for (let i = 0; i < \").concat(i,\".length; i += 4) {\")),l.push(\"\".concat(y,\"  \").concat(i,\" += \").concat(n,\"[i] + ' ' + \").concat(n,\"[i + 1] + ' ' + \").concat(n,\"[i + 2] + ' ';\")),l.push(\"\".concat(y,\"}\")),l.push(\"\".concat(y,\"if (typeof require !== \\\"undefined\\\") {\")),l.push(\"\".concat(y,\"  require('fs').writeFileSync('./\").concat(u,\".ppm', \").concat(i,\");\")),l.push(\"\".concat(y,\"}\")),x++;}(arguments[2],arguments[3]),c&&c(_a,_f),e.readPixels.apply(e,arguments);case\"drawBuffers\":return l.push(\"\".concat(y).concat(r,\".drawBuffers([\").concat(s(arguments[0],{contextName:r,contextVariables:m,getEntity:S,addVariable:_,variables:h,onUnrecognizedArgumentLookup:p}),\"]);\")),e.drawBuffers(arguments[0]);}var t=e[d].apply(e,arguments);switch(_typeof(t)){case\"undefined\":return void l.push(\"\".concat(y).concat(k(d,arguments),\";\"));case\"number\":case\"boolean\":if(o&&-1===m.indexOf(a(t))){l.push(\"\".concat(y,\"const \").concat(r,\"Variable\").concat(m.length,\" = \").concat(k(d,arguments),\";\")),m.push(t=a(t));break;}default:null===t?l.push(\"\".concat(k(d,arguments),\";\")):l.push(\"\".concat(y,\"const \").concat(r,\"Variable\").concat(m.length,\" = \").concat(k(d,arguments),\";\")),m.push(t);}return t;};return f[e[d]]=d,e[d];}}),m=[],f={};var g,x=0,y=\"\";return d;function b(){return l.join(\"\\n\");}function T(){for(;l.length>0;){l.pop();}}function v(e,t){h[e]=t;}function S(e){var t=f[e];return t?r+\".\"+t:e;}function A(e){y=\" \".repeat(e);}function _(e,t){var n=\"\".concat(r,\"Variable\").concat(m.length);return l.push(\"\".concat(y,\"const \").concat(n,\" = \").concat(t,\";\")),m.push(e),n;}function E(e){l.push(\"\".concat(y,\"// \").concat(e));}function w(){l.push(\"\".concat(y,\"(() => {\\n\").concat(y,\"const error = \").concat(r,\".getError();\\n\").concat(y,\"if (error !== \").concat(r,\".NONE) {\\n\").concat(y,\"  const names = Object.getOwnPropertyNames(gl);\\n\").concat(y,\"  for (let i = 0; i < names.length; i++) {\\n\").concat(y,\"    const name = names[i];\\n\").concat(y,\"    if (\").concat(r,\"[name] === error) {\\n\").concat(y,\"      throw new Error('\").concat(r,\" threw ' + name);\\n\").concat(y,\"    }\\n\").concat(y,\"  }\\n\").concat(y,\"}\\n\").concat(y,\"})();\"));}function k(e,t){return\"\".concat(r,\".\").concat(e,\"(\").concat(s(t,{contextName:r,contextVariables:m,getEntity:S,addVariable:_,variables:h,onUnrecognizedArgumentLookup:p}),\")\");}function I(e){var t=m.indexOf(e);return-1!==t?\"\".concat(r,\"Variable\").concat(t):null;}}function i(e,t){var r=new Proxy(e,{get:function get(t,r){if(\"function\"==typeof t[r])return function(){switch(r){case\"drawBuffersWEBGL\":return h.push(\"\".concat(p).concat(i,\".drawBuffersWEBGL([\").concat(s(arguments[0],{contextName:i,contextVariables:o,getEntity:m,addVariable:g,variables:c,onUnrecognizedArgumentLookup:d}),\"]);\")),e.drawBuffersWEBGL(arguments[0]);}var t=e[r].apply(e,arguments);switch(_typeof(t)){case\"undefined\":return void h.push(\"\".concat(p).concat(f(r,arguments),\";\"));case\"number\":case\"boolean\":l&&-1===o.indexOf(a(t))?(h.push(\"\".concat(p,\"const \").concat(i,\"Variable\").concat(o.length,\" = \").concat(f(r,arguments),\";\")),o.push(t=a(t))):(h.push(\"\".concat(p,\"const \").concat(i,\"Variable\").concat(o.length,\" = \").concat(f(r,arguments),\";\")),o.push(t));break;default:null===t?h.push(\"\".concat(f(r,arguments),\";\")):h.push(\"\".concat(p,\"const \").concat(i,\"Variable\").concat(o.length,\" = \").concat(f(r,arguments),\";\")),o.push(t);}return t;};return n[e[r]]=r,e[r];}}),n={},i=t.contextName,o=t.contextVariables,u=t.getEntity,l=t.useTrackablePrimitives,h=t.recording,c=t.variables,p=t.indent,d=t.onUnrecognizedArgumentLookup;return r;function m(e){return n.hasOwnProperty(e)?\"\".concat(i,\".\").concat(n[e]):u(e);}function f(e,t){return\"\".concat(i,\".\").concat(e,\"(\").concat(s(t,{contextName:i,contextVariables:o,getEntity:m,addVariable:g,variables:c,onUnrecognizedArgumentLookup:d}),\")\");}function g(e,t){var r=\"\".concat(i,\"Variable\").concat(o.length);return o.push(e),h.push(\"\".concat(p,\"const \").concat(r,\" = \").concat(t,\";\")),r;}}function s(e,t){var r=t.variables,n=t.onUnrecognizedArgumentLookup;return Array.from(e).map(function(e){var i=function(e){if(r)for(var _t4 in r){if(r.hasOwnProperty(_t4)&&r[_t4]===e)return _t4;}if(n)return n(e);return null;}(e);return i||function(e,t){var r=t.contextName,n=t.contextVariables,i=t.getEntity,s=t.addVariable,a=t.onUnrecognizedArgumentLookup;if(void 0===e)return\"undefined\";if(null===e)return\"null\";var o=n.indexOf(e);if(o>-1)return\"\".concat(r,\"Variable\").concat(o);switch(e.constructor.name){case\"String\":var _t5=/\\n/.test(e),_r=/'/.test(e),_n3=/\"/.test(e);return _t5?\"`\"+e+\"`\":_r&&!_n3?'\"'+e+'\"':\"'\"+e+\"'\";case\"Number\":case\"Boolean\":return i(e);case\"Array\":return s(e,\"new \".concat(e.constructor.name,\"([\").concat(Array.from(e).join(\",\"),\"])\"));case\"Float32Array\":case\"Uint8Array\":case\"Uint16Array\":case\"Int32Array\":return s(e,\"new \".concat(e.constructor.name,\"(\").concat(JSON.stringify(Array.from(e)),\")\"));default:if(a){var _t6=a(e);if(_t6)return _t6;}throw new Error(\"unrecognized argument type \".concat(e.constructor.name));}}(e,t);}).join(\", \");}function a(e){return new e.constructor(e);}void 0!==t&&(t.exports={glWiretap:n,glExtensionWiretap:i}),\"undefined\"!=typeof window&&(n.glExtensionWiretap=i,window.glWiretap=n);},{}],4:[function(e,t,r){function n(e){var t=new Array(e.length);for(var _r2=0;_r2<e.length;_r2++){var _n4=e[_r2];_n4.toArray?t[_r2]=_n4.toArray():t[_r2]=_n4;}return t;}function i(e){e.setOutput=function(t){e.output=a(t),e.graphical&&s(e);},e.toJSON=function(){throw new Error(\"Not usable with gpuMock\");},e.setConstants=function(t){return e.constants=t,e;},e.setGraphical=function(t){return e.graphical=t,e;},e.setCanvas=function(t){return e.canvas=t,e;},e.setContext=function(t){return e.context=t,e;},e.destroy=function(){},e.validateSettings=function(){},e.graphical&&e.output&&s(e),e.exec=function(){var _arguments=arguments;return new Promise(function(t,r){try{t(e.apply(e,_arguments));}catch(e){r(e);}});},e.getPixels=function(t){var _e$output=e.output,r=_e$output.x,n=_e$output.y;return t?function(e,t,r){var n=r/2|0,i=4*t,s=new Uint8ClampedArray(4*t),a=e.slice(0);for(var _e4=0;_e4<n;++_e4){var _t7=_e4*i,_n5=(r-_e4-1)*i;s.set(a.subarray(_t7,_t7+i)),a.copyWithin(_t7,_n5,_n5+i),a.set(s,_n5);}return a;}(e._imageData.data,r,n):e._imageData.data.slice(0);},e.color=function(t,r,n,i){void 0===i&&(i=1),t=Math.floor(255*t),r=Math.floor(255*r),n=Math.floor(255*n),i=Math.floor(255*i);var s=e.output.x,a=e.output.y,o=e.thread.x+(a-e.thread.y-1)*s;e._colorData[4*o+0]=t,e._colorData[4*o+1]=r,e._colorData[4*o+2]=n,e._colorData[4*o+3]=i;};var t=function t(){return e;},r=[\"setWarnVarUsage\",\"setArgumentTypes\",\"setTactic\",\"setOptimizeFloatMemory\",\"setDebug\",\"setLoopMaxIterations\",\"setConstantTypes\",\"setFunctions\",\"setNativeFunctions\",\"setInjectedNative\",\"setPipeline\",\"setPrecision\",\"setOutputToTexture\",\"setImmutable\",\"setStrictIntegers\",\"setDynamicOutput\",\"setHardcodeConstants\",\"setDynamicArguments\",\"setUseLegacyEncoder\",\"setWarnVarUsage\",\"addSubKernel\"];for(var _n6=0;_n6<r.length;_n6++){e[r[_n6]]=t;}return e;}function s(e){var _e$output2=e.output,t=_e$output2.x,r=_e$output2.y;if(e.context&&e.context.createImageData){var _n7=new Uint8ClampedArray(t*r*4);e._imageData=e.context.createImageData(t,r),e._colorData=_n7;}else{var _n8=new Uint8ClampedArray(t*r*4);e._imageData={data:_n8},e._colorData=_n8;}}function a(e){var t=null;if(e.length){if(3===e.length){var _e5=_slicedToArray(e,3),_r3=_e5[0],_n9=_e5[1],_i=_e5[2];t={x:_r3,y:_n9,z:_i};}else if(2===e.length){var _e6=_slicedToArray(e,2),_r4=_e6[0],_n10=_e6[1];t={x:_r4,y:_n10};}else{var _e7=_slicedToArray(e,1),_r5=_e7[0];t={x:_r5};}}else t=e;return t;}t.exports={gpuMock:function gpuMock(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=t.output?a(t.output):null;function s(){return s.output.z?function(){var e=n(arguments),t=new Array(this.output.z);for(var _r6=0;_r6<this.output.z;_r6++){var _n11=new Array(this.output.y);for(var _t8=0;_t8<this.output.y;_t8++){var _i2=new Float32Array(this.output.x);for(var _n12=0;_n12<this.output.x;_n12++){this.thread.x=_n12,this.thread.y=_t8,this.thread.z=_r6,_i2[_n12]=this._fn.apply(this,e);}_n11[_t8]=_i2;}t[_r6]=_n11;}return t;}.apply(s,arguments):s.output.y?s.graphical?function(){var e=n(arguments);for(var _t9=0;_t9<this.output.y;_t9++){for(var _r7=0;_r7<this.output.x;_r7++){this.thread.x=_r7,this.thread.y=_t9,this.thread.z=0,this._fn.apply(this,e);}}}.apply(s,arguments):function(){var e=n(arguments),t=new Array(this.output.y);for(var _r8=0;_r8<this.output.y;_r8++){var _n13=new Float32Array(this.output.x);for(var _t10=0;_t10<this.output.x;_t10++){this.thread.x=_t10,this.thread.y=_r8,this.thread.z=0,_n13[_t10]=this._fn.apply(this,e);}t[_r8]=_n13;}return t;}.apply(s,arguments):function(){var e=n(arguments),t=new Float32Array(this.output.x);for(var _r9=0;_r9<this.output.x;_r9++){this.thread.x=_r9,this.thread.y=0,this.thread.z=0,t[_r9]=this._fn.apply(this,e);}return t;}.apply(s,arguments);}return s._fn=e,s.constants=t.constants||null,s.context=t.context||null,s.canvas=t.canvas||null,s.graphical=t.graphical||!1,s._imageData=null,s._colorData=null,s.output=r,s.thread={x:0,y:0,z:0},i(s);}};},{}],5:[function(e,t,r){var _e8=e(\"./utils\"),n=_e8.utils;t.exports={alias:function alias(e,t){var r=t.toString();return new Function(\"return function \".concat(e,\" (\").concat(n.getArgumentNamesFromString(r).join(\", \"),\") {\\n  \").concat(n.getFunctionBodyFromString(r),\"\\n}\"))();}};},{\"./utils\":114}],6:[function(e,t,r){var _e9=e(\"../function-node\"),n=_e9.FunctionNode;t.exports={CPUFunctionNode:/*#__PURE__*/function(_n14){_inherits(CPUFunctionNode,_n14);var _super=_createSuper(CPUFunctionNode);function CPUFunctionNode(){_classCallCheck(this,CPUFunctionNode);return _super.apply(this,arguments);}_createClass(CPUFunctionNode,[{key:\"astFunction\",value:function astFunction(e,t){if(!this.isRootKernel){t.push(\"function\"),t.push(\" \"),t.push(this.name),t.push(\"(\");for(var _e10=0;_e10<this.argumentNames.length;++_e10){var _r10=this.argumentNames[_e10];_e10>0&&t.push(\", \"),t.push(\"user_\"),t.push(_r10);}t.push(\") {\\n\");}for(var _r11=0;_r11<e.body.body.length;++_r11){this.astGeneric(e.body.body[_r11],t),t.push(\"\\n\");}return this.isRootKernel||t.push(\"}\\n\"),t;}},{key:\"astReturnStatement\",value:function astReturnStatement(e,t){var r=this.returnType||this.getType(e.argument);return this.returnType||(this.returnType=r),this.isRootKernel?(t.push(this.leadingReturnStatement),this.astGeneric(e.argument,t),t.push(\";\\n\"),t.push(this.followingReturnStatement),t.push(\"continue;\\n\")):this.isSubKernel?(t.push(\"subKernelResult_\".concat(this.name,\" = \")),this.astGeneric(e.argument,t),t.push(\";\"),t.push(\"return subKernelResult_\".concat(this.name,\";\"))):(t.push(\"return \"),this.astGeneric(e.argument,t),t.push(\";\")),t;}},{key:\"astLiteral\",value:function astLiteral(e,t){if(isNaN(e.value))throw this.astErrorOutput(\"Non-numeric literal not supported : \"+e.value,e);return t.push(e.value),t;}},{key:\"astBinaryExpression\",value:function astBinaryExpression(e,t){return t.push(\"(\"),this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t.push(\")\"),t;}},{key:\"astIdentifierExpression\",value:function astIdentifierExpression(e,t){if(\"Identifier\"!==e.type)throw this.astErrorOutput(\"IdentifierExpression - not an Identifier\",e);switch(e.name){case\"Infinity\":t.push(\"Infinity\");break;default:this.constants&&this.constants.hasOwnProperty(e.name)?t.push(\"constants_\"+e.name):t.push(\"user_\"+e.name);}return t;}},{key:\"astForStatement\",value:function astForStatement(e,t){if(\"ForStatement\"!==e.type)throw this.astErrorOutput(\"Invalid for statement\",e);var r=[],n=[],i=[],s=[];var a=null;if(e.init){this.pushState(\"in-for-loop-init\"),this.astGeneric(e.init,r);for(var _e11=0;_e11<r.length;_e11++){r[_e11].includes&&r[_e11].includes(\",\")&&(a=!1);}this.popState(\"in-for-loop-init\");}else a=!1;if(e.test?this.astGeneric(e.test,n):a=!1,e.update?this.astGeneric(e.update,i):a=!1,e.body&&(this.pushState(\"loop-body\"),this.astGeneric(e.body,s),this.popState(\"loop-body\")),null===a&&(a=this.isSafe(e.init)&&this.isSafe(e.test)),a)t.push(\"for (\".concat(r.join(\"\"),\";\").concat(n.join(\"\"),\";\").concat(i.join(\"\"),\"){\\n\")),t.push(s.join(\"\")),t.push(\"}\\n\");else{var _e12=this.getInternalVariableName(\"safeI\");r.length>0&&t.push(r.join(\"\"),\";\\n\"),t.push(\"for (let \".concat(_e12,\"=0;\").concat(_e12,\"<LOOP_MAX;\").concat(_e12,\"++){\\n\")),n.length>0&&t.push(\"if (!\".concat(n.join(\"\"),\") break;\\n\")),t.push(s.join(\"\")),t.push(\"\\n\".concat(i.join(\"\"),\";\")),t.push(\"}\\n\");}return t;}},{key:\"astWhileStatement\",value:function astWhileStatement(e,t){if(\"WhileStatement\"!==e.type)throw this.astErrorOutput(\"Invalid while statement\",e);return t.push(\"for (let i = 0; i < LOOP_MAX; i++) {\"),t.push(\"if (\"),this.astGeneric(e.test,t),t.push(\") {\\n\"),this.astGeneric(e.body,t),t.push(\"} else {\\n\"),t.push(\"break;\\n\"),t.push(\"}\\n\"),t.push(\"}\\n\"),t;}},{key:\"astDoWhileStatement\",value:function astDoWhileStatement(e,t){if(\"DoWhileStatement\"!==e.type)throw this.astErrorOutput(\"Invalid while statement\",e);return t.push(\"for (let i = 0; i < LOOP_MAX; i++) {\"),this.astGeneric(e.body,t),t.push(\"if (!\"),this.astGeneric(e.test,t),t.push(\") {\\n\"),t.push(\"break;\\n\"),t.push(\"}\\n\"),t.push(\"}\\n\"),t;}},{key:\"astAssignmentExpression\",value:function astAssignmentExpression(e,t){var r=this.getDeclaration(e.left);if(r&&!r.assignable)throw this.astErrorOutput(\"Variable \".concat(e.left.name,\" is not assignable here\"),e);return this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t;}},{key:\"astBlockStatement\",value:function astBlockStatement(e,t){if(this.isState(\"loop-body\")){this.pushState(\"block-body\");for(var _r12=0;_r12<e.body.length;_r12++){this.astGeneric(e.body[_r12],t);}this.popState(\"block-body\");}else{t.push(\"{\\n\");for(var _r13=0;_r13<e.body.length;_r13++){this.astGeneric(e.body[_r13],t);}t.push(\"}\\n\");}return t;}},{key:\"astVariableDeclaration\",value:function astVariableDeclaration(e,t){t.push(\"\".concat(e.kind,\" \"));var r=e.declarations;for(var _e13=0;_e13<r.length;_e13++){_e13>0&&t.push(\",\");var _n15=r[_e13],i=this.getDeclaration(_n15.id);i.valueType||(i.valueType=this.getType(_n15.init)),this.astGeneric(_n15,t);}return this.isState(\"in-for-loop-init\")||t.push(\";\"),t;}},{key:\"astIfStatement\",value:function astIfStatement(e,t){return t.push(\"if (\"),this.astGeneric(e.test,t),t.push(\")\"),\"BlockStatement\"===e.consequent.type?this.astGeneric(e.consequent,t):(t.push(\" {\\n\"),this.astGeneric(e.consequent,t),t.push(\"\\n}\\n\")),e.alternate&&(t.push(\"else \"),\"BlockStatement\"===e.alternate.type||\"IfStatement\"===e.alternate.type?this.astGeneric(e.alternate,t):(t.push(\" {\\n\"),this.astGeneric(e.alternate,t),t.push(\"\\n}\\n\"))),t;}},{key:\"astSwitchStatement\",value:function astSwitchStatement(e,t){var r=e.discriminant,n=e.cases;t.push(\"switch (\"),this.astGeneric(r,t),t.push(\") {\\n\");for(var _e14=0;_e14<n.length;_e14++){null!==n[_e14].test?(t.push(\"case \"),this.astGeneric(n[_e14].test,t),t.push(\":\\n\"),n[_e14].consequent&&n[_e14].consequent.length>0&&(this.astGeneric(n[_e14].consequent,t),t.push(\"break;\\n\"))):(t.push(\"default:\\n\"),this.astGeneric(n[_e14].consequent,t),n[_e14].consequent&&n[_e14].consequent.length>0&&t.push(\"break;\\n\"));}t.push(\"\\n}\");}},{key:\"astThisExpression\",value:function astThisExpression(e,t){return t.push(\"_this\"),t;}},{key:\"astMemberExpression\",value:function astMemberExpression(e,t){var _this$getMemberExpres=this.getMemberExpressionDetails(e),r=_this$getMemberExpres.signature,n=_this$getMemberExpres.type,i=_this$getMemberExpres.property,s=_this$getMemberExpres.xProperty,a=_this$getMemberExpres.yProperty,o=_this$getMemberExpres.zProperty,u=_this$getMemberExpres.name,l=_this$getMemberExpres.origin;switch(r){case\"this.thread.value\":return t.push(\"_this.thread.\".concat(u)),t;case\"this.output.value\":switch(u){case\"x\":t.push(\"outputX\");break;case\"y\":t.push(\"outputY\");break;case\"z\":t.push(\"outputZ\");break;default:throw this.astErrorOutput(\"Unexpected expression\",e);}return t;case\"value\":throw this.astErrorOutput(\"Unexpected expression\",e);case\"value[]\":case\"value[][]\":case\"value[][][]\":case\"value.value\":if(\"Math\"===l)return t.push(Math[u]),t;switch(i){case\"r\":return t.push(\"user_\".concat(u,\"[0]\")),t;case\"g\":return t.push(\"user_\".concat(u,\"[1]\")),t;case\"b\":return t.push(\"user_\".concat(u,\"[2]\")),t;case\"a\":return t.push(\"user_\".concat(u,\"[3]\")),t;}break;case\"this.constants.value\":case\"this.constants.value[]\":case\"this.constants.value[][]\":case\"this.constants.value[][][]\":break;case\"fn()[]\":return this.astGeneric(e.object,t),t.push(\"[\"),this.astGeneric(e.property,t),t.push(\"]\"),t;case\"fn()[][]\":return this.astGeneric(e.object.object,t),t.push(\"[\"),this.astGeneric(e.object.property,t),t.push(\"]\"),t.push(\"[\"),this.astGeneric(e.property,t),t.push(\"]\"),t;default:throw this.astErrorOutput(\"Unexpected expression\",e);}if(!e.computed)switch(n){case\"Number\":case\"Integer\":case\"Float\":case\"Boolean\":return t.push(\"\".concat(l,\"_\").concat(u)),t;}var h=\"\".concat(l,\"_\").concat(u);switch(n){case\"Array(2)\":case\"Array(3)\":case\"Array(4)\":case\"Matrix(2)\":case\"Matrix(3)\":case\"Matrix(4)\":case\"HTMLImageArray\":case\"ArrayTexture(1)\":case\"ArrayTexture(2)\":case\"ArrayTexture(3)\":case\"ArrayTexture(4)\":case\"HTMLImage\":default:var _e15,_r14;if(\"constants\"===l){var _t11=this.constants[u];_e15=(_r14=\"Input\"===this.constantTypes[u])?_t11.size:null;}else _e15=(_r14=this.isInput(u))?this.argumentSizes[this.argumentNames.indexOf(u)]:null;t.push(\"\".concat(h)),o&&a?_r14?(t.push(\"[(\"),this.astGeneric(o,t),t.push(\"*\".concat(this.dynamicArguments?\"(outputY * outputX)\":_e15[1]*_e15[0],\")+(\")),this.astGeneric(a,t),t.push(\"*\".concat(this.dynamicArguments?\"outputX\":_e15[0],\")+\")),this.astGeneric(s,t),t.push(\"]\")):(t.push(\"[\"),this.astGeneric(o,t),t.push(\"]\"),t.push(\"[\"),this.astGeneric(a,t),t.push(\"]\"),t.push(\"[\"),this.astGeneric(s,t),t.push(\"]\")):a?_r14?(t.push(\"[(\"),this.astGeneric(a,t),t.push(\"*\".concat(this.dynamicArguments?\"outputX\":_e15[0],\")+\")),this.astGeneric(s,t),t.push(\"]\")):(t.push(\"[\"),this.astGeneric(a,t),t.push(\"]\"),t.push(\"[\"),this.astGeneric(s,t),t.push(\"]\")):void 0!==s&&(t.push(\"[\"),this.astGeneric(s,t),t.push(\"]\"));}return t;}},{key:\"astCallExpression\",value:function astCallExpression(e,t){if(\"CallExpression\"!==e.type)throw this.astErrorOutput(\"Unknown CallExpression\",e);var r=this.astMemberExpressionUnroll(e.callee);this.calledFunctions.indexOf(r)<0&&this.calledFunctions.push(r),this.isAstMathFunction(e),this.onFunctionCall&&this.onFunctionCall(this.name,r,e.arguments),t.push(r),t.push(\"(\");var n=this.lookupFunctionArgumentTypes(r)||[];for(var i=0;i<e.arguments.length;++i){var s=e.arguments[i];var a=this.getType(s);n[i]||this.triggerImplyArgumentType(r,i,a,this),i>0&&t.push(\", \"),this.astGeneric(s,t);}return t.push(\")\"),t;}},{key:\"astArrayExpression\",value:function astArrayExpression(e,t){var r=this.getType(e),n=e.elements.length,i=[];for(var _t12=0;_t12<n;++_t12){var _r15=[];this.astGeneric(e.elements[_t12],_r15),i.push(_r15.join(\"\"));}switch(r){case\"Matrix(2)\":case\"Matrix(3)\":case\"Matrix(4)\":t.push(\"[\".concat(i.join(\", \"),\"]\"));break;default:t.push(\"new Float32Array([\".concat(i.join(\", \"),\"])\"));}return t;}},{key:\"astDebuggerStatement\",value:function astDebuggerStatement(e,t){return t.push(\"debugger;\"),t;}}]);return CPUFunctionNode;}(n)};},{\"../function-node\":10}],7:[function(e,t,r){var _e16=e(\"../../utils\"),n=_e16.utils;t.exports={cpuKernelString:function cpuKernelString(e,t){var r=[],i=[],s=[],a=!/^function/.test(e.color.toString());if(r.push(\"  const { context, canvas, constants: incomingConstants } = settings;\",\"  const output = new Int32Array(\".concat(JSON.stringify(Array.from(e.output)),\");\"),\"  const _constantTypes = \".concat(JSON.stringify(e.constantTypes),\";\"),\"  const _constants = \".concat(function(e,t){var r=[];for(var _n16 in t){if(!t.hasOwnProperty(_n16))continue;var _i3=t[_n16],_s2=e[_n16];switch(_i3){case\"Number\":case\"Integer\":case\"Float\":case\"Boolean\":r.push(\"\".concat(_n16,\":\").concat(_s2));break;case\"Array(2)\":case\"Array(3)\":case\"Array(4)\":case\"Matrix(2)\":case\"Matrix(3)\":case\"Matrix(4)\":r.push(\"\".concat(_n16,\":new \").concat(_s2.constructor.name,\"(\").concat(JSON.stringify(Array.from(_s2)),\")\"));}}return\"{ \".concat(r.join(),\" }\");}(e.constants,e.constantTypes),\";\")),i.push(\"    constants: _constants,\",\"    context,\",\"    output,\",\"    thread: {x: 0, y: 0, z: 0},\"),e.graphical){r.push(\"  const _imageData = context.createImageData(\".concat(e.output[0],\", \").concat(e.output[1],\");\")),r.push(\"  const _colorData = new Uint8ClampedArray(\".concat(e.output[0],\" * \").concat(e.output[1],\" * 4);\"));var _t13=n.flattenFunctionToString((a?\"function \":\"\")+e.color.toString(),{thisLookup:function thisLookup(t){switch(t){case\"_colorData\":return\"_colorData\";case\"_imageData\":return\"_imageData\";case\"output\":return\"output\";case\"thread\":return\"this.thread\";}return JSON.stringify(e[t]);},findDependency:function findDependency(e,t){return null;}}),_o=n.flattenFunctionToString((a?\"function \":\"\")+e.getPixels.toString(),{thisLookup:function thisLookup(t){switch(t){case\"_colorData\":return\"_colorData\";case\"_imageData\":return\"_imageData\";case\"output\":return\"output\";case\"thread\":return\"this.thread\";}return JSON.stringify(e[t]);},findDependency:function findDependency(){return null;}});i.push(\"    _imageData,\",\"    _colorData,\",\"    color: \".concat(_t13,\",\")),s.push(\"  kernel.getPixels = \".concat(_o,\";\"));}var o=[],u=Object.keys(e.constantTypes);for(var _t14=0;_t14<u.length;_t14++){o.push(e.constantTypes[u]);}if(-1!==e.argumentTypes.indexOf(\"HTMLImageArray\")||-1!==o.indexOf(\"HTMLImageArray\")){var _t15=n.flattenFunctionToString((a?\"function \":\"\")+e._imageTo3DArray.toString(),{doNotDefine:[\"canvas\"],findDependency:function findDependency(t,r){return\"this\"===t?(a?\"function \":\"\")+e[r].toString():null;},thisLookup:function thisLookup(e){switch(e){case\"canvas\":return;case\"context\":return\"context\";}}});s.push(_t15),i.push(\"    _mediaTo2DArray,\"),i.push(\"    _imageTo3DArray,\");}else if(-1!==e.argumentTypes.indexOf(\"HTMLImage\")||-1!==o.indexOf(\"HTMLImage\")){var _t16=n.flattenFunctionToString((a?\"function \":\"\")+e._mediaTo2DArray.toString(),{findDependency:function findDependency(e,t){return null;},thisLookup:function thisLookup(e){switch(e){case\"canvas\":return\"settings.canvas\";case\"context\":return\"settings.context\";}throw new Error(\"unhandled thisLookup\");}});s.push(_t16),i.push(\"    _mediaTo2DArray,\");}return\"function(settings) {\\n\".concat(r.join(\"\\n\"),\"\\n  for (const p in _constantTypes) {\\n    if (!_constantTypes.hasOwnProperty(p)) continue;\\n    const type = _constantTypes[p];\\n    switch (type) {\\n      case 'Number':\\n      case 'Integer':\\n      case 'Float':\\n      case 'Boolean':\\n      case 'Array(2)':\\n      case 'Array(3)':\\n      case 'Array(4)':\\n      case 'Matrix(2)':\\n      case 'Matrix(3)':\\n      case 'Matrix(4)':\\n        if (incomingConstants.hasOwnProperty(p)) {\\n          console.warn('constant ' + p + ' of type ' + type + ' cannot be resigned');\\n        }\\n        continue;\\n    }\\n    if (!incomingConstants.hasOwnProperty(p)) {\\n      throw new Error('constant ' + p + ' not found');\\n    }\\n    _constants[p] = incomingConstants[p];\\n  }\\n  const kernel = (function() {\\n\").concat(e._kernelString,\"\\n  })\\n    .apply({ \").concat(i.join(\"\\n\"),\" });\\n  \").concat(s.join(\"\\n\"),\"\\n  return kernel;\\n}\");}};},{\"../../utils\":114}],8:[function(e,t,r){var _e17=e(\"../kernel\"),n=_e17.Kernel,_e18=e(\"../function-builder\"),i=_e18.FunctionBuilder,_e19=e(\"./function-node\"),s=_e19.CPUFunctionNode,_e20=e(\"../../utils\"),a=_e20.utils,_e21=e(\"./kernel-string\"),o=_e21.cpuKernelString;t.exports={CPUKernel:/*#__PURE__*/function(_n17){_inherits(CPUKernel,_n17);var _super2=_createSuper(CPUKernel);function CPUKernel(e,t){var _this;_classCallCheck(this,CPUKernel);_this=_super2.call(this,e,t),_this.mergeSettings(e.settings||t),_this._imageData=null,_this._colorData=null,_this._kernelString=null,_this._prependedString=[],_this.thread={x:0,y:0,z:0},_this.translatedSources=null;return _this;}_createClass(CPUKernel,[{key:\"initCanvas\",value:function initCanvas(){return\"undefined\"!=typeof document?document.createElement(\"canvas\"):\"undefined\"!=typeof OffscreenCanvas?new OffscreenCanvas(0,0):void 0;}},{key:\"initContext\",value:function initContext(){return this.canvas?this.canvas.getContext(\"2d\"):null;}},{key:\"initPlugins\",value:function initPlugins(e){return[];}},{key:\"validateSettings\",value:function validateSettings(e){if(!this.output||0===this.output.length){if(1!==e.length)throw new Error(\"Auto output only supported for kernels with only one input\");var _t17=a.getVariableType(e[0],this.strictIntegers);if(\"Array\"===_t17)this.output=a.getDimensions(_t17);else{if(\"NumberTexture\"!==_t17&&\"ArrayTexture(4)\"!==_t17)throw new Error(\"Auto output not supported for input type: \"+_t17);this.output=e[0].output;}}if(this.graphical&&2!==this.output.length)throw new Error(\"Output must have 2 dimensions on graphical mode\");this.checkOutput();}},{key:\"translateSource\",value:function translateSource(){if(this.leadingReturnStatement=this.output.length>1?\"resultX[x] = \":\"result[x] = \",this.subKernels){var _e22=[];for(var _t18=0;_t18<this.subKernels.length;_t18++){var _r16=this.subKernels[_t18].name;_e22.push(this.output.length>1?\"resultX_\".concat(_r16,\"[x] = subKernelResult_\").concat(_r16,\";\\n\"):\"result_\".concat(_r16,\"[x] = subKernelResult_\").concat(_r16,\";\\n\"));}this.followingReturnStatement=_e22.join(\"\");}var e=i.fromKernel(this,s);this.translatedSources=e.getPrototypes(\"kernel\"),this.graphical||this.returnType||(this.returnType=e.getKernelResultType());}},{key:\"build\",value:function build(){if(this.built)return;if(this.setupConstants(),this.setupArguments(arguments),this.validateSettings(arguments),this.translateSource(),this.graphical){var _e23=this.canvas,_t19=this.output;if(!_e23)throw new Error(\"no canvas available for using graphical output\");var _r17=_t19[0],_n18=_t19[1]||1;_e23.width=_r17,_e23.height=_n18,this._imageData=this.context.createImageData(_r17,_n18),this._colorData=new Uint8ClampedArray(_r17*_n18*4);}var e=this.getKernelString();this.kernelString=e,this.debug&&(console.log(\"Function output:\"),console.log(e));try{this.run=new Function([],e).bind(this)();}catch(e){console.error(\"An error occurred compiling the javascript: \",e);}this.buildSignature(arguments),this.built=!0;}},{key:\"color\",value:function color(e,t,r,n){void 0===n&&(n=1),e=Math.floor(255*e),t=Math.floor(255*t),r=Math.floor(255*r),n=Math.floor(255*n);var i=this.output[0],s=this.output[1],a=this.thread.x+(s-this.thread.y-1)*i;this._colorData[4*a+0]=e,this._colorData[4*a+1]=t,this._colorData[4*a+2]=r,this._colorData[4*a+3]=n;}},{key:\"getKernelString\",value:function getKernelString(){if(null!==this._kernelString)return this._kernelString;var e=null,t=this.translatedSources;return t.length>1?t=t.filter(function(t){return /^function/.test(t)?t:(e=t,!1);}):e=t.shift(),this._kernelString=\"  const LOOP_MAX = \".concat(this._getLoopMaxString(),\";\\n  \").concat(this.injectedNative||\"\",\"\\n  const _this = this;\\n  \").concat(this._resultKernelHeader(),\"\\n  \").concat(this._processConstants(),\"\\n  return (\").concat(this.argumentNames.map(function(e){return\"user_\"+e;}).join(\", \"),\") => {\\n    \").concat(this._prependedString.join(\"\"),\"\\n    \").concat(this._earlyThrows(),\"\\n    \").concat(this._processArguments(),\"\\n    \").concat(this.graphical?this._graphicalKernelBody(e):this._resultKernelBody(e),\"\\n    \").concat(t.length>0?t.join(\"\\n\"):\"\",\"\\n  };\");}},{key:\"toString\",value:function toString(){return o(this);}},{key:\"_getLoopMaxString\",value:function _getLoopMaxString(){return this.loopMaxIterations?\" \".concat(parseInt(this.loopMaxIterations),\";\"):\" 1000;\";}},{key:\"_processConstants\",value:function _processConstants(){if(!this.constants)return\"\";var e=[];for(var _t20 in this.constants){switch(this.constantTypes[_t20]){case\"HTMLCanvas\":case\"OffscreenCanvas\":case\"HTMLImage\":case\"ImageBitmap\":case\"ImageData\":case\"HTMLVideo\":e.push(\"    const constants_\".concat(_t20,\" = this._mediaTo2DArray(this.constants.\").concat(_t20,\");\\n\"));break;case\"HTMLImageArray\":e.push(\"    const constants_\".concat(_t20,\" = this._imageTo3DArray(this.constants.\").concat(_t20,\");\\n\"));break;case\"Input\":e.push(\"    const constants_\".concat(_t20,\" = this.constants.\").concat(_t20,\".value;\\n\"));break;default:e.push(\"    const constants_\".concat(_t20,\" = this.constants.\").concat(_t20,\";\\n\"));}}return e.join(\"\");}},{key:\"_earlyThrows\",value:function _earlyThrows(){var _this2=this;if(this.graphical)return\"\";if(this.immutable)return\"\";if(!this.pipeline)return\"\";var e=[];for(var _t21=0;_t21<this.argumentTypes.length;_t21++){\"Array\"===this.argumentTypes[_t21]&&e.push(this.argumentNames[_t21]);}if(0===e.length)return\"\";var t=[];var _loop=function _loop(_r18){var n=e[_r18],i=_this2._mapSubKernels(function(e){return\"user_\".concat(n,\" === result_\").concat(e.name);}).join(\" || \");t.push(\"user_\".concat(n,\" === result\").concat(i?\" || \".concat(i):\"\"));};for(var _r18=0;_r18<e.length;_r18++){_loop(_r18);}return\"if (\".concat(t.join(\" || \"),\") throw new Error('Source and destination arrays are the same.  Use immutable = true');\");}},{key:\"_processArguments\",value:function _processArguments(){var e=[];for(var _t22=0;_t22<this.argumentTypes.length;_t22++){var _r19=\"user_\".concat(this.argumentNames[_t22]);switch(this.argumentTypes[_t22]){case\"HTMLCanvas\":case\"OffscreenCanvas\":case\"HTMLImage\":case\"ImageBitmap\":case\"ImageData\":case\"HTMLVideo\":e.push(\"    \".concat(_r19,\" = this._mediaTo2DArray(\").concat(_r19,\");\\n\"));break;case\"HTMLImageArray\":e.push(\"    \".concat(_r19,\" = this._imageTo3DArray(\").concat(_r19,\");\\n\"));break;case\"Input\":e.push(\"    \".concat(_r19,\" = \").concat(_r19,\".value;\\n\"));break;case\"ArrayTexture(1)\":case\"ArrayTexture(2)\":case\"ArrayTexture(3)\":case\"ArrayTexture(4)\":case\"NumberTexture\":case\"MemoryOptimizedNumberTexture\":e.push(\"\\n    if (\".concat(_r19,\".toArray) {\\n      if (!_this.textureCache) {\\n        _this.textureCache = [];\\n        _this.arrayCache = [];\\n      }\\n      const textureIndex = _this.textureCache.indexOf(\").concat(_r19,\");\\n      if (textureIndex !== -1) {\\n        \").concat(_r19,\" = _this.arrayCache[textureIndex];\\n      } else {\\n        _this.textureCache.push(\").concat(_r19,\");\\n        \").concat(_r19,\" = \").concat(_r19,\".toArray();\\n        _this.arrayCache.push(\").concat(_r19,\");\\n      }\\n    }\"));}}return e.join(\"\");}},{key:\"_mediaTo2DArray\",value:function _mediaTo2DArray(e){var t=this.canvas,r=e.width>0?e.width:e.videoWidth,n=e.height>0?e.height:e.videoHeight;t.width<r&&(t.width=r),t.height<n&&(t.height=n);var i=this.context;var s;e.constructor===ImageData?s=e.data:(i.drawImage(e,0,0,r,n),s=i.getImageData(0,0,r,n).data);var a=new Array(n);var o=0;for(var _e24=n-1;_e24>=0;_e24--){var _t23=a[_e24]=new Array(r);for(var _e25=0;_e25<r;_e25++){var _r20=new Float32Array(4);_r20[0]=s[o++]/255,_r20[1]=s[o++]/255,_r20[2]=s[o++]/255,_r20[3]=s[o++]/255,_t23[_e25]=_r20;}}return a;}},{key:\"getPixels\",value:function getPixels(e){var _this$output=_slicedToArray(this.output,2),t=_this$output[0],r=_this$output[1];return e?a.flipPixels(this._imageData.data,t,r):this._imageData.data.slice(0);}},{key:\"_imageTo3DArray\",value:function _imageTo3DArray(e){var t=new Array(e.length);for(var _r21=0;_r21<e.length;_r21++){t[_r21]=this._mediaTo2DArray(e[_r21]);}return t;}},{key:\"_resultKernelHeader\",value:function _resultKernelHeader(){if(this.graphical)return\"\";if(this.immutable)return\"\";if(!this.pipeline)return\"\";switch(this.output.length){case 1:return this._mutableKernel1DResults();case 2:return this._mutableKernel2DResults();case 3:return this._mutableKernel3DResults();}}},{key:\"_resultKernelBody\",value:function _resultKernelBody(e){switch(this.output.length){case 1:return(!this.immutable&&this.pipeline?this._resultMutableKernel1DLoop(e):this._resultImmutableKernel1DLoop(e))+this._kernelOutput();case 2:return(!this.immutable&&this.pipeline?this._resultMutableKernel2DLoop(e):this._resultImmutableKernel2DLoop(e))+this._kernelOutput();case 3:return(!this.immutable&&this.pipeline?this._resultMutableKernel3DLoop(e):this._resultImmutableKernel3DLoop(e))+this._kernelOutput();default:throw new Error(\"unsupported size kernel\");}}},{key:\"_graphicalKernelBody\",value:function _graphicalKernelBody(e){switch(this.output.length){case 2:return this._graphicalKernel2DLoop(e)+this._graphicalOutput();default:throw new Error(\"unsupported size kernel\");}}},{key:\"_graphicalOutput\",value:function _graphicalOutput(){return\"\\n    this._imageData.data.set(this._colorData);\\n    this.context.putImageData(this._imageData, 0, 0);\\n    return;\";}},{key:\"_getKernelResultTypeConstructorString\",value:function _getKernelResultTypeConstructorString(){switch(this.returnType){case\"LiteralInteger\":case\"Number\":case\"Integer\":case\"Float\":return\"Float32Array\";case\"Array(2)\":case\"Array(3)\":case\"Array(4)\":return\"Array\";default:if(this.graphical)return\"Float32Array\";throw new Error(\"unhandled returnType \".concat(this.returnType));}}},{key:\"_resultImmutableKernel1DLoop\",value:function _resultImmutableKernel1DLoop(e){var t=this._getKernelResultTypeConstructorString();return\"  const outputX = _this.output[0];\\n    const result = new \".concat(t,\"(outputX);\\n    \").concat(this._mapSubKernels(function(e){return\"const result_\".concat(e.name,\" = new \").concat(t,\"(outputX);\\n\");}).join(\"    \"),\"\\n    \").concat(this._mapSubKernels(function(e){return\"let subKernelResult_\".concat(e.name,\";\\n\");}).join(\"    \"),\"\\n    for (let x = 0; x < outputX; x++) {\\n      this.thread.x = x;\\n      this.thread.y = 0;\\n      this.thread.z = 0;\\n      \").concat(e,\"\\n    }\");}},{key:\"_mutableKernel1DResults\",value:function _mutableKernel1DResults(){var e=this._getKernelResultTypeConstructorString();return\"  const outputX = _this.output[0];\\n    const result = new \".concat(e,\"(outputX);\\n    \").concat(this._mapSubKernels(function(t){return\"const result_\".concat(t.name,\" = new \").concat(e,\"(outputX);\\n\");}).join(\"    \"),\"\\n    \").concat(this._mapSubKernels(function(e){return\"let subKernelResult_\".concat(e.name,\";\\n\");}).join(\"    \"));}},{key:\"_resultMutableKernel1DLoop\",value:function _resultMutableKernel1DLoop(e){return\"  const outputX = _this.output[0];\\n    for (let x = 0; x < outputX; x++) {\\n      this.thread.x = x;\\n      this.thread.y = 0;\\n      this.thread.z = 0;\\n      \".concat(e,\"\\n    }\");}},{key:\"_resultImmutableKernel2DLoop\",value:function _resultImmutableKernel2DLoop(e){var t=this._getKernelResultTypeConstructorString();return\"  const outputX = _this.output[0];\\n    const outputY = _this.output[1];\\n    const result = new Array(outputY);\\n    \".concat(this._mapSubKernels(function(e){return\"const result_\".concat(e.name,\" = new Array(outputY);\\n\");}).join(\"    \"),\"\\n    \").concat(this._mapSubKernels(function(e){return\"let subKernelResult_\".concat(e.name,\";\\n\");}).join(\"    \"),\"\\n    for (let y = 0; y < outputY; y++) {\\n      this.thread.z = 0;\\n      this.thread.y = y;\\n      const resultX = result[y] = new \").concat(t,\"(outputX);\\n      \").concat(this._mapSubKernels(function(e){return\"const resultX_\".concat(e.name,\" = result_\").concat(e.name,\"[y] = new \").concat(t,\"(outputX);\\n\");}).join(\"\"),\"\\n      for (let x = 0; x < outputX; x++) {\\n        this.thread.x = x;\\n        \").concat(e,\"\\n      }\\n    }\");}},{key:\"_mutableKernel2DResults\",value:function _mutableKernel2DResults(){var e=this._getKernelResultTypeConstructorString();return\"  const outputX = _this.output[0];\\n    const outputY = _this.output[1];\\n    const result = new Array(outputY);\\n    \".concat(this._mapSubKernels(function(e){return\"const result_\".concat(e.name,\" = new Array(outputY);\\n\");}).join(\"    \"),\"\\n    \").concat(this._mapSubKernels(function(e){return\"let subKernelResult_\".concat(e.name,\";\\n\");}).join(\"    \"),\"\\n    for (let y = 0; y < outputY; y++) {\\n      const resultX = result[y] = new \").concat(e,\"(outputX);\\n      \").concat(this._mapSubKernels(function(t){return\"const resultX_\".concat(t.name,\" = result_\").concat(t.name,\"[y] = new \").concat(e,\"(outputX);\\n\");}).join(\"\"),\"\\n    }\");}},{key:\"_resultMutableKernel2DLoop\",value:function _resultMutableKernel2DLoop(e){var t=this._getKernelResultTypeConstructorString();return\"  const outputX = _this.output[0];\\n    const outputY = _this.output[1];\\n    for (let y = 0; y < outputY; y++) {\\n      this.thread.z = 0;\\n      this.thread.y = y;\\n      const resultX = result[y];\\n      \".concat(this._mapSubKernels(function(e){return\"const resultX_\".concat(e.name,\" = result_\").concat(e.name,\"[y] = new \").concat(t,\"(outputX);\\n\");}).join(\"\"),\"\\n      for (let x = 0; x < outputX; x++) {\\n        this.thread.x = x;\\n        \").concat(e,\"\\n      }\\n    }\");}},{key:\"_graphicalKernel2DLoop\",value:function _graphicalKernel2DLoop(e){return\"  const outputX = _this.output[0];\\n    const outputY = _this.output[1];\\n    for (let y = 0; y < outputY; y++) {\\n      this.thread.z = 0;\\n      this.thread.y = y;\\n      for (let x = 0; x < outputX; x++) {\\n        this.thread.x = x;\\n        \".concat(e,\"\\n      }\\n    }\");}},{key:\"_resultImmutableKernel3DLoop\",value:function _resultImmutableKernel3DLoop(e){var t=this._getKernelResultTypeConstructorString();return\"  const outputX = _this.output[0];\\n    const outputY = _this.output[1];\\n    const outputZ = _this.output[2];\\n    const result = new Array(outputZ);\\n    \".concat(this._mapSubKernels(function(e){return\"const result_\".concat(e.name,\" = new Array(outputZ);\\n\");}).join(\"    \"),\"\\n    \").concat(this._mapSubKernels(function(e){return\"let subKernelResult_\".concat(e.name,\";\\n\");}).join(\"    \"),\"\\n    for (let z = 0; z < outputZ; z++) {\\n      this.thread.z = z;\\n      const resultY = result[z] = new Array(outputY);\\n      \").concat(this._mapSubKernels(function(e){return\"const resultY_\".concat(e.name,\" = result_\").concat(e.name,\"[z] = new Array(outputY);\\n\");}).join(\"      \"),\"\\n      for (let y = 0; y < outputY; y++) {\\n        this.thread.y = y;\\n        const resultX = resultY[y] = new \").concat(t,\"(outputX);\\n        \").concat(this._mapSubKernels(function(e){return\"const resultX_\".concat(e.name,\" = resultY_\").concat(e.name,\"[y] = new \").concat(t,\"(outputX);\\n\");}).join(\"        \"),\"\\n        for (let x = 0; x < outputX; x++) {\\n          this.thread.x = x;\\n          \").concat(e,\"\\n        }\\n      }\\n    }\");}},{key:\"_mutableKernel3DResults\",value:function _mutableKernel3DResults(){var e=this._getKernelResultTypeConstructorString();return\"  const outputX = _this.output[0];\\n    const outputY = _this.output[1];\\n    const outputZ = _this.output[2];\\n    const result = new Array(outputZ);\\n    \".concat(this._mapSubKernels(function(e){return\"const result_\".concat(e.name,\" = new Array(outputZ);\\n\");}).join(\"    \"),\"\\n    \").concat(this._mapSubKernels(function(e){return\"let subKernelResult_\".concat(e.name,\";\\n\");}).join(\"    \"),\"\\n    for (let z = 0; z < outputZ; z++) {\\n      const resultY = result[z] = new Array(outputY);\\n      \").concat(this._mapSubKernels(function(e){return\"const resultY_\".concat(e.name,\" = result_\").concat(e.name,\"[z] = new Array(outputY);\\n\");}).join(\"      \"),\"\\n      for (let y = 0; y < outputY; y++) {\\n        const resultX = resultY[y] = new \").concat(e,\"(outputX);\\n        \").concat(this._mapSubKernels(function(t){return\"const resultX_\".concat(t.name,\" = resultY_\").concat(t.name,\"[y] = new \").concat(e,\"(outputX);\\n\");}).join(\"        \"),\"\\n      }\\n    }\");}},{key:\"_resultMutableKernel3DLoop\",value:function _resultMutableKernel3DLoop(e){return\"  const outputX = _this.output[0];\\n    const outputY = _this.output[1];\\n    const outputZ = _this.output[2];\\n    for (let z = 0; z < outputZ; z++) {\\n      this.thread.z = z;\\n      const resultY = result[z];\\n      for (let y = 0; y < outputY; y++) {\\n        this.thread.y = y;\\n        const resultX = resultY[y];\\n        for (let x = 0; x < outputX; x++) {\\n          this.thread.x = x;\\n          \".concat(e,\"\\n        }\\n      }\\n    }\");}},{key:\"_kernelOutput\",value:function _kernelOutput(){return this.subKernels?\"\\n    return {\\n      result: result,\\n      \".concat(this.subKernels.map(function(e){return\"\".concat(e.property,\": result_\").concat(e.name);}).join(\",\\n      \"),\"\\n    };\"):\"\\n    return result;\";}},{key:\"_mapSubKernels\",value:function _mapSubKernels(e){return null===this.subKernels?[\"\"]:this.subKernels.map(e);}},{key:\"destroy\",value:function destroy(e){e&&delete this.canvas;}},{key:\"toJSON\",value:function toJSON(){var e=_get(_getPrototypeOf(CPUKernel.prototype),\"toJSON\",this).call(this);return e.functionNodes=i.fromKernel(this,s).toJSON(),e;}},{key:\"setOutput\",value:function setOutput(e){_get(_getPrototypeOf(CPUKernel.prototype),\"setOutput\",this).call(this,e);var _this$output2=_slicedToArray(this.output,2),t=_this$output2[0],r=_this$output2[1];this.graphical&&(this._imageData=this.context.createImageData(t,r),this._colorData=new Uint8ClampedArray(t*r*4));}},{key:\"prependString\",value:function prependString(e){if(this._kernelString)throw new Error(\"Kernel already built\");this._prependedString.push(e);}},{key:\"hasPrependString\",value:function hasPrependString(e){return this._prependedString.indexOf(e)>-1;}}],[{key:\"getFeatures\",value:function getFeatures(){return this.features;}},{key:\"features\",get:function get(){return Object.freeze({kernelMap:!0,isIntegerDivisionAccurate:!0});}},{key:\"isSupported\",get:function get(){return!0;}},{key:\"isContextMatch\",value:function isContextMatch(e){return!1;}},{key:\"mode\",get:function get(){return\"cpu\";}},{key:\"nativeFunctionArguments\",value:function nativeFunctionArguments(){return null;}},{key:\"nativeFunctionReturnType\",value:function nativeFunctionReturnType(){throw new Error(\"Looking up native function return type not supported on \".concat(this.name));}},{key:\"combineKernels\",value:function combineKernels(e){return e;}},{key:\"getSignature\",value:function getSignature(e,t){return\"cpu\"+(t.length>0?\":\"+t.join(\",\"):\"\");}},{key:\"destroyContext\",value:function destroyContext(e){}}]);return CPUKernel;}(n)};},{\"../../utils\":114,\"../function-builder\":9,\"../kernel\":36,\"./function-node\":6,\"./kernel-string\":7}],9:[function(e,t,r){var n=/*#__PURE__*/function(){function n(e){_classCallCheck(this,n);if(e=e||{},this.kernel=e.kernel,this.rootNode=e.rootNode,this.functionNodes=e.functionNodes||[],this.subKernelNodes=e.subKernelNodes||[],this.nativeFunctions=e.nativeFunctions||[],this.functionMap={},this.nativeFunctionNames=[],this.lookupChain=[],this.functionNodeDependencies={},this.functionCalls={},this.rootNode&&(this.functionMap.kernel=this.rootNode),this.functionNodes)for(var _e26=0;_e26<this.functionNodes.length;_e26++){this.functionMap[this.functionNodes[_e26].name]=this.functionNodes[_e26];}if(this.subKernelNodes)for(var _e27=0;_e27<this.subKernelNodes.length;_e27++){this.functionMap[this.subKernelNodes[_e27].name]=this.subKernelNodes[_e27];}if(this.nativeFunctions)for(var _e28=0;_e28<this.nativeFunctions.length;_e28++){var _t24=this.nativeFunctions[_e28];this.nativeFunctionNames.push(_t24.name);}}_createClass(n,[{key:\"addFunctionNode\",value:function addFunctionNode(e){if(!e.name)throw new Error(\"functionNode.name needs set\");this.functionMap[e.name]=e,e.isRootKernel&&(this.rootNode=e);}},{key:\"traceFunctionCalls\",value:function traceFunctionCalls(e,t){if(e=e||\"kernel\",t=t||[],this.nativeFunctionNames.indexOf(e)>-1){var _r22=t.indexOf(e);if(-1===_r22)t.push(e);else{var _e29=t.splice(_r22,1)[0];t.push(_e29);}return t;}var r=this.functionMap[e];if(r){var _n31=t.indexOf(e);if(-1===_n31){t.push(e),r.toString();for(var _e30=0;_e30<r.calledFunctions.length;++_e30){this.traceFunctionCalls(r.calledFunctions[_e30],t);}}else{var _e31=t.splice(_n31,1)[0];t.push(_e31);}}return t;}},{key:\"getPrototypeString\",value:function getPrototypeString(e){return this.getPrototypes(e).join(\"\\n\");}},{key:\"getPrototypes\",value:function getPrototypes(e){return this.rootNode&&this.rootNode.toString(),e?this.getPrototypesFromFunctionNames(this.traceFunctionCalls(e,[]).reverse()):this.getPrototypesFromFunctionNames(Object.keys(this.functionMap));}},{key:\"getStringFromFunctionNames\",value:function getStringFromFunctionNames(e){var t=[];for(var _r23=0;_r23<e.length;++_r23){this.functionMap[e[_r23]]&&t.push(this.functionMap[e[_r23]].toString());}return t.join(\"\\n\");}},{key:\"getPrototypesFromFunctionNames\",value:function getPrototypesFromFunctionNames(e){var t=[];for(var _r24=0;_r24<e.length;++_r24){var _n32=e[_r24],i=this.nativeFunctionNames.indexOf(_n32);if(i>-1){t.push(this.nativeFunctions[i].source);continue;}var s=this.functionMap[_n32];s&&t.push(s.toString());}return t;}},{key:\"toJSON\",value:function toJSON(){var _this3=this;return this.traceFunctionCalls(this.rootNode.name).reverse().map(function(e){var t=_this3.nativeFunctions.indexOf(e);if(t>-1)return{name:e,source:_this3.nativeFunctions[t].source};if(_this3.functionMap[e])return _this3.functionMap[e].toJSON();throw new Error(\"function \".concat(e,\" not found\"));});}},{key:\"fromJSON\",value:function fromJSON(e,t){this.functionMap={};for(var _r25=0;_r25<e.length;_r25++){var _n33=e[_r25];this.functionMap[_n33.settings.name]=new t(_n33.ast,_n33.settings);}return this;}},{key:\"getString\",value:function getString(e){return e?this.getStringFromFunctionNames(this.traceFunctionCalls(e).reverse()):this.getStringFromFunctionNames(Object.keys(this.functionMap));}},{key:\"lookupReturnType\",value:function lookupReturnType(e,t,r){if(\"CallExpression\"!==t.type)throw new Error(\"expected ast type of \\\"CallExpression\\\", but is \".concat(t.type));if(this._isNativeFunction(e))return this._lookupNativeFunctionReturnType(e);if(this._isFunction(e)){var _n34=this._getFunction(e);if(_n34.returnType)return _n34.returnType;{for(var _e33=0;_e33<this.lookupChain.length;_e33++){if(this.lookupChain[_e33].ast===t){if(0===_n34.argumentTypes.length&&t.arguments.length>0){var i=t.arguments;for(var _t25=0;_t25<i.length;_t25++){this.lookupChain.push({name:r.name,ast:i[_e33],requestingNode:r}),_n34.argumentTypes[_t25]=r.getType(i[_t25]),this.lookupChain.pop();}return _n34.returnType=_n34.getType(_n34.getJsAST());}throw new Error(\"circlical logic detected!\");}}this.lookupChain.push({name:r.name,ast:t,requestingNode:r});var _e32=_n34.getType(_n34.getJsAST());return this.lookupChain.pop(),_n34.returnType=_e32;}}return null;}},{key:\"_getFunction\",value:function _getFunction(e){return this._isFunction(e)||new Error(\"Function \".concat(e,\" not found\")),this.functionMap[e];}},{key:\"_isFunction\",value:function _isFunction(e){return Boolean(this.functionMap[e]);}},{key:\"_getNativeFunction\",value:function _getNativeFunction(e){for(var _t26=0;_t26<this.nativeFunctions.length;_t26++){if(this.nativeFunctions[_t26].name===e)return this.nativeFunctions[_t26];}return null;}},{key:\"_isNativeFunction\",value:function _isNativeFunction(e){return Boolean(this._getNativeFunction(e));}},{key:\"_lookupNativeFunctionReturnType\",value:function _lookupNativeFunctionReturnType(e){var t=this._getNativeFunction(e);if(t)return t.returnType;throw new Error(\"Native function \".concat(e,\" not found\"));}},{key:\"lookupFunctionArgumentTypes\",value:function lookupFunctionArgumentTypes(e){return this._isNativeFunction(e)?this._getNativeFunction(e).argumentTypes:this._isFunction(e)?this._getFunction(e).argumentTypes:null;}},{key:\"lookupFunctionArgumentName\",value:function lookupFunctionArgumentName(e,t){return this._getFunction(e).argumentNames[t];}},{key:\"lookupFunctionArgumentBitRatio\",value:function lookupFunctionArgumentBitRatio(e,t){if(!this._isFunction(e))throw new Error(\"function not found\");if(this.rootNode.name===e){var _e34=this.rootNode.argumentNames.indexOf(t);if(-1!==_e34)return this.rootNode.argumentBitRatios[_e34];}var r=this._getFunction(e),_n27=r.argumentNames.indexOf(t);if(-1===_n27)throw new Error(\"argument not found\");var i=r.argumentBitRatios[_n27];if(\"number\"!=typeof i)throw new Error(\"argument bit ratio not found\");return i;}},{key:\"needsArgumentType\",value:function needsArgumentType(e,t){if(!this._isFunction(e))return!1;return!this._getFunction(e).argumentTypes[t];}},{key:\"assignArgumentType\",value:function assignArgumentType(e,t,r,_n28){if(!this._isFunction(e))return;var i=this._getFunction(e);i.argumentTypes[t]||(i.argumentTypes[t]=r);}},{key:\"assignArgumentBitRatio\",value:function assignArgumentBitRatio(e,t,r,_n29){var i=this._getFunction(e);if(this._isNativeFunction(r))return null;var s=this._getFunction(r),a=i.argumentNames.indexOf(t);if(-1===a)throw new Error(\"Argument \".concat(t,\" not found in arguments from function \").concat(e));var o=i.argumentBitRatios[a];if(\"number\"!=typeof o)throw new Error(\"Bit ratio for argument \".concat(t,\" not found in function \").concat(e));s.argumentBitRatios||(s.argumentBitRatios=new Array(s.argumentNames.length));var u=s.argumentBitRatios[a];if(\"number\"==typeof u){if(u!==o)throw new Error(\"Incompatible bit ratio found at function \".concat(e,\" at argument \").concat(t));return u;}return s.argumentBitRatios[a]=o,o;}},{key:\"trackFunctionCall\",value:function trackFunctionCall(e,t,r){this.functionNodeDependencies[e]||(this.functionNodeDependencies[e]=new Set(),this.functionCalls[e]=[]),this.functionNodeDependencies[e].add(t),this.functionCalls[e].push(r);}},{key:\"getKernelResultType\",value:function getKernelResultType(){return this.rootNode.returnType||this.rootNode.getType(this.rootNode.ast);}},{key:\"getSubKernelResultType\",value:function getSubKernelResultType(e){var t=this.subKernelNodes[e];var r=!1;for(var _e35=0;_e35<this.rootNode.functionCalls.length;_e35++){this.rootNode.functionCalls[_e35].ast.callee.name===t.name&&(r=!0);}if(!r)throw new Error(\"SubKernel \".concat(t.name,\" never called by kernel\"));return t.returnType||t.getType(t.getJsAST());}},{key:\"getReturnTypes\",value:function getReturnTypes(){var e=_defineProperty({},this.rootNode.name,this.rootNode.getType(this.rootNode.ast)),t=this.traceFunctionCalls(this.rootNode.name);for(var _r26=0;_r26<t.length;_r26++){var _n35=t[_r26],i=this.functionMap[_n35];e[_n35]=i.getType(i.ast);}return e;}}],[{key:\"fromKernel\",value:function fromKernel(e,t,r){var i=e.kernelArguments,s=e.kernelConstants,a=e.argumentNames,o=e.argumentSizes,u=e.argumentBitRatios,l=e.constants,h=e.constantBitRatios,c=e.debug,p=e.loopMaxIterations,d=e.nativeFunctions,m=e.output,f=e.optimizeFloatMemory,g=e.precision,x=e.plugins,y=e.source,b=e.subKernels,T=e.functions,v=e.leadingReturnStatement,S=e.followingReturnStatement,A=e.dynamicArguments,_=e.dynamicOutput,E=new Array(i.length),w={};for(var _e37=0;_e37<i.length;_e37++){E[_e37]=i[_e37].type;}for(var _e38=0;_e38<s.length;_e38++){var _t27=s[_e38];w[_t27.name]=_t27.type;}var k=function k(e,t){return G.needsArgumentType(e,t);},I=function I(e,t,r){G.assignArgumentType(e,t,r);},D=function D(e,t,r){return G.lookupReturnType(e,t,r);},C=function C(e){return G.lookupFunctionArgumentTypes(e);},$=function $(e,t){return G.lookupFunctionArgumentName(e,t);},L=function L(e,t){return G.lookupFunctionArgumentBitRatio(e,t);},R=function R(e,t,r,_n19){G.assignArgumentType(e,t,r,_n19);},F=function F(e,t,r,_n20){G.assignArgumentBitRatio(e,t,r,_n20);},N=function N(e,t,r){G.trackFunctionCall(e,t,r);},V=function V(e,r){var _n21=[];for(var _t28=0;_t28<e.params.length;_t28++){_n21.push(e.params[_t28].name);}var i=new t(r,Object.assign({},M,{returnType:null,ast:e,name:e.id.name,argumentNames:_n21,lookupReturnType:D,lookupFunctionArgumentTypes:C,lookupFunctionArgumentName:$,lookupFunctionArgumentBitRatio:L,needsArgumentType:k,assignArgumentType:I,triggerImplyArgumentType:R,triggerImplyArgumentBitRatio:F,onFunctionCall:N}));i.traceFunctionAST(e),G.addFunctionNode(i);},M=Object.assign({isRootKernel:!1,onNestedFunction:V,lookupReturnType:D,lookupFunctionArgumentTypes:C,lookupFunctionArgumentName:$,lookupFunctionArgumentBitRatio:L,needsArgumentType:k,assignArgumentType:I,triggerImplyArgumentType:R,triggerImplyArgumentBitRatio:F,onFunctionCall:N,optimizeFloatMemory:f,precision:g,constants:l,constantTypes:w,constantBitRatios:h,debug:c,loopMaxIterations:p,output:m,plugins:x,dynamicArguments:A,dynamicOutput:_},r||{}),O=Object.assign({},M,{isRootKernel:!0,name:\"kernel\",argumentNames:a,argumentTypes:E,argumentSizes:o,argumentBitRatios:u,leadingReturnStatement:v,followingReturnStatement:S});if(\"object\"==_typeof(y)&&y.functionNodes)return new n().fromJSON(y.functionNodes,t);var z=new t(y,O);var P=null;T&&(P=T.map(function(e){return new t(e.source,{returnType:e.returnType,argumentTypes:e.argumentTypes,output:m,plugins:x,constants:l,constantTypes:w,constantBitRatios:h,optimizeFloatMemory:f,precision:g,lookupReturnType:D,lookupFunctionArgumentTypes:C,lookupFunctionArgumentName:$,lookupFunctionArgumentBitRatio:L,needsArgumentType:k,assignArgumentType:I,triggerImplyArgumentType:R,triggerImplyArgumentBitRatio:F,onFunctionCall:N,onNestedFunction:V});}));var K=null;b&&(K=b.map(function(e){var r=e.name,_n22=e.source;return new t(_n22,Object.assign({},M,{name:r,isSubKernel:!0,isRootKernel:!1}));}));var G=new n({kernel:e,rootNode:z,functionNodes:P,nativeFunctions:d,subKernelNodes:K});return G;}}]);return n;}();t.exports={FunctionBuilder:n};},{}],10:[function(e,t,r){var n=e(\"acorn\"),_e39=e(\"../utils\"),i=_e39.utils,_e40=e(\"./function-tracer\"),s=_e40.FunctionTracer;var a={Number:\"Number\",Float:\"Float\",Integer:\"Integer\",Array:\"Number\",\"Array(2)\":\"Number\",\"Array(3)\":\"Number\",\"Array(4)\":\"Number\",\"Matrix(2)\":\"Number\",\"Matrix(3)\":\"Number\",\"Matrix(4)\":\"Number\",Array2D:\"Number\",Array3D:\"Number\",Input:\"Number\",HTMLCanvas:\"Array(4)\",OffscreenCanvas:\"Array(4)\",HTMLImage:\"Array(4)\",ImageBitmap:\"Array(4)\",ImageData:\"Array(4)\",HTMLVideo:\"Array(4)\",HTMLImageArray:\"Array(4)\",NumberTexture:\"Number\",MemoryOptimizedNumberTexture:\"Number\",\"Array1D(2)\":\"Array(2)\",\"Array1D(3)\":\"Array(3)\",\"Array1D(4)\":\"Array(4)\",\"Array2D(2)\":\"Array(2)\",\"Array2D(3)\":\"Array(3)\",\"Array2D(4)\":\"Array(4)\",\"Array3D(2)\":\"Array(2)\",\"Array3D(3)\":\"Array(3)\",\"Array3D(4)\":\"Array(4)\",\"ArrayTexture(1)\":\"Number\",\"ArrayTexture(2)\":\"Array(2)\",\"ArrayTexture(3)\":\"Array(3)\",\"ArrayTexture(4)\":\"Array(4)\"};t.exports={FunctionNode:/*#__PURE__*/function(){function FunctionNode(e,t){_classCallCheck(this,FunctionNode);if(!e&&!t.ast)throw new Error(\"source parameter is missing\");if(t=t||{},this.source=e,this.ast=null,this.name=\"string\"==typeof e?t.isRootKernel?\"kernel\":t.name||i.getFunctionNameFromString(e):null,this.calledFunctions=[],this.constants={},this.constantTypes={},this.constantBitRatios={},this.isRootKernel=!1,this.isSubKernel=!1,this.debug=null,this.functions=null,this.identifiers=null,this.contexts=null,this.functionCalls=null,this.states=[],this.needsArgumentType=null,this.assignArgumentType=null,this.lookupReturnType=null,this.lookupFunctionArgumentTypes=null,this.lookupFunctionArgumentBitRatio=null,this.triggerImplyArgumentType=null,this.triggerImplyArgumentBitRatio=null,this.onNestedFunction=null,this.onFunctionCall=null,this.optimizeFloatMemory=null,this.precision=null,this.loopMaxIterations=null,this.argumentNames=\"string\"==typeof this.source?i.getArgumentNamesFromString(this.source):null,this.argumentTypes=[],this.argumentSizes=[],this.argumentBitRatios=null,this.returnType=null,this.output=[],this.plugins=null,this.leadingReturnStatement=null,this.followingReturnStatement=null,this.dynamicOutput=null,this.dynamicArguments=null,this.strictTypingChecking=!1,this.fixIntegerDivisionAccuracy=null,t)for(var _e41 in t){t.hasOwnProperty(_e41)&&this.hasOwnProperty(_e41)&&(this[_e41]=t[_e41]);}this.literalTypes={},this.validate(),this._string=null,this._internalVariableNames={};}_createClass(FunctionNode,[{key:\"validate\",value:function validate(){if(\"string\"!=typeof this.source&&!this.ast)throw new Error(\"this.source not a string\");if(!this.ast&&!i.isFunctionString(this.source))throw new Error(\"this.source not a function string\");if(!this.name)throw new Error(\"this.name could not be set\");if(this.argumentTypes.length>0&&this.argumentTypes.length!==this.argumentNames.length)throw new Error(\"argumentTypes count of \".concat(this.argumentTypes.length,\" exceeds \").concat(this.argumentNames.length));if(this.output.length<1)throw new Error(\"this.output is not big enough\");}},{key:\"isIdentifierConstant\",value:function isIdentifierConstant(e){return!!this.constants&&this.constants.hasOwnProperty(e);}},{key:\"isInput\",value:function isInput(e){return\"Input\"===this.argumentTypes[this.argumentNames.indexOf(e)];}},{key:\"pushState\",value:function pushState(e){this.states.push(e);}},{key:\"popState\",value:function popState(e){if(this.state!==e)throw new Error(\"Cannot popState \".concat(e,\" when in \").concat(this.state));this.states.pop();}},{key:\"isState\",value:function isState(e){return this.state===e;}},{key:\"state\",get:function get(){return this.states[this.states.length-1];}},{key:\"astMemberExpressionUnroll\",value:function astMemberExpressionUnroll(e){if(\"Identifier\"===e.type)return e.name;if(\"ThisExpression\"===e.type)return\"this\";if(\"MemberExpression\"===e.type&&e.object&&e.property)return e.object.hasOwnProperty(\"name\")&&\"Math\"!==e.object.name?this.astMemberExpressionUnroll(e.property):this.astMemberExpressionUnroll(e.object)+\".\"+this.astMemberExpressionUnroll(e.property);if(e.hasOwnProperty(\"expressions\")){var _t29=e.expressions[0];if(\"Literal\"===_t29.type&&0===_t29.value&&2===e.expressions.length)return this.astMemberExpressionUnroll(e.expressions[1]);}throw this.astErrorOutput(\"Unknown astMemberExpressionUnroll\",e);}},{key:\"getJsAST\",value:function getJsAST(e){if(this.ast)return this.ast;if(\"object\"==_typeof(this.source))return this.traceFunctionAST(this.source),this.ast=this.source;if(null===(e=e||n))throw new Error(\"Missing JS to AST parser\");var t=Object.freeze(e.parse(\"const parser_\".concat(this.name,\" = \").concat(this.source,\";\"),{locations:!0})),r=t.body[0].declarations[0].init;if(this.traceFunctionAST(r),!t)throw new Error(\"Failed to parse JS code\");return this.ast=r;}},{key:\"traceFunctionAST\",value:function traceFunctionAST(e){var _s3=new s(e),t=_s3.contexts,r=_s3.declarations,n=_s3.functions,i=_s3.identifiers,a=_s3.functionCalls;this.contexts=t,this.identifiers=i,this.functionCalls=a,this.functions=n;for(var _e42=0;_e42<r.length;_e42++){var _t30=r[_e42],_n36=_t30.ast,_i4=_t30.inForLoopInit,_s4=_t30.inForLoopTest,_a2=_n36.init,o=this.getDependencies(_a2);var u=null;if(_i4&&_s4)u=\"Integer\";else if(_a2){var _e43=this.getType(_a2);switch(_e43){case\"Integer\":case\"Float\":case\"Number\":u=\"MemberExpression\"===_a2.type?_e43:\"Number\";break;case\"LiteralInteger\":u=\"Number\";break;default:u=_e43;}}_t30.valueType=u,_t30.dependencies=o,_t30.isSafe=this.isSafeDependencies(o);}for(var _e44=0;_e44<n.length;_e44++){this.onNestedFunction(n[_e44],this.source);}}},{key:\"getDeclaration\",value:function getDeclaration(e){for(var _t31=0;_t31<this.identifiers.length;_t31++){var _r27=this.identifiers[_t31];if(e===_r27.ast)return _r27.declaration;}return null;}},{key:\"getVariableType\",value:function getVariableType(e){if(\"Identifier\"!==e.type)throw new Error(\"ast of \".concat(e.type,\" not \\\"Identifier\\\"\"));var t=null;var r=this.argumentNames.indexOf(e.name);if(-1===r){var _t32=this.getDeclaration(e);if(_t32)return _t32.valueType;}else{var _e45=this.argumentTypes[r];_e45&&(t=_e45);}if(!t&&this.strictTypingChecking)throw new Error(\"Declaration of \".concat(name,\" not found\"));return t;}},{key:\"getLookupType\",value:function getLookupType(e){if(!a.hasOwnProperty(e))throw new Error(\"unknown typeLookupMap \".concat(e));return a[e];}},{key:\"getConstantType\",value:function getConstantType(e){if(this.constantTypes[e]){var _t33=this.constantTypes[e];return\"Float\"===_t33?\"Number\":_t33;}throw new Error(\"Type for constant \\\"\".concat(e,\"\\\" not declared\"));}},{key:\"toString\",value:function toString(){return this._string?this._string:this._string=this.astGeneric(this.getJsAST(),[]).join(\"\").trim();}},{key:\"toJSON\",value:function toJSON(){var e={source:this.source,name:this.name,constants:this.constants,constantTypes:this.constantTypes,isRootKernel:this.isRootKernel,isSubKernel:this.isSubKernel,debug:this.debug,output:this.output,loopMaxIterations:this.loopMaxIterations,argumentNames:this.argumentNames,argumentTypes:this.argumentTypes,argumentSizes:this.argumentSizes,returnType:this.returnType,leadingReturnStatement:this.leadingReturnStatement,followingReturnStatement:this.followingReturnStatement};return{ast:this.ast,settings:e};}},{key:\"getType\",value:function getType(e){if(Array.isArray(e))return this.getType(e[e.length-1]);switch(e.type){case\"BlockStatement\":return this.getType(e.body);case\"ArrayExpression\":switch(this.getType(e.elements[0])){case\"Array(2)\":case\"Array(3)\":case\"Array(4)\":return\"Matrix(\".concat(e.elements.length,\")\");}return\"Array(\".concat(e.elements.length,\")\");case\"Literal\":var _t34=this.astKey(e);return this.literalTypes[_t34]?this.literalTypes[_t34]:Number.isInteger(e.value)?\"LiteralInteger\":!0===e.value||!1===e.value?\"Boolean\":\"Number\";case\"AssignmentExpression\":return this.getType(e.left);case\"CallExpression\":if(this.isAstMathFunction(e))return\"Number\";if(!e.callee||!e.callee.name){if(\"SequenceExpression\"===e.callee.type&&e.callee.expressions[e.callee.expressions.length-1].property.name){var _t35=e.callee.expressions[e.callee.expressions.length-1].property.name;return this.inferArgumentTypesIfNeeded(_t35,e.arguments),this.lookupReturnType(_t35,e,this);}if(\"this.color\"===this.getVariableSignature(e.callee,!0))return null;if(\"MemberExpression\"===e.callee.type&&e.callee.object&&e.callee.property&&e.callee.property.name&&e.arguments){var _t36=e.callee.property.name;return this.inferArgumentTypesIfNeeded(_t36,e.arguments),this.lookupReturnType(_t36,e,this);}throw this.astErrorOutput(\"Unknown call expression\",e);}if(e.callee&&e.callee.name){var _t37=e.callee.name;return this.inferArgumentTypesIfNeeded(_t37,e.arguments),this.lookupReturnType(_t37,e,this);}throw this.astErrorOutput(\"Unhandled getType Type \\\"\".concat(e.type,\"\\\"\"),e);case\"LogicalExpression\":return\"Boolean\";case\"BinaryExpression\":switch(e.operator){case\"%\":case\"/\":if(this.fixIntegerDivisionAccuracy)return\"Number\";break;case\">\":case\"<\":return\"Boolean\";case\"&\":case\"|\":case\"^\":case\"<<\":case\">>\":case\">>>\":return\"Integer\";}var _r28=this.getType(e.left);if(this.isState(\"skip-literal-correction\"))return _r28;if(\"LiteralInteger\"===_r28){var _t38=this.getType(e.right);return\"LiteralInteger\"===_t38?e.left.value%1==0?\"Integer\":\"Float\":_t38;}return a[_r28]||_r28;case\"UpdateExpression\":return this.getType(e.argument);case\"UnaryExpression\":return\"~\"===e.operator?\"Integer\":this.getType(e.argument);case\"VariableDeclaration\":{var _t39=e.declarations;var _r29;for(var _e46=0;_e46<_t39.length;_e46++){var _n38=_t39[_e46];_r29=this.getType(_n38);}if(!_r29)throw this.astErrorOutput(\"Unable to find type for declaration\",e);return _r29;}case\"VariableDeclarator\":var _n37=this.getDeclaration(e.id);if(!_n37)throw this.astErrorOutput(\"Unable to find declarator\",e);if(!_n37.valueType)throw this.astErrorOutput(\"Unable to find declarator valueType\",e);return _n37.valueType;case\"Identifier\":if(\"Infinity\"===e.name)return\"Number\";if(this.isAstVariable(e)&&\"value\"===this.getVariableSignature(e))return this.getCheckVariableType(e);var _i5=this.findIdentifierOrigin(e);return _i5&&_i5.init?this.getType(_i5.init):null;case\"ReturnStatement\":return this.getType(e.argument);case\"MemberExpression\":if(this.isAstMathFunction(e)){switch(e.property.name){case\"ceil\":case\"floor\":case\"round\":return\"Integer\";}return\"Number\";}if(this.isAstVariable(e)){switch(this.getVariableSignature(e)){case\"value[]\":return this.getLookupType(this.getCheckVariableType(e.object));case\"value[][]\":return this.getLookupType(this.getCheckVariableType(e.object.object));case\"value[][][]\":return this.getLookupType(this.getCheckVariableType(e.object.object.object));case\"value[][][][]\":return this.getLookupType(this.getCheckVariableType(e.object.object.object.object));case\"value.thread.value\":case\"this.thread.value\":return\"Integer\";case\"this.output.value\":return this.dynamicOutput?\"Integer\":\"LiteralInteger\";case\"this.constants.value\":return this.getConstantType(e.property.name);case\"this.constants.value[]\":return this.getLookupType(this.getConstantType(e.object.property.name));case\"this.constants.value[][]\":return this.getLookupType(this.getConstantType(e.object.object.property.name));case\"this.constants.value[][][]\":return this.getLookupType(this.getConstantType(e.object.object.object.property.name));case\"this.constants.value[][][][]\":return this.getLookupType(this.getConstantType(e.object.object.object.object.property.name));case\"fn()[]\":case\"fn()[][]\":case\"fn()[][][]\":return this.getLookupType(this.getType(e.object));case\"value.value\":if(this.isAstMathVariable(e))return\"Number\";switch(e.property.name){case\"r\":case\"g\":case\"b\":case\"a\":return this.getLookupType(this.getCheckVariableType(e.object));}case\"[][]\":return\"Number\";}throw this.astErrorOutput(\"Unhandled getType MemberExpression\",e);}throw this.astErrorOutput(\"Unhandled getType MemberExpression\",e);case\"ConditionalExpression\":return this.getType(e.consequent);case\"FunctionDeclaration\":case\"FunctionExpression\":var _s5=this.findLastReturn(e.body);return _s5?this.getType(_s5):null;case\"IfStatement\":return this.getType(e.consequent);case\"SequenceExpression\":return this.getType(e.expressions[e.expressions.length-1]);default:throw this.astErrorOutput(\"Unhandled getType Type \\\"\".concat(e.type,\"\\\"\"),e);}}},{key:\"getCheckVariableType\",value:function getCheckVariableType(e){var t=this.getVariableType(e);if(!t)throw this.astErrorOutput(\"\".concat(e.type,\" is not defined\"),e);return t;}},{key:\"inferArgumentTypesIfNeeded\",value:function inferArgumentTypesIfNeeded(e,t){for(var _r30=0;_r30<t.length;_r30++){if(!this.needsArgumentType(e,_r30))continue;var _n39=this.getType(t[_r30]);if(!_n39)throw this.astErrorOutput(\"Unable to infer argument \".concat(_r30),t[_r30]);this.assignArgumentType(e,_r30,_n39);}}},{key:\"isAstMathVariable\",value:function isAstMathVariable(e){return\"MemberExpression\"===e.type&&e.object&&\"Identifier\"===e.object.type&&\"Math\"===e.object.name&&e.property&&\"Identifier\"===e.property.type&&[\"E\",\"PI\",\"SQRT2\",\"SQRT1_2\",\"LN2\",\"LN10\",\"LOG2E\",\"LOG10E\"].indexOf(e.property.name)>-1;}},{key:\"isAstMathFunction\",value:function isAstMathFunction(e){return\"CallExpression\"===e.type&&e.callee&&\"MemberExpression\"===e.callee.type&&e.callee.object&&\"Identifier\"===e.callee.object.type&&\"Math\"===e.callee.object.name&&e.callee.property&&\"Identifier\"===e.callee.property.type&&[\"abs\",\"acos\",\"acosh\",\"asin\",\"asinh\",\"atan\",\"atan2\",\"atanh\",\"cbrt\",\"ceil\",\"clz32\",\"cos\",\"cosh\",\"expm1\",\"exp\",\"floor\",\"fround\",\"imul\",\"log\",\"log2\",\"log10\",\"log1p\",\"max\",\"min\",\"pow\",\"random\",\"round\",\"sign\",\"sin\",\"sinh\",\"sqrt\",\"tan\",\"tanh\",\"trunc\"].indexOf(e.callee.property.name)>-1;}},{key:\"isAstVariable\",value:function isAstVariable(e){return\"Identifier\"===e.type||\"MemberExpression\"===e.type;}},{key:\"isSafe\",value:function isSafe(e){return this.isSafeDependencies(this.getDependencies(e));}},{key:\"isSafeDependencies\",value:function isSafeDependencies(e){return!e||!e.every||e.every(function(e){return e.isSafe;});}},{key:\"getDependencies\",value:function getDependencies(e,t,r){if(t||(t=[]),!e)return null;if(Array.isArray(e)){for(var _n40=0;_n40<e.length;_n40++){this.getDependencies(e[_n40],t,r);}return t;}switch(e.type){case\"AssignmentExpression\":return this.getDependencies(e.left,t,r),this.getDependencies(e.right,t,r),t;case\"ConditionalExpression\":return this.getDependencies(e.test,t,r),this.getDependencies(e.alternate,t,r),this.getDependencies(e.consequent,t,r),t;case\"Literal\":t.push({origin:\"literal\",value:e.value,isSafe:!0!==r&&e.value>-1/0&&e.value<1/0&&!isNaN(e.value)});break;case\"VariableDeclarator\":return this.getDependencies(e.init,t,r);case\"Identifier\":var _n41=this.getDeclaration(e);if(_n41)t.push({name:e.name,origin:\"declaration\",isSafe:!r&&this.isSafeDependencies(_n41.dependencies)});else if(this.argumentNames.indexOf(e.name)>-1)t.push({name:e.name,origin:\"argument\",isSafe:!1});else if(this.strictTypingChecking)throw new Error(\"Cannot find identifier origin \\\"\".concat(e.name,\"\\\"\"));break;case\"FunctionDeclaration\":return this.getDependencies(e.body.body[e.body.body.length-1],t,r);case\"ReturnStatement\":return this.getDependencies(e.argument,t);case\"BinaryExpression\":case\"LogicalExpression\":return r=\"/\"===e.operator||\"*\"===e.operator,this.getDependencies(e.left,t,r),this.getDependencies(e.right,t,r),t;case\"UnaryExpression\":case\"UpdateExpression\":return this.getDependencies(e.argument,t,r);case\"VariableDeclaration\":return this.getDependencies(e.declarations,t,r);case\"ArrayExpression\":return t.push({origin:\"declaration\",isSafe:!0}),t;case\"CallExpression\":return t.push({origin:\"function\",isSafe:!0}),t;case\"MemberExpression\":var _i6=this.getMemberExpressionDetails(e);switch(_i6.signature){case\"value[]\":this.getDependencies(e.object,t,r);break;case\"value[][]\":this.getDependencies(e.object.object,t,r);break;case\"value[][][]\":this.getDependencies(e.object.object.object,t,r);break;case\"this.output.value\":this.dynamicOutput&&t.push({name:_i6.name,origin:\"output\",isSafe:!1});}if(_i6)return _i6.property&&this.getDependencies(_i6.property,t,r),_i6.xProperty&&this.getDependencies(_i6.xProperty,t,r),_i6.yProperty&&this.getDependencies(_i6.yProperty,t,r),_i6.zProperty&&this.getDependencies(_i6.zProperty,t,r),t;case\"SequenceExpression\":return this.getDependencies(e.expressions,t,r);default:throw this.astErrorOutput(\"Unhandled type \".concat(e.type,\" in getDependencies\"),e);}return t;}},{key:\"getVariableSignature\",value:function getVariableSignature(e,t){if(!this.isAstVariable(e))throw new Error(\"ast of type \\\"\".concat(e.type,\"\\\" is not a variable signature\"));if(\"Identifier\"===e.type)return\"value\";var r=[];for(;e;){e.computed?r.push(\"[]\"):\"ThisExpression\"===e.type?r.unshift(\"this\"):e.property&&e.property.name?\"x\"===e.property.name||\"y\"===e.property.name||\"z\"===e.property.name?r.unshift(t?\".\"+e.property.name:\".value\"):\"constants\"===e.property.name||\"thread\"===e.property.name||\"output\"===e.property.name?r.unshift(\".\"+e.property.name):r.unshift(t?\".\"+e.property.name:\".value\"):e.name?r.unshift(t?e.name:\"value\"):e.callee&&e.callee.name?r.unshift(t?e.callee.name+\"()\":\"fn()\"):e.elements?r.unshift(\"[]\"):r.unshift(\"unknown\"),e=e.object;}var n=r.join(\"\");return t?n:[\"value\",\"value[]\",\"value[][]\",\"value[][][]\",\"value[][][][]\",\"value.value\",\"value.thread.value\",\"this.thread.value\",\"this.output.value\",\"this.constants.value\",\"this.constants.value[]\",\"this.constants.value[][]\",\"this.constants.value[][][]\",\"this.constants.value[][][][]\",\"fn()[]\",\"fn()[][]\",\"fn()[][][]\",\"[][]\"].indexOf(n)>-1?n:null;}},{key:\"build\",value:function build(){return this.toString().length>0;}},{key:\"astGeneric\",value:function astGeneric(e,t){if(null===e)throw this.astErrorOutput(\"NULL ast\",e);if(Array.isArray(e)){for(var _r31=0;_r31<e.length;_r31++){this.astGeneric(e[_r31],t);}return t;}switch(e.type){case\"FunctionDeclaration\":return this.astFunctionDeclaration(e,t);case\"FunctionExpression\":return this.astFunctionExpression(e,t);case\"ReturnStatement\":return this.astReturnStatement(e,t);case\"Literal\":return this.astLiteral(e,t);case\"BinaryExpression\":return this.astBinaryExpression(e,t);case\"Identifier\":return this.astIdentifierExpression(e,t);case\"AssignmentExpression\":return this.astAssignmentExpression(e,t);case\"ExpressionStatement\":return this.astExpressionStatement(e,t);case\"EmptyStatement\":return this.astEmptyStatement(e,t);case\"BlockStatement\":return this.astBlockStatement(e,t);case\"IfStatement\":return this.astIfStatement(e,t);case\"SwitchStatement\":return this.astSwitchStatement(e,t);case\"BreakStatement\":return this.astBreakStatement(e,t);case\"ContinueStatement\":return this.astContinueStatement(e,t);case\"ForStatement\":return this.astForStatement(e,t);case\"WhileStatement\":return this.astWhileStatement(e,t);case\"DoWhileStatement\":return this.astDoWhileStatement(e,t);case\"VariableDeclaration\":return this.astVariableDeclaration(e,t);case\"VariableDeclarator\":return this.astVariableDeclarator(e,t);case\"ThisExpression\":return this.astThisExpression(e,t);case\"SequenceExpression\":return this.astSequenceExpression(e,t);case\"UnaryExpression\":return this.astUnaryExpression(e,t);case\"UpdateExpression\":return this.astUpdateExpression(e,t);case\"LogicalExpression\":return this.astLogicalExpression(e,t);case\"MemberExpression\":return this.astMemberExpression(e,t);case\"CallExpression\":return this.astCallExpression(e,t);case\"ArrayExpression\":return this.astArrayExpression(e,t);case\"DebuggerStatement\":return this.astDebuggerStatement(e,t);case\"ConditionalExpression\":return this.astConditionalExpression(e,t);}throw this.astErrorOutput(\"Unknown ast type : \"+e.type,e);}},{key:\"astErrorOutput\",value:function astErrorOutput(e,t){if(\"string\"!=typeof this.source)return new Error(e);var r=i.getAstString(this.source,t),n=this.source.substr(t.start).split(/\\n/),s=n.length>0?n[n.length-1]:0;return new Error(\"\".concat(e,\" on line \").concat(n.length,\", position \").concat(s.length,\":\\n \").concat(r));}},{key:\"astDebuggerStatement\",value:function astDebuggerStatement(e,t){return t;}},{key:\"astConditionalExpression\",value:function astConditionalExpression(e,t){if(\"ConditionalExpression\"!==e.type)throw this.astErrorOutput(\"Not a conditional expression\",e);return t.push(\"(\"),this.astGeneric(e.test,t),t.push(\"?\"),this.astGeneric(e.consequent,t),t.push(\":\"),this.astGeneric(e.alternate,t),t.push(\")\"),t;}},{key:\"astFunction\",value:function astFunction(e,t){throw new Error(\"\\\"astFunction\\\" not defined on \".concat(this.constructor.name));}},{key:\"astFunctionDeclaration\",value:function astFunctionDeclaration(e,t){return this.isChildFunction(e)?t:this.astFunction(e,t);}},{key:\"astFunctionExpression\",value:function astFunctionExpression(e,t){return this.isChildFunction(e)?t:this.astFunction(e,t);}},{key:\"isChildFunction\",value:function isChildFunction(e){for(var _t40=0;_t40<this.functions.length;_t40++){if(this.functions[_t40]===e)return!0;}return!1;}},{key:\"astReturnStatement\",value:function astReturnStatement(e,t){return t;}},{key:\"astLiteral\",value:function astLiteral(e,t){return this.literalTypes[this.astKey(e)]=\"Number\",t;}},{key:\"astBinaryExpression\",value:function astBinaryExpression(e,t){return t;}},{key:\"astIdentifierExpression\",value:function astIdentifierExpression(e,t){return t;}},{key:\"astAssignmentExpression\",value:function astAssignmentExpression(e,t){return t;}},{key:\"astExpressionStatement\",value:function astExpressionStatement(e,t){return this.astGeneric(e.expression,t),t.push(\";\"),t;}},{key:\"astEmptyStatement\",value:function astEmptyStatement(e,t){return t;}},{key:\"astBlockStatement\",value:function astBlockStatement(e,t){return t;}},{key:\"astIfStatement\",value:function astIfStatement(e,t){return t;}},{key:\"astSwitchStatement\",value:function astSwitchStatement(e,t){return t;}},{key:\"astBreakStatement\",value:function astBreakStatement(e,t){return t.push(\"break;\"),t;}},{key:\"astContinueStatement\",value:function astContinueStatement(e,t){return t.push(\"continue;\\n\"),t;}},{key:\"astForStatement\",value:function astForStatement(e,t){return t;}},{key:\"astWhileStatement\",value:function astWhileStatement(e,t){return t;}},{key:\"astDoWhileStatement\",value:function astDoWhileStatement(e,t){return t;}},{key:\"astVariableDeclarator\",value:function astVariableDeclarator(e,t){return this.astGeneric(e.id,t),null!==e.init&&(t.push(\"=\"),this.astGeneric(e.init,t)),t;}},{key:\"astThisExpression\",value:function astThisExpression(e,t){return t;}},{key:\"astSequenceExpression\",value:function astSequenceExpression(e,t){var r=e.expressions,n=[];for(var _e47=0;_e47<r.length;_e47++){var _t41=r[_e47],_i7=[];this.astGeneric(_t41,_i7),n.push(_i7.join(\"\"));}return n.length>1?t.push(\"(\",n.join(\",\"),\")\"):t.push(n[0]),t;}},{key:\"astUnaryExpression\",value:function astUnaryExpression(e,t){return this.checkAndUpconvertBitwiseUnary(e,t)?t:(e.prefix?(t.push(e.operator),this.astGeneric(e.argument,t)):(this.astGeneric(e.argument,t),t.push(e.operator)),t);}},{key:\"checkAndUpconvertBitwiseUnary\",value:function checkAndUpconvertBitwiseUnary(e,t){}},{key:\"astUpdateExpression\",value:function astUpdateExpression(e,t){return e.prefix?(t.push(e.operator),this.astGeneric(e.argument,t)):(this.astGeneric(e.argument,t),t.push(e.operator)),t;}},{key:\"astLogicalExpression\",value:function astLogicalExpression(e,t){return t.push(\"(\"),this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t.push(\")\"),t;}},{key:\"astMemberExpression\",value:function astMemberExpression(e,t){return t;}},{key:\"astCallExpression\",value:function astCallExpression(e,t){return t;}},{key:\"astArrayExpression\",value:function astArrayExpression(e,t){return t;}},{key:\"getMemberExpressionDetails\",value:function getMemberExpressionDetails(e){if(\"MemberExpression\"!==e.type)throw this.astErrorOutput(\"Expression \".concat(e.type,\" not a MemberExpression\"),e);var t=null,r=null;var n=this.getVariableSignature(e);switch(n){case\"value\":return null;case\"value.thread.value\":case\"this.thread.value\":case\"this.output.value\":return{signature:n,type:\"Integer\",name:e.property.name};case\"value[]\":if(\"string\"!=typeof e.object.name)throw this.astErrorOutput(\"Unexpected expression\",e);return{name:t=e.object.name,origin:\"user\",signature:n,type:this.getVariableType(e.object),xProperty:e.property};case\"value[][]\":if(\"string\"!=typeof e.object.object.name)throw this.astErrorOutput(\"Unexpected expression\",e);return{name:t=e.object.object.name,origin:\"user\",signature:n,type:this.getVariableType(e.object.object),yProperty:e.object.property,xProperty:e.property};case\"value[][][]\":if(\"string\"!=typeof e.object.object.object.name)throw this.astErrorOutput(\"Unexpected expression\",e);return{name:t=e.object.object.object.name,origin:\"user\",signature:n,type:this.getVariableType(e.object.object.object),zProperty:e.object.object.property,yProperty:e.object.property,xProperty:e.property};case\"value[][][][]\":if(\"string\"!=typeof e.object.object.object.object.name)throw this.astErrorOutput(\"Unexpected expression\",e);return{name:t=e.object.object.object.object.name,origin:\"user\",signature:n,type:this.getVariableType(e.object.object.object.object),zProperty:e.object.object.property,yProperty:e.object.property,xProperty:e.property};case\"value.value\":if(\"string\"!=typeof e.property.name)throw this.astErrorOutput(\"Unexpected expression\",e);if(this.isAstMathVariable(e))return{name:t=e.property.name,origin:\"Math\",type:\"Number\",signature:n};switch(e.property.name){case\"r\":case\"g\":case\"b\":case\"a\":return{name:t=e.object.name,property:e.property.name,origin:\"user\",signature:n,type:\"Number\"};default:throw this.astErrorOutput(\"Unexpected expression\",e);}case\"this.constants.value\":if(\"string\"!=typeof e.property.name)throw this.astErrorOutput(\"Unexpected expression\",e);if(t=e.property.name,!(r=this.getConstantType(t)))throw this.astErrorOutput(\"Constant has no type\",e);return{name:t,type:r,origin:\"constants\",signature:n};case\"this.constants.value[]\":if(\"string\"!=typeof e.object.property.name)throw this.astErrorOutput(\"Unexpected expression\",e);if(t=e.object.property.name,!(r=this.getConstantType(t)))throw this.astErrorOutput(\"Constant has no type\",e);return{name:t,type:r,origin:\"constants\",signature:n,xProperty:e.property};case\"this.constants.value[][]\":if(\"string\"!=typeof e.object.object.property.name)throw this.astErrorOutput(\"Unexpected expression\",e);if(t=e.object.object.property.name,!(r=this.getConstantType(t)))throw this.astErrorOutput(\"Constant has no type\",e);return{name:t,type:r,origin:\"constants\",signature:n,yProperty:e.object.property,xProperty:e.property};case\"this.constants.value[][][]\":if(\"string\"!=typeof e.object.object.object.property.name)throw this.astErrorOutput(\"Unexpected expression\",e);if(t=e.object.object.object.property.name,!(r=this.getConstantType(t)))throw this.astErrorOutput(\"Constant has no type\",e);return{name:t,type:r,origin:\"constants\",signature:n,zProperty:e.object.object.property,yProperty:e.object.property,xProperty:e.property};case\"fn()[]\":case\"fn()[][]\":case\"[][]\":return{signature:n,property:e.property};default:throw this.astErrorOutput(\"Unexpected expression\",e);}}},{key:\"findIdentifierOrigin\",value:function findIdentifierOrigin(e){var t=[this.ast];for(;t.length>0;){var _r32=t[0];if(\"VariableDeclarator\"===_r32.type&&_r32.id&&_r32.id.name&&_r32.id.name===e.name)return _r32;if(t.shift(),_r32.argument)t.push(_r32.argument);else if(_r32.body)t.push(_r32.body);else if(_r32.declarations)t.push(_r32.declarations);else if(Array.isArray(_r32))for(var _e48=0;_e48<_r32.length;_e48++){t.push(_r32[_e48]);}}return null;}},{key:\"findLastReturn\",value:function findLastReturn(e){var t=[e||this.ast];for(;t.length>0;){var _e49=t.pop();if(\"ReturnStatement\"===_e49.type)return _e49;if(\"FunctionDeclaration\"!==_e49.type)if(_e49.argument)t.push(_e49.argument);else if(_e49.body)t.push(_e49.body);else if(_e49.declarations)t.push(_e49.declarations);else if(Array.isArray(_e49))for(var _r33=0;_r33<_e49.length;_r33++){t.push(_e49[_r33]);}else _e49.consequent?t.push(_e49.consequent):_e49.cases&&t.push(_e49.cases);}return null;}},{key:\"getInternalVariableName\",value:function getInternalVariableName(e){return this._internalVariableNames.hasOwnProperty(e)||(this._internalVariableNames[e]=0),this._internalVariableNames[e]++,1===this._internalVariableNames[e]?e:e+this._internalVariableNames[e];}},{key:\"astKey\",value:function astKey(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\",\";if(!e.start||!e.end)throw new Error(\"AST start and end needed\");return\"\".concat(e.start).concat(t).concat(e.end);}}]);return FunctionNode;}()};},{\"../utils\":114,\"./function-tracer\":11,acorn:1}],11:[function(e,t,r){var _e50=e(\"../utils\"),n=_e50.utils;function i(e){return e.length>0?e[e.length-1]:null;}var s={trackIdentifiers:\"trackIdentifiers\",memberExpression:\"memberExpression\",inForLoopInit:\"inForLoopInit\"};t.exports={FunctionTracer:/*#__PURE__*/function(){function FunctionTracer(e){_classCallCheck(this,FunctionTracer);this.runningContexts=[],this.functionContexts=[],this.contexts=[],this.functionCalls=[],this.declarations=[],this.identifiers=[],this.functions=[],this.returnStatements=[],this.trackedIdentifiers=null,this.states=[],this.newFunctionContext(),this.scan(e);}_createClass(FunctionTracer,[{key:\"isState\",value:function isState(e){return this.states[this.states.length-1]===e;}},{key:\"hasState\",value:function hasState(e){return this.states.indexOf(e)>-1;}},{key:\"pushState\",value:function pushState(e){this.states.push(e);}},{key:\"popState\",value:function popState(e){if(!this.isState(e))throw new Error(\"Cannot pop the non-active state \\\"\".concat(e,\"\\\"\"));this.states.pop();}},{key:\"currentFunctionContext\",get:function get(){return i(this.functionContexts);}},{key:\"currentContext\",get:function get(){return i(this.runningContexts);}},{key:\"newFunctionContext\",value:function newFunctionContext(){var e={\"@contextType\":\"function\"};this.contexts.push(e),this.functionContexts.push(e);}},{key:\"newContext\",value:function newContext(e){var t=Object.assign({\"@contextType\":\"const/let\"},this.currentContext);this.contexts.push(t),this.runningContexts.push(t),e();var r=this.currentFunctionContext;for(var _e51 in r){r.hasOwnProperty(_e51)&&!t.hasOwnProperty(_e51)&&(t[_e51]=r[_e51]);}return this.runningContexts.pop(),t;}},{key:\"useFunctionContext\",value:function useFunctionContext(e){var t=i(this.functionContexts);this.runningContexts.push(t),e(),this.runningContexts.pop();}},{key:\"getIdentifiers\",value:function getIdentifiers(e){var t=this.trackedIdentifiers=[];return this.pushState(s.trackIdentifiers),e(),this.trackedIdentifiers=null,this.popState(s.trackIdentifiers),t;}},{key:\"getDeclaration\",value:function getDeclaration(e){var t=this.currentContext,r=this.currentFunctionContext,n=this.runningContexts,i=t[e]||r[e]||null;if(!i&&t===r&&n.length>0){var _t42=n[n.length-2];if(_t42[e])return _t42[e];}return i;}},{key:\"scan\",value:function scan(e){var _this4=this;if(e)if(Array.isArray(e))for(var _t43=0;_t43<e.length;_t43++){this.scan(e[_t43]);}else switch(e.type){case\"Program\":this.useFunctionContext(function(){_this4.scan(e.body);});break;case\"BlockStatement\":this.newContext(function(){_this4.scan(e.body);});break;case\"AssignmentExpression\":case\"LogicalExpression\":case\"BinaryExpression\":this.scan(e.left),this.scan(e.right);break;case\"UpdateExpression\":if(\"++\"===e.operator){var _t44=this.getDeclaration(e.argument.name);_t44&&(_t44.suggestedType=\"Integer\");}this.scan(e.argument);break;case\"UnaryExpression\":this.scan(e.argument);break;case\"VariableDeclaration\":\"var\"===e.kind?this.useFunctionContext(function(){e.declarations=n.normalizeDeclarations(e),_this4.scan(e.declarations);}):(e.declarations=n.normalizeDeclarations(e),this.scan(e.declarations));break;case\"VariableDeclarator\":{var _t45=this.currentContext,_r34=this.hasState(s.inForLoopInit),_n42={ast:e,context:_t45,name:e.id.name,origin:\"declaration\",inForLoopInit:_r34,inForLoopTest:null,assignable:_t45===this.currentFunctionContext||!_r34&&!_t45.hasOwnProperty(e.id.name),suggestedType:null,valueType:null,dependencies:null,isSafe:null};_t45[e.id.name]||(_t45[e.id.name]=_n42),this.declarations.push(_n42),this.scan(e.id),this.scan(e.init);break;}case\"FunctionExpression\":case\"FunctionDeclaration\":0===this.runningContexts.length?this.scan(e.body):this.functions.push(e);break;case\"IfStatement\":this.scan(e.test),this.scan(e.consequent),e.alternate&&this.scan(e.alternate);break;case\"ForStatement\":{var _t46;var _r35=this.newContext(function(){_this4.pushState(s.inForLoopInit),_this4.scan(e.init),_this4.popState(s.inForLoopInit),_t46=_this4.getIdentifiers(function(){_this4.scan(e.test);}),_this4.scan(e.update),_this4.newContext(function(){_this4.scan(e.body);});});if(_t46)for(var _e52 in _r35){\"@contextType\"!==_e52&&_t46.indexOf(_e52)>-1&&(_r35[_e52].inForLoopTest=!0);}break;}case\"DoWhileStatement\":case\"WhileStatement\":this.newContext(function(){_this4.scan(e.body),_this4.scan(e.test);});break;case\"Identifier\":this.isState(s.trackIdentifiers)&&this.trackedIdentifiers.push(e.name),this.identifiers.push({context:this.currentContext,declaration:this.getDeclaration(e.name),ast:e});break;case\"ReturnStatement\":this.returnStatements.push(e),this.scan(e.argument);break;case\"MemberExpression\":this.pushState(s.memberExpression),this.scan(e.object),this.scan(e.property),this.popState(s.memberExpression);break;case\"ExpressionStatement\":this.scan(e.expression);break;case\"SequenceExpression\":this.scan(e.expressions);break;case\"CallExpression\":this.functionCalls.push({context:this.currentContext,ast:e}),this.scan(e.arguments);break;case\"ArrayExpression\":this.scan(e.elements);break;case\"ConditionalExpression\":this.scan(e.test),this.scan(e.alternate),this.scan(e.consequent);break;case\"SwitchStatement\":this.scan(e.discriminant),this.scan(e.cases);break;case\"SwitchCase\":this.scan(e.test),this.scan(e.consequent);break;case\"ThisExpression\":case\"Literal\":case\"DebuggerStatement\":case\"EmptyStatement\":case\"BreakStatement\":case\"ContinueStatement\":break;default:throw new Error(\"unhandled type \\\"\".concat(e.type,\"\\\"\"));}}}]);return FunctionTracer;}()};},{\"../utils\":114}],12:[function(e,t,r){var _e53=e(\"gl-wiretap\"),n=_e53.glWiretap,_e54=e(\"../../utils\"),i=_e54.utils;function s(e){return e.toString().replace(\"=>\",\"\").replace(/^function /,\"\").replace(/utils[.]/g,\"/*utils.*/\");}function a(e,t){var r=\"single\"===t.precision?e:\"new Float32Array(\".concat(e,\".buffer)\");return t.output[2]?\"renderOutput(\".concat(r,\", \").concat(t.output[0],\", \").concat(t.output[1],\", \").concat(t.output[2],\")\"):t.output[1]?\"renderOutput(\".concat(r,\", \").concat(t.output[0],\", \").concat(t.output[1],\")\"):\"renderOutput(\".concat(r,\", \").concat(t.output[0],\")\");}function o(e,t,r){var n=e.toArray.toString(),s=!/^function/.test(n);return\"() => {\\n  function framebuffer() { return \".concat(r,\"; };\\n  \").concat(i.flattenFunctionToString(\"\".concat(s?\"function \":\"\").concat(n),{findDependency:function findDependency(t,r){if(\"utils\"===t)return\"const \".concat(r,\" = \").concat(i[r].toString(),\";\");if(\"this\"===t)return\"framebuffer\"===r?\"\":\"\".concat(s?\"function \":\"\").concat(e[r].toString());throw new Error(\"unhandled fromObject\");},thisLookup:function thisLookup(r,n){if(\"texture\"===r)return t;if(\"context\"===r)return n?null:\"gl\";if(e.hasOwnProperty(r))return JSON.stringify(e[r]);throw new Error(\"unhandled thisLookup \".concat(r));}}),\"\\n  return toArray();\\n  }\");}function u(e,t,r,n,i){if(null===e)return null;if(null===t)return null;switch(_typeof(e)){case\"boolean\":case\"number\":return null;}if(\"undefined\"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)for(var _i8=0;_i8<t.length;_i8++){var _s6=t[_i8];if(\"HTMLImageArray\"!==_s6.type&&_s6)continue;if(_s6.uploadValue!==e)continue;var _a3=r[_i8].indexOf(e);if(-1===_a3)continue;var _o2=\"uploadValue_\".concat(_s6.name,\"[\").concat(_a3,\"]\");return n.insertVariable(_o2,e),_o2;}for(var _r36=0;_r36<t.length;_r36++){var _i9=t[_r36];if(e!==_i9.uploadValue)continue;var _s7=\"uploadValue_\".concat(_i9.name);return n.insertVariable(_s7,_i9),_s7;}return null;}t.exports={glKernelString:function glKernelString(e,t,r,l,h){r.built||r.build.apply(r,t),t=t?Array.from(t).map(function(e){switch(_typeof(e)){case\"boolean\":return new Boolean(e);case\"number\":return new Number(e);default:return e;}}):null;var c=[],p=n(r.context,{useTrackablePrimitives:!0,onReadPixels:function onReadPixels(e){if(F.subKernels){if(d){var _t47=F.subKernels[m++].property;c.push(\"    result\".concat(isNaN(_t47)?\".\"+_t47:\"[\".concat(_t47,\"]\"),\" = \").concat(a(e,F),\";\"));}else c.push(\"    const result = { result: \".concat(a(e,F),\" };\")),d=!0;m===F.subKernels.length&&c.push(\"    return result;\");}else e?c.push(\"    return \".concat(a(e,F),\";\")):c.push(\"    return null;\");},onUnrecognizedArgumentLookup:function onUnrecognizedArgumentLookup(e){var t=u(e,F.kernelArguments,[],p);if(t)return t;var r=u(e,F.kernelConstants,v?Object.keys(v).map(function(e){return v[e];}):[],p);return r||null;}});var d=!1,m=0;var f=r.source,g=r.canvas,x=r.output,y=r.pipeline,b=r.graphical,T=r.loopMaxIterations,v=r.constants,S=r.optimizeFloatMemory,A=r.precision,_=r.fixIntegerDivisionAccuracy,E=r.functions,w=r.nativeFunctions,k=r.subKernels,I=r.immutable,D=r.argumentTypes,C=r.constantTypes,$=r.kernelArguments,L=r.kernelConstants,R=r.tactic,F=new e(f,{canvas:g,context:p,checkContext:!1,output:x,pipeline:y,graphical:b,loopMaxIterations:T,constants:v,optimizeFloatMemory:S,precision:A,fixIntegerDivisionAccuracy:_,functions:E,nativeFunctions:w,subKernels:k,immutable:I,argumentTypes:D,constantTypes:C,tactic:R});var N=[];if(p.setIndent(2),F.build.apply(F,t),N.push(p.toString()),p.reset(),F.kernelArguments.forEach(function(e,r){switch(e.type){case\"Integer\":case\"Boolean\":case\"Number\":case\"Float\":case\"Array\":case\"Array(2)\":case\"Array(3)\":case\"Array(4)\":case\"HTMLCanvas\":case\"HTMLImage\":case\"HTMLVideo\":p.insertVariable(\"uploadValue_\".concat(e.name),e.uploadValue);break;case\"HTMLImageArray\":for(var _n43=0;_n43<t[r].length;_n43++){var _i10=t[r];p.insertVariable(\"uploadValue_\".concat(e.name,\"[\").concat(_n43,\"]\"),_i10[_n43]);}break;case\"Input\":p.insertVariable(\"uploadValue_\".concat(e.name),e.uploadValue);break;case\"MemoryOptimizedNumberTexture\":case\"NumberTexture\":case\"Array1D(2)\":case\"Array1D(3)\":case\"Array1D(4)\":case\"Array2D(2)\":case\"Array2D(3)\":case\"Array2D(4)\":case\"Array3D(2)\":case\"Array3D(3)\":case\"Array3D(4)\":case\"ArrayTexture(1)\":case\"ArrayTexture(2)\":case\"ArrayTexture(3)\":case\"ArrayTexture(4)\":p.insertVariable(\"uploadValue_\".concat(e.name),t[r].texture);break;default:throw new Error(\"unhandled kernelArgumentType insertion for glWiretap of type \".concat(e.type));}}),N.push(\"/** start of injected functions **/\"),N.push(\"function \".concat(s(i.flattenTo))),N.push(\"function \".concat(s(i.flatten2dArrayTo))),N.push(\"function \".concat(s(i.flatten3dArrayTo))),N.push(\"function \".concat(s(i.flatten4dArrayTo))),N.push(\"function \".concat(s(i.isArray))),F.renderOutput!==F.renderTexture&&F.formatValues&&N.push(\"  const renderOutput = function \".concat(s(F.formatValues),\";\")),N.push(\"/** end of injected functions **/\"),N.push(\"  const innerKernel = function (\".concat(F.kernelArguments.map(function(e){return e.varName;}).join(\", \"),\") {\")),p.setIndent(4),F.run.apply(F,t),F.renderKernels?F.renderKernels():F.renderOutput&&F.renderOutput(),N.push(\"    /** start setup uploads for kernel values **/\"),F.kernelArguments.forEach(function(e){N.push(\"    \"+e.getStringValueHandler().split(\"\\n\").join(\"\\n    \"));}),N.push(\"    /** end setup uploads for kernel values **/\"),N.push(p.toString()),F.renderOutput===F.renderTexture){p.reset();var _e55=p.getContextVariableName(F.framebuffer);if(F.renderKernels){var _t48=F.renderKernels(),_r37=p.getContextVariableName(F.texture.texture);N.push(\"    return {\\n      result: {\\n        texture: \".concat(_r37,\",\\n        type: '\").concat(_t48.result.type,\"',\\n        toArray: \").concat(o(_t48.result,_r37,_e55),\"\\n      },\"));var _n44=F.subKernels,_i11=F.mappedTextures;for(var _r38=0;_r38<_n44.length;_r38++){var _s8=_i11[_r38],_a4=_n44[_r38],_u=_t48[_a4.property],_l=p.getContextVariableName(_s8.texture);N.push(\"\\n      \".concat(_a4.property,\": {\\n        texture: \").concat(_l,\",\\n        type: '\").concat(_u.type,\"',\\n        toArray: \").concat(o(_u,_l,_e55),\"\\n      },\"));}N.push(\"    };\");}else{var _t49=F.renderOutput(),_r39=p.getContextVariableName(F.texture.texture);N.push(\"    return {\\n        texture: \".concat(_r39,\",\\n        type: '\").concat(_t49.type,\"',\\n        toArray: \").concat(o(_t49,_r39,_e55),\"\\n      };\"));}}N.push(\"    \".concat(h?\"\\n\"+h+\"    \":\"\")),N.push(c.join(\"\\n\")),N.push(\"  };\"),F.graphical&&(N.push(function(e){var t=e.getPixels.toString(),r=!/^function/.test(t);return i.flattenFunctionToString(\"\".concat(r?\"function \":\"\").concat(t),{findDependency:function findDependency(e,t){return\"utils\"===e?\"const \".concat(t,\" = \").concat(i[t].toString(),\";\"):null;},thisLookup:function thisLookup(t){if(\"context\"===t)return null;if(e.hasOwnProperty(t))return JSON.stringify(e[t]);throw new Error(\"unhandled thisLookup \".concat(t));}});}(F)),N.push(\"  innerKernel.getPixels = getPixels;\")),N.push(\"  return innerKernel;\");var V=[];return L.forEach(function(e){V.push(\"\".concat(e.getStringValueHandler()));}),\"function kernel(settings) {\\n  const { context, constants } = settings;\\n  \".concat(V.join(\"\"),\"\\n  \").concat(l||\"\",\"\\n\").concat(N.join(\"\\n\"),\"\\n}\");}};},{\"../../utils\":114,\"gl-wiretap\":3}],13:[function(e,t,r){var _e56=e(\"../kernel\"),n=_e56.Kernel,_e57=e(\"../../utils\"),i=_e57.utils,_e58=e(\"./texture/array-2-float\"),s=_e58.GLTextureArray2Float,_e59=e(\"./texture/array-2-float-2d\"),a=_e59.GLTextureArray2Float2D,_e60=e(\"./texture/array-2-float-3d\"),o=_e60.GLTextureArray2Float3D,_e61=e(\"./texture/array-3-float\"),u=_e61.GLTextureArray3Float,_e62=e(\"./texture/array-3-float-2d\"),l=_e62.GLTextureArray3Float2D,_e63=e(\"./texture/array-3-float-3d\"),h=_e63.GLTextureArray3Float3D,_e64=e(\"./texture/array-4-float\"),c=_e64.GLTextureArray4Float,_e65=e(\"./texture/array-4-float-2d\"),p=_e65.GLTextureArray4Float2D,_e66=e(\"./texture/array-4-float-3d\"),d=_e66.GLTextureArray4Float3D,_e67=e(\"./texture/float\"),m=_e67.GLTextureFloat,_e68=e(\"./texture/float-2d\"),f=_e68.GLTextureFloat2D,_e69=e(\"./texture/float-3d\"),g=_e69.GLTextureFloat3D,_e70=e(\"./texture/memory-optimized\"),x=_e70.GLTextureMemoryOptimized,_e71=e(\"./texture/memory-optimized-2d\"),y=_e71.GLTextureMemoryOptimized2D,_e72=e(\"./texture/memory-optimized-3d\"),b=_e72.GLTextureMemoryOptimized3D,_e73=e(\"./texture/unsigned\"),T=_e73.GLTextureUnsigned,_e74=e(\"./texture/unsigned-2d\"),v=_e74.GLTextureUnsigned2D,_e75=e(\"./texture/unsigned-3d\"),S=_e75.GLTextureUnsigned3D,_e76=e(\"./texture/graphical\"),A=_e76.GLTextureGraphical;var _={\"int\":\"Integer\",\"float\":\"Number\",vec2:\"Array(2)\",vec3:\"Array(3)\",vec4:\"Array(4)\"};t.exports={GLKernel:/*#__PURE__*/function(_n45){_inherits(GLKernel,_n45);var _super3=_createSuper(GLKernel);function GLKernel(e,t){var _this5;_classCallCheck(this,GLKernel);_this5=_super3.call(this,e,t),_this5.transferValues=null,_this5.formatValues=null,_this5.TextureConstructor=null,_this5.renderOutput=null,_this5.renderRawOutput=null,_this5.texSize=null,_this5.translatedSource=null,_this5.compiledFragmentShader=null,_this5.compiledVertexShader=null,_this5.switchingKernels=null,_this5._textureSwitched=null,_this5._mappedTextureSwitched=null;return _this5;}_createClass(GLKernel,[{key:\"setFixIntegerDivisionAccuracy\",value:function setFixIntegerDivisionAccuracy(e){return this.fixIntegerDivisionAccuracy=e,this;}},{key:\"setPrecision\",value:function setPrecision(e){return this.precision=e,this;}},{key:\"setFloatTextures\",value:function setFloatTextures(e){return i.warnDeprecated(\"method\",\"setFloatTextures\",\"setOptimizeFloatMemory\"),this.floatTextures=e,this;}},{key:\"checkTextureSize\",value:function checkTextureSize(){var e=this.constructor.features;if(this.texSize[0]>e.maxTextureSize||this.texSize[1]>e.maxTextureSize)throw new Error(\"Texture size [\".concat(this.texSize[0],\",\").concat(this.texSize[1],\"] generated by kernel is larger than supported size [\").concat(e.maxTextureSize,\",\").concat(e.maxTextureSize,\"]\"));}},{key:\"translateSource\",value:function translateSource(){throw new Error(\"\\\"translateSource\\\" not defined on \".concat(this.constructor.name));}},{key:\"pickRenderStrategy\",value:function pickRenderStrategy(e){if(this.graphical)return this.renderRawOutput=this.readPackedPixelsToUint8Array,this.transferValues=function(e){return e;},this.TextureConstructor=A,null;if(\"unsigned\"===this.precision){if(this.renderRawOutput=this.readPackedPixelsToUint8Array,this.transferValues=this.readPackedPixelsToFloat32Array,this.pipeline)switch(this.renderOutput=this.renderTexture,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToTextures),this.returnType){case\"LiteralInteger\":case\"Float\":case\"Number\":case\"Integer\":return this.output[2]>0?(this.TextureConstructor=S,null):this.output[1]>0?(this.TextureConstructor=v,null):(this.TextureConstructor=T,null);case\"Array(2)\":case\"Array(3)\":case\"Array(4)\":return this.requestFallback(e);}else switch(null!==this.subKernels&&(this.renderKernels=this.renderKernelsToArrays),this.returnType){case\"LiteralInteger\":case\"Float\":case\"Number\":case\"Integer\":return this.renderOutput=this.renderValues,this.output[2]>0?(this.TextureConstructor=S,this.formatValues=i.erect3DPackedFloat,null):this.output[1]>0?(this.TextureConstructor=v,this.formatValues=i.erect2DPackedFloat,null):(this.TextureConstructor=T,this.formatValues=i.erectPackedFloat,null);case\"Array(2)\":case\"Array(3)\":case\"Array(4)\":return this.requestFallback(e);}}else{if(\"single\"!==this.precision)throw new Error(\"unhandled precision of \\\"\".concat(this.precision,\"\\\"\"));if(this.renderRawOutput=this.readFloatPixelsToFloat32Array,this.transferValues=this.readFloatPixelsToFloat32Array,this.pipeline)switch(this.renderOutput=this.renderTexture,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToTextures),this.returnType){case\"LiteralInteger\":case\"Float\":case\"Number\":case\"Integer\":return this.optimizeFloatMemory?this.output[2]>0?(this.TextureConstructor=b,null):this.output[1]>0?(this.TextureConstructor=y,null):(this.TextureConstructor=x,null):this.output[2]>0?(this.TextureConstructor=g,null):this.output[1]>0?(this.TextureConstructor=f,null):(this.TextureConstructor=m,null);case\"Array(2)\":return this.output[2]>0?(this.TextureConstructor=o,null):this.output[1]>0?(this.TextureConstructor=a,null):(this.TextureConstructor=s,null);case\"Array(3)\":return this.output[2]>0?(this.TextureConstructor=h,null):this.output[1]>0?(this.TextureConstructor=l,null):(this.TextureConstructor=u,null);case\"Array(4)\":return this.output[2]>0?(this.TextureConstructor=d,null):this.output[1]>0?(this.TextureConstructor=p,null):(this.TextureConstructor=c,null);}if(this.renderOutput=this.renderValues,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToArrays),this.optimizeFloatMemory)switch(this.returnType){case\"LiteralInteger\":case\"Float\":case\"Number\":case\"Integer\":return this.output[2]>0?(this.TextureConstructor=b,this.formatValues=i.erectMemoryOptimized3DFloat,null):this.output[1]>0?(this.TextureConstructor=y,this.formatValues=i.erectMemoryOptimized2DFloat,null):(this.TextureConstructor=x,this.formatValues=i.erectMemoryOptimizedFloat,null);case\"Array(2)\":return this.output[2]>0?(this.TextureConstructor=o,this.formatValues=i.erect3DArray2,null):this.output[1]>0?(this.TextureConstructor=a,this.formatValues=i.erect2DArray2,null):(this.TextureConstructor=s,this.formatValues=i.erectArray2,null);case\"Array(3)\":return this.output[2]>0?(this.TextureConstructor=h,this.formatValues=i.erect3DArray3,null):this.output[1]>0?(this.TextureConstructor=l,this.formatValues=i.erect2DArray3,null):(this.TextureConstructor=u,this.formatValues=i.erectArray3,null);case\"Array(4)\":return this.output[2]>0?(this.TextureConstructor=d,this.formatValues=i.erect3DArray4,null):this.output[1]>0?(this.TextureConstructor=p,this.formatValues=i.erect2DArray4,null):(this.TextureConstructor=c,this.formatValues=i.erectArray4,null);}else switch(this.returnType){case\"LiteralInteger\":case\"Float\":case\"Number\":case\"Integer\":return this.output[2]>0?(this.TextureConstructor=g,this.formatValues=i.erect3DFloat,null):this.output[1]>0?(this.TextureConstructor=f,this.formatValues=i.erect2DFloat,null):(this.TextureConstructor=m,this.formatValues=i.erectFloat,null);case\"Array(2)\":return this.output[2]>0?(this.TextureConstructor=o,this.formatValues=i.erect3DArray2,null):this.output[1]>0?(this.TextureConstructor=a,this.formatValues=i.erect2DArray2,null):(this.TextureConstructor=s,this.formatValues=i.erectArray2,null);case\"Array(3)\":return this.output[2]>0?(this.TextureConstructor=h,this.formatValues=i.erect3DArray3,null):this.output[1]>0?(this.TextureConstructor=l,this.formatValues=i.erect2DArray3,null):(this.TextureConstructor=u,this.formatValues=i.erectArray3,null);case\"Array(4)\":return this.output[2]>0?(this.TextureConstructor=d,this.formatValues=i.erect3DArray4,null):this.output[1]>0?(this.TextureConstructor=p,this.formatValues=i.erect2DArray4,null):(this.TextureConstructor=c,this.formatValues=i.erectArray4,null);}}throw new Error(\"unhandled return type \\\"\".concat(this.returnType,\"\\\"\"));}},{key:\"getKernelString\",value:function getKernelString(){throw new Error(\"abstract method call\");}},{key:\"getMainResultTexture\",value:function getMainResultTexture(){switch(this.returnType){case\"LiteralInteger\":case\"Float\":case\"Integer\":case\"Number\":return this.getMainResultNumberTexture();case\"Array(2)\":return this.getMainResultArray2Texture();case\"Array(3)\":return this.getMainResultArray3Texture();case\"Array(4)\":return this.getMainResultArray4Texture();default:throw new Error(\"unhandled returnType type \".concat(this.returnType));}}},{key:\"getMainResultKernelNumberTexture\",value:function getMainResultKernelNumberTexture(){throw new Error(\"abstract method call\");}},{key:\"getMainResultSubKernelNumberTexture\",value:function getMainResultSubKernelNumberTexture(){throw new Error(\"abstract method call\");}},{key:\"getMainResultKernelArray2Texture\",value:function getMainResultKernelArray2Texture(){throw new Error(\"abstract method call\");}},{key:\"getMainResultSubKernelArray2Texture\",value:function getMainResultSubKernelArray2Texture(){throw new Error(\"abstract method call\");}},{key:\"getMainResultKernelArray3Texture\",value:function getMainResultKernelArray3Texture(){throw new Error(\"abstract method call\");}},{key:\"getMainResultSubKernelArray3Texture\",value:function getMainResultSubKernelArray3Texture(){throw new Error(\"abstract method call\");}},{key:\"getMainResultKernelArray4Texture\",value:function getMainResultKernelArray4Texture(){throw new Error(\"abstract method call\");}},{key:\"getMainResultSubKernelArray4Texture\",value:function getMainResultSubKernelArray4Texture(){throw new Error(\"abstract method call\");}},{key:\"getMainResultGraphical\",value:function getMainResultGraphical(){throw new Error(\"abstract method call\");}},{key:\"getMainResultMemoryOptimizedFloats\",value:function getMainResultMemoryOptimizedFloats(){throw new Error(\"abstract method call\");}},{key:\"getMainResultPackedPixels\",value:function getMainResultPackedPixels(){throw new Error(\"abstract method call\");}},{key:\"getMainResultString\",value:function getMainResultString(){return this.graphical?this.getMainResultGraphical():\"single\"===this.precision?this.optimizeFloatMemory?this.getMainResultMemoryOptimizedFloats():this.getMainResultTexture():this.getMainResultPackedPixels();}},{key:\"getMainResultNumberTexture\",value:function getMainResultNumberTexture(){return i.linesToString(this.getMainResultKernelNumberTexture())+i.linesToString(this.getMainResultSubKernelNumberTexture());}},{key:\"getMainResultArray2Texture\",value:function getMainResultArray2Texture(){return i.linesToString(this.getMainResultKernelArray2Texture())+i.linesToString(this.getMainResultSubKernelArray2Texture());}},{key:\"getMainResultArray3Texture\",value:function getMainResultArray3Texture(){return i.linesToString(this.getMainResultKernelArray3Texture())+i.linesToString(this.getMainResultSubKernelArray3Texture());}},{key:\"getMainResultArray4Texture\",value:function getMainResultArray4Texture(){return i.linesToString(this.getMainResultKernelArray4Texture())+i.linesToString(this.getMainResultSubKernelArray4Texture());}},{key:\"getFloatTacticDeclaration\",value:function getFloatTacticDeclaration(){return\"precision \".concat(this.getVariablePrecisionString(this.texSize,this.tactic),\" float;\\n\");}},{key:\"getIntTacticDeclaration\",value:function getIntTacticDeclaration(){return\"precision \".concat(this.getVariablePrecisionString(this.texSize,this.tactic,!0),\" int;\\n\");}},{key:\"getSampler2DTacticDeclaration\",value:function getSampler2DTacticDeclaration(){return\"precision \".concat(this.getVariablePrecisionString(this.texSize,this.tactic),\" sampler2D;\\n\");}},{key:\"getSampler2DArrayTacticDeclaration\",value:function getSampler2DArrayTacticDeclaration(){return\"precision \".concat(this.getVariablePrecisionString(this.texSize,this.tactic),\" sampler2DArray;\\n\");}},{key:\"renderTexture\",value:function renderTexture(){return this.immutable?this.texture.clone():this.texture;}},{key:\"readPackedPixelsToUint8Array\",value:function readPackedPixelsToUint8Array(){if(\"unsigned\"!==this.precision)throw new Error('Requires this.precision to be \"unsigned\"');var e=this.texSize,t=this.context,r=new Uint8Array(e[0]*e[1]*4);return t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,r),r;}},{key:\"readPackedPixelsToFloat32Array\",value:function readPackedPixelsToFloat32Array(){return new Float32Array(this.readPackedPixelsToUint8Array().buffer);}},{key:\"readFloatPixelsToFloat32Array\",value:function readFloatPixelsToFloat32Array(){if(\"single\"!==this.precision)throw new Error('Requires this.precision to be \"single\"');var e=this.texSize,t=this.context,r=e[0],n=e[1],i=new Float32Array(r*n*4);return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,i),i;}},{key:\"getPixels\",value:function getPixels(e){var t=this.context,r=this.output,_r40=_slicedToArray(r,2),n=_r40[0],s=_r40[1],a=new Uint8Array(n*s*4);return t.readPixels(0,0,n,s,t.RGBA,t.UNSIGNED_BYTE,a),new Uint8ClampedArray((e?a:i.flipPixels(a,n,s)).buffer);}},{key:\"renderKernelsToArrays\",value:function renderKernelsToArrays(){var e={result:this.renderOutput()};for(var _t50=0;_t50<this.subKernels.length;_t50++){e[this.subKernels[_t50].property]=this.mappedTextures[_t50].toArray();}return e;}},{key:\"renderKernelsToTextures\",value:function renderKernelsToTextures(){var e={result:this.renderOutput()};if(this.immutable)for(var _t51=0;_t51<this.subKernels.length;_t51++){e[this.subKernels[_t51].property]=this.mappedTextures[_t51].clone();}else for(var _t52=0;_t52<this.subKernels.length;_t52++){e[this.subKernels[_t52].property]=this.mappedTextures[_t52];}return e;}},{key:\"resetSwitchingKernels\",value:function resetSwitchingKernels(){var e=this.switchingKernels;return this.switchingKernels=null,e;}},{key:\"setOutput\",value:function setOutput(e){var t=this.toKernelOutput(e);if(this.program){if(!this.dynamicOutput)throw new Error(\"Resizing a kernel with dynamicOutput: false is not possible\");var _r41=[t[0],t[1]||1,t[2]||1],_n46=i.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},_r41),_s9=this.texSize;if(_s9){var _t53=this.getVariablePrecisionString(_s9,this.tactic),_r42=this.getVariablePrecisionString(_n46,this.tactic);if(_t53!==_r42)return this.debug&&console.warn(\"Precision requirement changed, asking GPU instance to recompile\"),void this.switchKernels({type:\"outputPrecisionMismatch\",precision:_r42,needed:e});}this.output=t,this.threadDim=_r41,this.texSize=_n46;var _a5=this.context;if(_a5.bindFramebuffer(_a5.FRAMEBUFFER,this.framebuffer),this.updateMaxTexSize(),this.framebuffer.width=this.texSize[0],this.framebuffer.height=this.texSize[1],_a5.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),this.canvas.width=this.maxTexSize[0],this.canvas.height=this.maxTexSize[1],this.texture&&this.texture[\"delete\"](),this.texture=null,this._setupOutputTexture(),this.mappedTextures&&this.mappedTextures.length>0){for(var _e77=0;_e77<this.mappedTextures.length;_e77++){this.mappedTextures[_e77][\"delete\"]();}this.mappedTextures=null,this._setupSubOutputTextures();}}else this.output=t;return this;}},{key:\"renderValues\",value:function renderValues(){return this.formatValues(this.transferValues(),this.output[0],this.output[1],this.output[2]);}},{key:\"switchKernels\",value:function switchKernels(e){this.switchingKernels?this.switchingKernels.push(e):this.switchingKernels=[e];}},{key:\"getVariablePrecisionString\",value:function getVariablePrecisionString(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.texSize;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.tactic;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;if(!t){if(!this.constructor.features.isSpeedTacticSupported)return\"highp\";var _t54=this.constructor.features[r?\"lowIntPrecision\":\"lowFloatPrecision\"],_n47=this.constructor.features[r?\"mediumIntPrecision\":\"mediumFloatPrecision\"],_i12=this.constructor.features[r?\"highIntPrecision\":\"highFloatPrecision\"],_s10=Math.log2(e[0]*e[1]);if(_s10<=_t54.rangeMax)return\"lowp\";if(_s10<=_n47.rangeMax)return\"mediump\";if(_s10<=_i12.rangeMax)return\"highp\";throw new Error(\"The required size exceeds that of the ability of your system\");}switch(t){case\"speed\":return\"lowp\";case\"balanced\":return\"mediump\";case\"precision\":return\"highp\";default:throw new Error(\"Unknown tactic \\\"\".concat(t,\"\\\" use \\\"speed\\\", \\\"balanced\\\", \\\"precision\\\", or empty for auto\"));}}},{key:\"updateTextureArgumentRefs\",value:function updateTextureArgumentRefs(e,t){if(this.immutable)if(this.texture.texture===t.texture){var _r43=e.prevArg;_r43&&(1===_r43.texture._refs&&(this.texture[\"delete\"](),this.texture=_r43.clone(),this._textureSwitched=!0),_r43[\"delete\"]()),e.prevArg=t.clone();}else if(this.mappedTextures&&this.mappedTextures.length>0){var _r44=this.mappedTextures;for(var _n48=0;_n48<_r44.length;_n48++){var _i13=_r44[_n48];if(_i13.texture===t.texture){var _s11=e.prevArg;return _s11&&(1===_s11.texture._refs&&(_i13[\"delete\"](),_r44[_n48]=_s11.clone(),this._mappedTextureSwitched[_n48]=!0),_s11[\"delete\"]()),void(e.prevArg=t.clone());}}}}},{key:\"onActivate\",value:function onActivate(e){if(this._textureSwitched=!0,this.texture=e.texture,this.mappedTextures){for(var _e78=0;_e78<this.mappedTextures.length;_e78++){this._mappedTextureSwitched[_e78]=!0;}this.mappedTextures=e.mappedTextures;}}},{key:\"initCanvas\",value:function initCanvas(){}}],[{key:\"mode\",get:function get(){return\"gpu\";}},{key:\"getIsFloatRead\",value:function getIsFloatRead(){var e=new this(\"function kernelFunction() {\\n      return 1;\\n    }\",{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[1],precision:\"single\",returnType:\"Number\",tactic:\"speed\"});e.build(),e.run();var t=e.renderOutput();return e.destroy(!0),1===t[0];}},{key:\"getIsIntegerDivisionAccurate\",value:function getIsIntegerDivisionAccurate(){var e=new this(function(e,t){return e[this.thread.x]/t[this.thread.x];}.toString(),{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[2],returnType:\"Number\",precision:\"unsigned\",tactic:\"speed\"}),t=[[6,6030401],[3,3991]];e.build.apply(e,t),e.run.apply(e,t);var r=e.renderOutput();return e.destroy(!0),2===r[0]&&1511===r[1];}},{key:\"getIsSpeedTacticSupported\",value:function getIsSpeedTacticSupported(){var e=new this(function(e){return e[this.thread.x];}.toString(),{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[4],returnType:\"Number\",precision:\"unsigned\",tactic:\"speed\"}),t=[[0,1,2,3]];e.build.apply(e,t),e.run.apply(e,t);var r=e.renderOutput();return e.destroy(!0),0===Math.round(r[0])&&1===Math.round(r[1])&&2===Math.round(r[2])&&3===Math.round(r[3]);}},{key:\"testCanvas\",get:function get(){throw new Error(\"\\\"testCanvas\\\" not defined on \".concat(this.name));}},{key:\"testContext\",get:function get(){throw new Error(\"\\\"testContext\\\" not defined on \".concat(this.name));}},{key:\"getFeatures\",value:function getFeatures(){var e=this.testContext,t=this.getIsDrawBuffers();return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),isSpeedTacticSupported:this.getIsSpeedTacticSupported(),isTextureFloat:this.getIsTextureFloat(),isDrawBuffers:t,kernelMap:t,channelCount:this.getChannelCount(),maxTextureSize:this.getMaxTextureSize(),lowIntPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_INT),lowFloatPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_FLOAT),mediumIntPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_INT),mediumFloatPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT),highIntPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT),highFloatPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT)});}},{key:\"setupFeatureChecks\",value:function setupFeatureChecks(){throw new Error(\"\\\"setupFeatureChecks\\\" not defined on \".concat(this.name));}},{key:\"getSignature\",value:function getSignature(e,t){return e.getVariablePrecisionString()+(t.length>0?\":\"+t.join(\",\"):\"\");}},{key:\"nativeFunctionArguments\",value:function nativeFunctionArguments(e){var t=[],r=[],n=[],i=/^[a-zA-Z_]/,s=/[a-zA-Z_0-9]/;var a=0,o=null,u=null;for(;a<e.length;){var _l2=e[a],_h=e[a+1],_c=n.length>0?n[n.length-1]:null;if(\"FUNCTION_ARGUMENTS\"!==_c||\"/\"!==_l2||\"*\"!==_h){if(\"MULTI_LINE_COMMENT\"!==_c||\"*\"!==_l2||\"/\"!==_h){if(\"FUNCTION_ARGUMENTS\"!==_c||\"/\"!==_l2||\"/\"!==_h){if(\"COMMENT\"!==_c||\"\\n\"!==_l2){if(null!==_c||\"(\"!==_l2){if(\"FUNCTION_ARGUMENTS\"===_c){if(\")\"===_l2){n.pop();break;}if(\"f\"===_l2&&\"l\"===_h&&\"o\"===e[a+2]&&\"a\"===e[a+3]&&\"t\"===e[a+4]&&\" \"===e[a+5]){n.push(\"DECLARE_VARIABLE\"),u=\"float\",o=\"\",a+=6;continue;}if(\"i\"===_l2&&\"n\"===_h&&\"t\"===e[a+2]&&\" \"===e[a+3]){n.push(\"DECLARE_VARIABLE\"),u=\"int\",o=\"\",a+=4;continue;}if(\"v\"===_l2&&\"e\"===_h&&\"c\"===e[a+2]&&\"2\"===e[a+3]&&\" \"===e[a+4]){n.push(\"DECLARE_VARIABLE\"),u=\"vec2\",o=\"\",a+=5;continue;}if(\"v\"===_l2&&\"e\"===_h&&\"c\"===e[a+2]&&\"3\"===e[a+3]&&\" \"===e[a+4]){n.push(\"DECLARE_VARIABLE\"),u=\"vec3\",o=\"\",a+=5;continue;}if(\"v\"===_l2&&\"e\"===_h&&\"c\"===e[a+2]&&\"4\"===e[a+3]&&\" \"===e[a+4]){n.push(\"DECLARE_VARIABLE\"),u=\"vec4\",o=\"\",a+=5;continue;}}else if(\"DECLARE_VARIABLE\"===_c){if(\"\"===o){if(\" \"===_l2){a++;continue;}if(!i.test(_l2))throw new Error(\"variable name is not expected string\");}o+=_l2,s.test(_h)||(n.pop(),r.push(o),t.push(_[u]));}a++;}else n.push(\"FUNCTION_ARGUMENTS\"),a++;}else n.pop(),a++;}else n.push(\"COMMENT\"),a+=2;}else n.pop(),a+=2;}else n.push(\"MULTI_LINE_COMMENT\"),a+=2;}if(n.length>0)throw new Error(\"GLSL function was not parsable\");return{argumentNames:r,argumentTypes:t};}},{key:\"nativeFunctionReturnType\",value:function nativeFunctionReturnType(e){return _[e.match(/int|float|vec[2-4]/)[0]];}},{key:\"combineKernels\",value:function combineKernels(e,t){e.apply(null,arguments);var _t$texSize=t.texSize,r=_t$texSize.texSize,n=_t$texSize.context,s=_t$texSize.threadDim;var a;if(\"single\"===t.precision){var _e79=r[0],_t55=Math.ceil(r[1]/4);a=new Float32Array(_e79*_t55*4*4),n.readPixels(0,0,_e79,4*_t55,n.RGBA,n.FLOAT,a);}else{var _e80=new Uint8Array(r[0]*r[1]*4);n.readPixels(0,0,r[0],r[1],n.RGBA,n.UNSIGNED_BYTE,_e80),a=new Float32Array(_e80.buffer);}return a=a.subarray(0,s[0]*s[1]*s[2]),1===t.output.length?a:2===t.output.length?i.splitArray(a,t.output[0]):3===t.output.length?i.splitArray(a,t.output[0]*t.output[1]).map(function(e){return i.splitArray(e,t.output[0]);}):void 0;}}]);return GLKernel;}(n)};},{\"../../utils\":114,\"../kernel\":36,\"./texture/array-2-float\":16,\"./texture/array-2-float-2d\":14,\"./texture/array-2-float-3d\":15,\"./texture/array-3-float\":19,\"./texture/array-3-float-2d\":17,\"./texture/array-3-float-3d\":18,\"./texture/array-4-float\":22,\"./texture/array-4-float-2d\":20,\"./texture/array-4-float-3d\":21,\"./texture/float\":25,\"./texture/float-2d\":23,\"./texture/float-3d\":24,\"./texture/graphical\":26,\"./texture/memory-optimized\":30,\"./texture/memory-optimized-2d\":28,\"./texture/memory-optimized-3d\":29,\"./texture/unsigned\":33,\"./texture/unsigned-2d\":31,\"./texture/unsigned-3d\":32}],14:[function(e,t,r){var _e81=e(\"../../../utils\"),n=_e81.utils,_e82=e(\"./float\"),i=_e82.GLTextureFloat;t.exports={GLTextureArray2Float2D:/*#__PURE__*/function(_i14){_inherits(GLTextureArray2Float2D,_i14);var _super4=_createSuper(GLTextureArray2Float2D);function GLTextureArray2Float2D(e){var _this6;_classCallCheck(this,GLTextureArray2Float2D);_this6=_super4.call(this,e),_this6.type=\"ArrayTexture(2)\";return _this6;}_createClass(GLTextureArray2Float2D,[{key:\"toArray\",value:function toArray(){return n.erect2DArray2(this.renderValues(),this.output[0],this.output[1]);}}]);return GLTextureArray2Float2D;}(i)};},{\"../../../utils\":114,\"./float\":25}],15:[function(e,t,r){var _e83=e(\"../../../utils\"),n=_e83.utils,_e84=e(\"./float\"),i=_e84.GLTextureFloat;t.exports={GLTextureArray2Float3D:/*#__PURE__*/function(_i15){_inherits(GLTextureArray2Float3D,_i15);var _super5=_createSuper(GLTextureArray2Float3D);function GLTextureArray2Float3D(e){var _this7;_classCallCheck(this,GLTextureArray2Float3D);_this7=_super5.call(this,e),_this7.type=\"ArrayTexture(2)\";return _this7;}_createClass(GLTextureArray2Float3D,[{key:\"toArray\",value:function toArray(){return n.erect3DArray2(this.renderValues(),this.output[0],this.output[1],this.output[2]);}}]);return GLTextureArray2Float3D;}(i)};},{\"../../../utils\":114,\"./float\":25}],16:[function(e,t,r){var _e85=e(\"../../../utils\"),n=_e85.utils,_e86=e(\"./float\"),i=_e86.GLTextureFloat;t.exports={GLTextureArray2Float:/*#__PURE__*/function(_i16){_inherits(GLTextureArray2Float,_i16);var _super6=_createSuper(GLTextureArray2Float);function GLTextureArray2Float(e){var _this8;_classCallCheck(this,GLTextureArray2Float);_this8=_super6.call(this,e),_this8.type=\"ArrayTexture(2)\";return _this8;}_createClass(GLTextureArray2Float,[{key:\"toArray\",value:function toArray(){return n.erectArray2(this.renderValues(),this.output[0],this.output[1]);}}]);return GLTextureArray2Float;}(i)};},{\"../../../utils\":114,\"./float\":25}],17:[function(e,t,r){var _e87=e(\"../../../utils\"),n=_e87.utils,_e88=e(\"./float\"),i=_e88.GLTextureFloat;t.exports={GLTextureArray3Float2D:/*#__PURE__*/function(_i17){_inherits(GLTextureArray3Float2D,_i17);var _super7=_createSuper(GLTextureArray3Float2D);function GLTextureArray3Float2D(e){var _this9;_classCallCheck(this,GLTextureArray3Float2D);_this9=_super7.call(this,e),_this9.type=\"ArrayTexture(3)\";return _this9;}_createClass(GLTextureArray3Float2D,[{key:\"toArray\",value:function toArray(){return n.erect2DArray3(this.renderValues(),this.output[0],this.output[1]);}}]);return GLTextureArray3Float2D;}(i)};},{\"../../../utils\":114,\"./float\":25}],18:[function(e,t,r){var _e89=e(\"../../../utils\"),n=_e89.utils,_e90=e(\"./float\"),i=_e90.GLTextureFloat;t.exports={GLTextureArray3Float3D:/*#__PURE__*/function(_i18){_inherits(GLTextureArray3Float3D,_i18);var _super8=_createSuper(GLTextureArray3Float3D);function GLTextureArray3Float3D(e){var _this10;_classCallCheck(this,GLTextureArray3Float3D);_this10=_super8.call(this,e),_this10.type=\"ArrayTexture(3)\";return _this10;}_createClass(GLTextureArray3Float3D,[{key:\"toArray\",value:function toArray(){return n.erect3DArray3(this.renderValues(),this.output[0],this.output[1],this.output[2]);}}]);return GLTextureArray3Float3D;}(i)};},{\"../../../utils\":114,\"./float\":25}],19:[function(e,t,r){var _e91=e(\"../../../utils\"),n=_e91.utils,_e92=e(\"./float\"),i=_e92.GLTextureFloat;t.exports={GLTextureArray3Float:/*#__PURE__*/function(_i19){_inherits(GLTextureArray3Float,_i19);var _super9=_createSuper(GLTextureArray3Float);function GLTextureArray3Float(e){var _this11;_classCallCheck(this,GLTextureArray3Float);_this11=_super9.call(this,e),_this11.type=\"ArrayTexture(3)\";return _this11;}_createClass(GLTextureArray3Float,[{key:\"toArray\",value:function toArray(){return n.erectArray3(this.renderValues(),this.output[0]);}}]);return GLTextureArray3Float;}(i)};},{\"../../../utils\":114,\"./float\":25}],20:[function(e,t,r){var _e93=e(\"../../../utils\"),n=_e93.utils,_e94=e(\"./float\"),i=_e94.GLTextureFloat;t.exports={GLTextureArray4Float2D:/*#__PURE__*/function(_i20){_inherits(GLTextureArray4Float2D,_i20);var _super10=_createSuper(GLTextureArray4Float2D);function GLTextureArray4Float2D(e){var _this12;_classCallCheck(this,GLTextureArray4Float2D);_this12=_super10.call(this,e),_this12.type=\"ArrayTexture(4)\";return _this12;}_createClass(GLTextureArray4Float2D,[{key:\"toArray\",value:function toArray(){return n.erect2DArray4(this.renderValues(),this.output[0],this.output[1]);}}]);return GLTextureArray4Float2D;}(i)};},{\"../../../utils\":114,\"./float\":25}],21:[function(e,t,r){var _e95=e(\"../../../utils\"),n=_e95.utils,_e96=e(\"./float\"),i=_e96.GLTextureFloat;t.exports={GLTextureArray4Float3D:/*#__PURE__*/function(_i21){_inherits(GLTextureArray4Float3D,_i21);var _super11=_createSuper(GLTextureArray4Float3D);function GLTextureArray4Float3D(e){var _this13;_classCallCheck(this,GLTextureArray4Float3D);_this13=_super11.call(this,e),_this13.type=\"ArrayTexture(4)\";return _this13;}_createClass(GLTextureArray4Float3D,[{key:\"toArray\",value:function toArray(){return n.erect3DArray4(this.renderValues(),this.output[0],this.output[1],this.output[2]);}}]);return GLTextureArray4Float3D;}(i)};},{\"../../../utils\":114,\"./float\":25}],22:[function(e,t,r){var _e97=e(\"../../../utils\"),n=_e97.utils,_e98=e(\"./float\"),i=_e98.GLTextureFloat;t.exports={GLTextureArray4Float:/*#__PURE__*/function(_i22){_inherits(GLTextureArray4Float,_i22);var _super12=_createSuper(GLTextureArray4Float);function GLTextureArray4Float(e){var _this14;_classCallCheck(this,GLTextureArray4Float);_this14=_super12.call(this,e),_this14.type=\"ArrayTexture(4)\";return _this14;}_createClass(GLTextureArray4Float,[{key:\"toArray\",value:function toArray(){return n.erectArray4(this.renderValues(),this.output[0]);}}]);return GLTextureArray4Float;}(i)};},{\"../../../utils\":114,\"./float\":25}],23:[function(e,t,r){var _e99=e(\"../../../utils\"),n=_e99.utils,_e100=e(\"./float\"),i=_e100.GLTextureFloat;t.exports={GLTextureFloat2D:/*#__PURE__*/function(_i23){_inherits(GLTextureFloat2D,_i23);var _super13=_createSuper(GLTextureFloat2D);function GLTextureFloat2D(e){var _this15;_classCallCheck(this,GLTextureFloat2D);_this15=_super13.call(this,e),_this15.type=\"ArrayTexture(1)\";return _this15;}_createClass(GLTextureFloat2D,[{key:\"toArray\",value:function toArray(){return n.erect2DFloat(this.renderValues(),this.output[0],this.output[1]);}}]);return GLTextureFloat2D;}(i)};},{\"../../../utils\":114,\"./float\":25}],24:[function(e,t,r){var _e101=e(\"../../../utils\"),n=_e101.utils,_e102=e(\"./float\"),i=_e102.GLTextureFloat;t.exports={GLTextureFloat3D:/*#__PURE__*/function(_i24){_inherits(GLTextureFloat3D,_i24);var _super14=_createSuper(GLTextureFloat3D);function GLTextureFloat3D(e){var _this16;_classCallCheck(this,GLTextureFloat3D);_this16=_super14.call(this,e),_this16.type=\"ArrayTexture(1)\";return _this16;}_createClass(GLTextureFloat3D,[{key:\"toArray\",value:function toArray(){return n.erect3DFloat(this.renderValues(),this.output[0],this.output[1],this.output[2]);}}]);return GLTextureFloat3D;}(i)};},{\"../../../utils\":114,\"./float\":25}],25:[function(e,t,r){var _e103=e(\"../../../utils\"),n=_e103.utils,_e104=e(\"./index\"),i=_e104.GLTexture;t.exports={GLTextureFloat:/*#__PURE__*/function(_i25){_inherits(GLTextureFloat,_i25);var _super15=_createSuper(GLTextureFloat);function GLTextureFloat(e){var _this17;_classCallCheck(this,GLTextureFloat);_this17=_super15.call(this,e),_this17.type=\"ArrayTexture(1)\";return _this17;}_createClass(GLTextureFloat,[{key:\"textureType\",get:function get(){return this.context.FLOAT;}},{key:\"renderRawOutput\",value:function renderRawOutput(){var e=this.context,t=this.size;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer()),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0);var r=new Float32Array(t[0]*t[1]*4);return e.readPixels(0,0,t[0],t[1],e.RGBA,e.FLOAT,r),r;}},{key:\"renderValues\",value:function renderValues(){return this._deleted?null:this.renderRawOutput();}},{key:\"toArray\",value:function toArray(){return n.erectFloat(this.renderValues(),this.output[0]);}}]);return GLTextureFloat;}(i)};},{\"../../../utils\":114,\"./index\":27}],26:[function(e,t,r){var _e105=e(\"./unsigned\"),n=_e105.GLTextureUnsigned;t.exports={GLTextureGraphical:/*#__PURE__*/function(_n49){_inherits(GLTextureGraphical,_n49);var _super16=_createSuper(GLTextureGraphical);function GLTextureGraphical(e){var _this18;_classCallCheck(this,GLTextureGraphical);_this18=_super16.call(this,e),_this18.type=\"ArrayTexture(4)\";return _this18;}_createClass(GLTextureGraphical,[{key:\"toArray\",value:function toArray(){return this.renderValues();}}]);return GLTextureGraphical;}(n)};},{\"./unsigned\":33}],27:[function(e,t,r){var _e106=e(\"../../../texture\"),n=_e106.Texture;function i(e,t){e.activeTexture(e.TEXTURE15),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);}t.exports={GLTexture:/*#__PURE__*/function(_n50){_inherits(GLTexture,_n50);var _super17=_createSuper(GLTexture);function GLTexture(){_classCallCheck(this,GLTexture);return _super17.apply(this,arguments);}_createClass(GLTexture,[{key:\"textureType\",get:function get(){throw new Error(\"\\\"textureType\\\" not implemented on \".concat(this.name));}},{key:\"clone\",value:function clone(){return new this.constructor(this);}},{key:\"beforeMutate\",value:function beforeMutate(){return this.texture._refs>1&&(this.newTexture(),!0);}},{key:\"cloneTexture\",value:function cloneTexture(){this.texture._refs--;var e=this.context,t=this.size,r=this.texture,n=this.kernel;n.debug&&console.warn(\"cloning internal texture\"),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer()),i(e,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.createTexture();i(e,s),e.texImage2D(e.TEXTURE_2D,0,this.internalFormat,t[0],t[1],0,this.textureFormat,this.textureType,null),e.copyTexSubImage2D(e.TEXTURE_2D,0,0,0,0,0,t[0],t[1]),s._refs=1,this.texture=s;}},{key:\"newTexture\",value:function newTexture(){this.texture._refs--;var e=this.context,t=this.size;this.kernel.debug&&console.warn(\"new internal texture\");var r=e.createTexture();i(e,r),e.texImage2D(e.TEXTURE_2D,0,this.internalFormat,t[0],t[1],0,this.textureFormat,this.textureType,null),r._refs=1,this.texture=r;}},{key:\"clear\",value:function clear(){if(this.texture._refs){this.texture._refs--;var _e107=this.context,_t56=this.texture=_e107.createTexture();i(_e107,_t56);var _r45=this.size;_t56._refs=1,_e107.texImage2D(_e107.TEXTURE_2D,0,this.internalFormat,_r45[0],_r45[1],0,this.textureFormat,this.textureType,null);}var e=this.context,t=this.texture;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer()),e.bindTexture(e.TEXTURE_2D,t),i(e,t),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);}},{key:\"delete\",value:function _delete(){this._deleted||(this._deleted=!0,this.texture._refs&&(this.texture._refs--,this.texture._refs)||this.context.deleteTexture(this.texture));}},{key:\"framebuffer\",value:function framebuffer(){return this._framebuffer||(this._framebuffer=this.kernel.getRawValueFramebuffer(this.size[0],this.size[1])),this._framebuffer;}}]);return GLTexture;}(n)};},{\"../../../texture\":113}],28:[function(e,t,r){var _e108=e(\"../../../utils\"),n=_e108.utils,_e109=e(\"./float\"),i=_e109.GLTextureFloat;t.exports={GLTextureMemoryOptimized2D:/*#__PURE__*/function(_i26){_inherits(GLTextureMemoryOptimized2D,_i26);var _super18=_createSuper(GLTextureMemoryOptimized2D);function GLTextureMemoryOptimized2D(e){var _this19;_classCallCheck(this,GLTextureMemoryOptimized2D);_this19=_super18.call(this,e),_this19.type=\"MemoryOptimizedNumberTexture\";return _this19;}_createClass(GLTextureMemoryOptimized2D,[{key:\"toArray\",value:function toArray(){return n.erectMemoryOptimized2DFloat(this.renderValues(),this.output[0],this.output[1]);}}]);return GLTextureMemoryOptimized2D;}(i)};},{\"../../../utils\":114,\"./float\":25}],29:[function(e,t,r){var _e110=e(\"../../../utils\"),n=_e110.utils,_e111=e(\"./float\"),i=_e111.GLTextureFloat;t.exports={GLTextureMemoryOptimized3D:/*#__PURE__*/function(_i27){_inherits(GLTextureMemoryOptimized3D,_i27);var _super19=_createSuper(GLTextureMemoryOptimized3D);function GLTextureMemoryOptimized3D(e){var _this20;_classCallCheck(this,GLTextureMemoryOptimized3D);_this20=_super19.call(this,e),_this20.type=\"MemoryOptimizedNumberTexture\";return _this20;}_createClass(GLTextureMemoryOptimized3D,[{key:\"toArray\",value:function toArray(){return n.erectMemoryOptimized3DFloat(this.renderValues(),this.output[0],this.output[1],this.output[2]);}}]);return GLTextureMemoryOptimized3D;}(i)};},{\"../../../utils\":114,\"./float\":25}],30:[function(e,t,r){var _e112=e(\"../../../utils\"),n=_e112.utils,_e113=e(\"./float\"),i=_e113.GLTextureFloat;t.exports={GLTextureMemoryOptimized:/*#__PURE__*/function(_i28){_inherits(GLTextureMemoryOptimized,_i28);var _super20=_createSuper(GLTextureMemoryOptimized);function GLTextureMemoryOptimized(e){var _this21;_classCallCheck(this,GLTextureMemoryOptimized);_this21=_super20.call(this,e),_this21.type=\"MemoryOptimizedNumberTexture\";return _this21;}_createClass(GLTextureMemoryOptimized,[{key:\"toArray\",value:function toArray(){return n.erectMemoryOptimizedFloat(this.renderValues(),this.output[0]);}}]);return GLTextureMemoryOptimized;}(i)};},{\"../../../utils\":114,\"./float\":25}],31:[function(e,t,r){var _e114=e(\"../../../utils\"),n=_e114.utils,_e115=e(\"./unsigned\"),i=_e115.GLTextureUnsigned;t.exports={GLTextureUnsigned2D:/*#__PURE__*/function(_i29){_inherits(GLTextureUnsigned2D,_i29);var _super21=_createSuper(GLTextureUnsigned2D);function GLTextureUnsigned2D(e){var _this22;_classCallCheck(this,GLTextureUnsigned2D);_this22=_super21.call(this,e),_this22.type=\"NumberTexture\";return _this22;}_createClass(GLTextureUnsigned2D,[{key:\"toArray\",value:function toArray(){return n.erect2DPackedFloat(this.renderValues(),this.output[0],this.output[1]);}}]);return GLTextureUnsigned2D;}(i)};},{\"../../../utils\":114,\"./unsigned\":33}],32:[function(e,t,r){var _e116=e(\"../../../utils\"),n=_e116.utils,_e117=e(\"./unsigned\"),i=_e117.GLTextureUnsigned;t.exports={GLTextureUnsigned3D:/*#__PURE__*/function(_i30){_inherits(GLTextureUnsigned3D,_i30);var _super22=_createSuper(GLTextureUnsigned3D);function GLTextureUnsigned3D(e){var _this23;_classCallCheck(this,GLTextureUnsigned3D);_this23=_super22.call(this,e),_this23.type=\"NumberTexture\";return _this23;}_createClass(GLTextureUnsigned3D,[{key:\"toArray\",value:function toArray(){return n.erect3DPackedFloat(this.renderValues(),this.output[0],this.output[1],this.output[2]);}}]);return GLTextureUnsigned3D;}(i)};},{\"../../../utils\":114,\"./unsigned\":33}],33:[function(e,t,r){var _e118=e(\"../../../utils\"),n=_e118.utils,_e119=e(\"./index\"),i=_e119.GLTexture;t.exports={GLTextureUnsigned:/*#__PURE__*/function(_i31){_inherits(GLTextureUnsigned,_i31);var _super23=_createSuper(GLTextureUnsigned);function GLTextureUnsigned(e){var _this24;_classCallCheck(this,GLTextureUnsigned);_this24=_super23.call(this,e),_this24.type=\"NumberTexture\";return _this24;}_createClass(GLTextureUnsigned,[{key:\"textureType\",get:function get(){return this.context.UNSIGNED_BYTE;}},{key:\"renderRawOutput\",value:function renderRawOutput(){var e=this.context;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer()),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0);var t=new Uint8Array(this.size[0]*this.size[1]*4);return e.readPixels(0,0,this.size[0],this.size[1],e.RGBA,e.UNSIGNED_BYTE,t),t;}},{key:\"renderValues\",value:function renderValues(){return this._deleted?null:new Float32Array(this.renderRawOutput().buffer);}},{key:\"toArray\",value:function toArray(){return n.erectPackedFloat(this.renderValues(),this.output[0]);}}]);return GLTextureUnsigned;}(i)};},{\"../../../utils\":114,\"./index\":27}],34:[function(e,t,r){var n=e(\"gl\"),_e120=e(\"../web-gl/kernel\"),i=_e120.WebGLKernel,_e121=e(\"../gl/kernel-string\"),s=_e121.glKernelString;var a=null,o=null,u=null,l=null,h=null;t.exports={HeadlessGLKernel:/*#__PURE__*/function(_i32){_inherits(HeadlessGLKernel,_i32);var _super24=_createSuper(HeadlessGLKernel);function HeadlessGLKernel(){_classCallCheck(this,HeadlessGLKernel);return _super24.apply(this,arguments);}_createClass(HeadlessGLKernel,[{key:\"initCanvas\",value:function initCanvas(){return{};}},{key:\"initContext\",value:function initContext(){return n(2,2,{preserveDrawingBuffer:!0});}},{key:\"initExtensions\",value:function initExtensions(){this.extensions={STACKGL_resize_drawingbuffer:this.context.getExtension(\"STACKGL_resize_drawingbuffer\"),STACKGL_destroy_context:this.context.getExtension(\"STACKGL_destroy_context\"),OES_texture_float:this.context.getExtension(\"OES_texture_float\"),OES_texture_float_linear:this.context.getExtension(\"OES_texture_float_linear\"),OES_element_index_uint:this.context.getExtension(\"OES_element_index_uint\"),WEBGL_draw_buffers:this.context.getExtension(\"WEBGL_draw_buffers\")};}},{key:\"build\",value:function build(){_get(_getPrototypeOf(HeadlessGLKernel.prototype),\"build\",this).apply(this,arguments),this.fallbackRequested||this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0],this.maxTexSize[1]);}},{key:\"destroyExtensions\",value:function destroyExtensions(){this.extensions.STACKGL_resize_drawingbuffer=null,this.extensions.STACKGL_destroy_context=null,this.extensions.OES_texture_float=null,this.extensions.OES_texture_float_linear=null,this.extensions.OES_element_index_uint=null,this.extensions.WEBGL_draw_buffers=null;}},{key:\"toString\",value:function toString(){return s(this.constructor,arguments,this,\"const gl = context || require('gl')(1, 1);\\n\",\"    if (!context) { gl.getExtension('STACKGL_destroy_context').destroy(); }\\n\");}},{key:\"setOutput\",value:function setOutput(e){return _get(_getPrototypeOf(HeadlessGLKernel.prototype),\"setOutput\",this).call(this,e),this.graphical&&this.extensions.STACKGL_resize_drawingbuffer&&this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0],this.maxTexSize[1]),this;}}],[{key:\"isSupported\",get:function get(){return null!==a?a:(this.setupFeatureChecks(),a=null!==u);}},{key:\"setupFeatureChecks\",value:function setupFeatureChecks(){if(o=null,l=null,\"function\"==typeof n)try{if(!(u=n(2,2,{preserveDrawingBuffer:!0}))||!u.getExtension)return;l={STACKGL_resize_drawingbuffer:u.getExtension(\"STACKGL_resize_drawingbuffer\"),STACKGL_destroy_context:u.getExtension(\"STACKGL_destroy_context\"),OES_texture_float:u.getExtension(\"OES_texture_float\"),OES_texture_float_linear:u.getExtension(\"OES_texture_float_linear\"),OES_element_index_uint:u.getExtension(\"OES_element_index_uint\"),WEBGL_draw_buffers:u.getExtension(\"WEBGL_draw_buffers\"),WEBGL_color_buffer_float:u.getExtension(\"WEBGL_color_buffer_float\")},h=this.getFeatures();}catch(e){console.warn(e);}}},{key:\"isContextMatch\",value:function isContextMatch(e){try{return\"ANGLE\"===e.getParameter(e.RENDERER);}catch(e){return!1;}}},{key:\"getIsTextureFloat\",value:function getIsTextureFloat(){return Boolean(l.OES_texture_float);}},{key:\"getIsDrawBuffers\",value:function getIsDrawBuffers(){return Boolean(l.WEBGL_draw_buffers);}},{key:\"getChannelCount\",value:function getChannelCount(){return l.WEBGL_draw_buffers?u.getParameter(l.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL):1;}},{key:\"getMaxTextureSize\",value:function getMaxTextureSize(){return u.getParameter(u.MAX_TEXTURE_SIZE);}},{key:\"testCanvas\",get:function get(){return o;}},{key:\"testContext\",get:function get(){return u;}},{key:\"features\",get:function get(){return h;}},{key:\"destroyContext\",value:function destroyContext(e){var t=e.getExtension(\"STACKGL_destroy_context\");t&&t.destroy&&t.destroy();}}]);return HeadlessGLKernel;}(i)};},{\"../gl/kernel-string\":12,\"../web-gl/kernel\":70,gl:2}],35:[function(e,t,r){t.exports={KernelValue:/*#__PURE__*/function(){function KernelValue(e,t){_classCallCheck(this,KernelValue);var r=t.name,n=t.kernel,i=t.context,s=t.checkContext,a=t.onRequestContextHandle,o=t.onUpdateValueMismatch,u=t.origin,l=t.strictIntegers,h=t.type,c=t.tactic;if(!r)throw new Error(\"name not set\");if(!h)throw new Error(\"type not set\");if(!u)throw new Error(\"origin not set\");if(\"user\"!==u&&\"constants\"!==u)throw new Error(\"origin must be \\\"user\\\" or \\\"constants\\\" value is \\\"\".concat(u,\"\\\"\"));if(!a)throw new Error(\"onRequestContextHandle is not set\");this.name=r,this.origin=u,this.tactic=c,this.varName=\"constants\"===u?\"constants.\".concat(r):r,this.kernel=n,this.strictIntegers=l,this.type=e.type||h,this.size=e.size||null,this.index=null,this.context=i,this.checkContext=null==s||s,this.contextHandle=null,this.onRequestContextHandle=a,this.onUpdateValueMismatch=o,this.forceUploadEachRun=null;}_createClass(KernelValue,[{key:\"id\",get:function get(){return\"\".concat(this.origin,\"_\").concat(name);}},{key:\"getSource\",value:function getSource(){throw new Error(\"\\\"getSource\\\" not defined on \".concat(this.constructor.name));}},{key:\"updateValue\",value:function updateValue(e){throw new Error(\"\\\"updateValue\\\" not defined on \".concat(this.constructor.name));}}]);return KernelValue;}()};},{}],36:[function(e,t,r){var _e122=e(\"../utils\"),n=_e122.utils,_e123=e(\"../input\"),i=_e123.Input;t.exports={Kernel:/*#__PURE__*/function(){function Kernel(e,t){_classCallCheck(this,Kernel);if(\"object\"!=_typeof(e)){if(\"string\"!=typeof e)throw new Error(\"source not a string\");if(!n.isFunctionString(e))throw new Error(\"source not a function string\");}this.useLegacyEncoder=!1,this.fallbackRequested=!1,this.onRequestFallback=null,this.argumentNames=\"string\"==typeof e?n.getArgumentNamesFromString(e):null,this.argumentTypes=null,this.argumentSizes=null,this.argumentBitRatios=null,this.kernelArguments=null,this.kernelConstants=null,this.forceUploadKernelConstants=null,this.source=e,this.output=null,this.debug=!1,this.graphical=!1,this.loopMaxIterations=0,this.constants=null,this.constantTypes=null,this.constantBitRatios=null,this.dynamicArguments=!1,this.dynamicOutput=!1,this.canvas=null,this.context=null,this.checkContext=null,this.gpu=null,this.functions=null,this.nativeFunctions=null,this.injectedNative=null,this.subKernels=null,this.validate=!0,this.immutable=!1,this.pipeline=!1,this.precision=null,this.tactic=null,this.plugins=null,this.returnType=null,this.leadingReturnStatement=null,this.followingReturnStatement=null,this.optimizeFloatMemory=null,this.strictIntegers=!1,this.fixIntegerDivisionAccuracy=null,this.built=!1,this.signature=null;}_createClass(Kernel,[{key:\"mergeSettings\",value:function mergeSettings(e){for(var _t57 in e){if(e.hasOwnProperty(_t57)&&this.hasOwnProperty(_t57)){switch(_t57){case\"output\":if(!Array.isArray(e.output)){this.setOutput(e.output);continue;}break;case\"functions\":this.functions=[];for(var _t58=0;_t58<e.functions.length;_t58++){this.addFunction(e.functions[_t58]);}continue;case\"graphical\":e[_t57]&&!e.hasOwnProperty(\"precision\")&&(this.precision=\"unsigned\"),this[_t57]=e[_t57];continue;case\"nativeFunctions\":if(!e.nativeFunctions)continue;this.nativeFunctions=[];for(var _t59=0;_t59<e.nativeFunctions.length;_t59++){var _r46=e.nativeFunctions[_t59],_n51=_r46.name,_i33=_r46.source;this.addNativeFunction(_n51,_i33,_r46);}continue;}this[_t57]=e[_t57];}}this.canvas||(this.canvas=this.initCanvas()),this.context||(this.context=this.initContext()),this.plugins||(this.plugins=this.initPlugins(e));}},{key:\"build\",value:function build(){throw new Error(\"\\\"build\\\" not defined on \".concat(this.constructor.name));}},{key:\"run\",value:function run(){throw new Error(\"\\\"run\\\" not defined on \".concat(this.constructor.name));}},{key:\"initCanvas\",value:function initCanvas(){throw new Error(\"\\\"initCanvas\\\" not defined on \".concat(this.constructor.name));}},{key:\"initContext\",value:function initContext(){throw new Error(\"\\\"initContext\\\" not defined on \".concat(this.constructor.name));}},{key:\"initPlugins\",value:function initPlugins(e){throw new Error(\"\\\"initPlugins\\\" not defined on \".concat(this.constructor.name));}},{key:\"addFunction\",value:function addFunction(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(e.name&&e.source&&e.argumentTypes&&\"returnType\"in e)this.functions.push(e);else if(\"settings\"in e&&\"source\"in e)this.functions.push(this.functionToIGPUFunction(e.source,e.settings));else{if(\"string\"!=typeof e&&\"function\"!=typeof e)throw new Error(\"function not properly defined\");this.functions.push(this.functionToIGPUFunction(e,t));}return this;}},{key:\"addNativeFunction\",value:function addNativeFunction(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var _ref=r.argumentTypes?function(e){var t=Object.keys(e),r=[];for(var _n52=0;_n52<t.length;_n52++){var _i34=t[_n52];r.push(e[_i34]);}return{argumentTypes:r,argumentNames:t};}(r.argumentTypes):this.constructor.nativeFunctionArguments(t)||{},n=_ref.argumentTypes,i=_ref.argumentNames;return this.nativeFunctions.push({name:e,source:t,settings:r,argumentTypes:n,argumentNames:i,returnType:r.returnType||this.constructor.nativeFunctionReturnType(t)}),this;}},{key:\"setupArguments\",value:function setupArguments(e){if(this.kernelArguments=[],this.argumentTypes)for(var _e124=0;_e124<this.argumentTypes.length;_e124++){this.kernelArguments.push({type:this.argumentTypes[_e124]});}else if(!this.argumentTypes){this.argumentTypes=[];for(var _t60=0;_t60<e.length;_t60++){var _r47=n.getVariableType(e[_t60],this.strictIntegers),_i35=\"Integer\"===_r47?\"Number\":_r47;this.argumentTypes.push(_i35),this.kernelArguments.push({type:_i35});}}this.argumentSizes=new Array(e.length),this.argumentBitRatios=new Int32Array(e.length);for(var _t61=0;_t61<e.length;_t61++){var _r48=e[_t61];this.argumentSizes[_t61]=_r48.constructor===i?_r48.size:null,this.argumentBitRatios[_t61]=this.getBitRatio(_r48);}if(this.argumentNames.length!==e.length)throw new Error(\"arguments are miss-aligned\");}},{key:\"setupConstants\",value:function setupConstants(){this.kernelConstants=[];var e=null===this.constantTypes;if(e&&(this.constantTypes={}),this.constantBitRatios={},this.constants)for(var _t62 in this.constants){if(e){var _e125=n.getVariableType(this.constants[_t62],this.strictIntegers);this.constantTypes[_t62]=_e125,this.kernelConstants.push({name:_t62,type:_e125});}else this.kernelConstants.push({name:_t62,type:this.constantTypes[_t62]});this.constantBitRatios[_t62]=this.getBitRatio(this.constants[_t62]);}}},{key:\"setOptimizeFloatMemory\",value:function setOptimizeFloatMemory(e){return this.optimizeFloatMemory=e,this;}},{key:\"toKernelOutput\",value:function toKernelOutput(e){return e.hasOwnProperty(\"x\")?e.hasOwnProperty(\"y\")?e.hasOwnProperty(\"z\")?[e.x,e.y,e.z]:[e.x,e.y]:[e.x]:e;}},{key:\"setOutput\",value:function setOutput(e){return this.output=this.toKernelOutput(e),this;}},{key:\"setDebug\",value:function setDebug(e){return this.debug=e,this;}},{key:\"setGraphical\",value:function setGraphical(e){return this.graphical=e,this.precision=\"unsigned\",this;}},{key:\"setLoopMaxIterations\",value:function setLoopMaxIterations(e){return this.loopMaxIterations=e,this;}},{key:\"setConstants\",value:function setConstants(e){return this.constants=e,this;}},{key:\"setConstantTypes\",value:function setConstantTypes(e){return this.constantTypes=e,this;}},{key:\"setFunctions\",value:function setFunctions(e){for(var _t63=0;_t63<e.length;_t63++){this.addFunction(e[_t63]);}return this;}},{key:\"setNativeFunctions\",value:function setNativeFunctions(e){for(var _t64=0;_t64<e.length;_t64++){var _r49=e[_t64],_n53=_r49.name,_i36=_r49.source;this.addNativeFunction(_n53,_i36,_r49);}return this;}},{key:\"setInjectedNative\",value:function setInjectedNative(e){return this.injectedNative=e,this;}},{key:\"setPipeline\",value:function setPipeline(e){return this.pipeline=e,this;}},{key:\"setPrecision\",value:function setPrecision(e){return this.precision=e,this;}},{key:\"setDimensions\",value:function setDimensions(e){return n.warnDeprecated(\"method\",\"setDimensions\",\"setOutput\"),this.output=e,this;}},{key:\"setOutputToTexture\",value:function setOutputToTexture(e){return n.warnDeprecated(\"method\",\"setOutputToTexture\",\"setPipeline\"),this.pipeline=e,this;}},{key:\"setImmutable\",value:function setImmutable(e){return this.immutable=e,this;}},{key:\"setCanvas\",value:function setCanvas(e){return this.canvas=e,this;}},{key:\"setStrictIntegers\",value:function setStrictIntegers(e){return this.strictIntegers=e,this;}},{key:\"setDynamicOutput\",value:function setDynamicOutput(e){return this.dynamicOutput=e,this;}},{key:\"setHardcodeConstants\",value:function setHardcodeConstants(e){return n.warnDeprecated(\"method\",\"setHardcodeConstants\"),this.setDynamicOutput(e),this.setDynamicArguments(e),this;}},{key:\"setDynamicArguments\",value:function setDynamicArguments(e){return this.dynamicArguments=e,this;}},{key:\"setUseLegacyEncoder\",value:function setUseLegacyEncoder(e){return this.useLegacyEncoder=e,this;}},{key:\"setWarnVarUsage\",value:function setWarnVarUsage(e){return n.warnDeprecated(\"method\",\"setWarnVarUsage\"),this;}},{key:\"getCanvas\",value:function getCanvas(){return n.warnDeprecated(\"method\",\"getCanvas\"),this.canvas;}},{key:\"getWebGl\",value:function getWebGl(){return n.warnDeprecated(\"method\",\"getWebGl\"),this.context;}},{key:\"setContext\",value:function setContext(e){return this.context=e,this;}},{key:\"setArgumentTypes\",value:function setArgumentTypes(e){if(Array.isArray(e))this.argumentTypes=e;else{this.argumentTypes=[];for(var _t65 in e){if(!e.hasOwnProperty(_t65))continue;var _r50=this.argumentNames.indexOf(_t65);if(-1===_r50)throw new Error(\"unable to find argument \".concat(_t65));this.argumentTypes[_r50]=e[_t65];}}return this;}},{key:\"setTactic\",value:function setTactic(e){return this.tactic=e,this;}},{key:\"requestFallback\",value:function requestFallback(e){if(!this.onRequestFallback)throw new Error(\"\\\"onRequestFallback\\\" not defined on \".concat(this.constructor.name));return this.fallbackRequested=!0,this.onRequestFallback(e);}},{key:\"validateSettings\",value:function validateSettings(){throw new Error(\"\\\"validateSettings\\\" not defined on \".concat(this.constructor.name));}},{key:\"addSubKernel\",value:function addSubKernel(e){if(null===this.subKernels&&(this.subKernels=[]),!e.source)throw new Error('subKernel missing \"source\" property');if(!e.property&&isNaN(e.property))throw new Error('subKernel missing \"property\" property');if(!e.name)throw new Error('subKernel missing \"name\" property');return this.subKernels.push(e),this;}},{key:\"destroy\",value:function destroy(e){throw new Error(\"\\\"destroy\\\" called on \".concat(this.constructor.name));}},{key:\"getBitRatio\",value:function getBitRatio(e){if(\"single\"===this.precision)return 4;if(Array.isArray(e[0]))return this.getBitRatio(e[0]);if(e.constructor===i)return this.getBitRatio(e.value);switch(e.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:return 1;case Uint16Array:case Int16Array:return 2;case Float32Array:case Int32Array:default:return 4;}}},{key:\"getPixels\",value:function getPixels(e){throw new Error(\"\\\"getPixels\\\" called on \".concat(this.constructor.name));}},{key:\"checkOutput\",value:function checkOutput(){if(!this.output||!n.isArray(this.output))throw new Error(\"kernel.output not an array\");if(this.output.length<1)throw new Error(\"kernel.output is empty, needs at least 1 value\");for(var _e126=0;_e126<this.output.length;_e126++){if(isNaN(this.output[_e126])||this.output[_e126]<1)throw new Error(\"\".concat(this.constructor.name,\".output[\").concat(_e126,\"] incorrectly defined as `\").concat(this.output[_e126],\"`, needs to be numeric, and greater than 0\"));}}},{key:\"prependString\",value:function prependString(e){throw new Error(\"\\\"prependString\\\" called on \".concat(this.constructor.name));}},{key:\"hasPrependString\",value:function hasPrependString(e){throw new Error(\"\\\"hasPrependString\\\" called on \".concat(this.constructor.name));}},{key:\"toJSON\",value:function toJSON(){return{settings:{output:this.output,pipeline:this.pipeline,argumentNames:this.argumentNames,argumentsTypes:this.argumentTypes,constants:this.constants,pluginNames:this.plugins?this.plugins.map(function(e){return e.name;}):null,returnType:this.returnType}};}},{key:\"buildSignature\",value:function buildSignature(e){var t=this.constructor;this.signature=t.getSignature(this,t.getArgumentTypes(this,e));}},{key:\"functionToIGPUFunction\",value:function functionToIGPUFunction(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(\"string\"!=typeof e&&\"function\"!=typeof e)throw new Error(\"source not a string or function\");var r=\"string\"==typeof e?e:e.toString();var i=[];return i=Array.isArray(t.argumentTypes)?t.argumentTypes:\"object\"==_typeof(t.argumentTypes)?n.getArgumentNamesFromString(r).map(function(e){return t.argumentTypes[e];})||[]:t.argumentTypes||[],{name:n.getFunctionNameFromString(r)||null,source:r,argumentTypes:i,returnType:t.returnType||null};}},{key:\"onActivate\",value:function onActivate(e){}}],[{key:\"isSupported\",get:function get(){throw new Error(\"\\\"isSupported\\\" not implemented on \".concat(this.name));}},{key:\"isContextMatch\",value:function isContextMatch(e){throw new Error(\"\\\"isContextMatch\\\" not implemented on \".concat(this.name));}},{key:\"getFeatures\",value:function getFeatures(){throw new Error(\"\\\"getFeatures\\\" not implemented on \".concat(this.name));}},{key:\"destroyContext\",value:function destroyContext(e){throw new Error(\"\\\"destroyContext\\\" called on \".concat(this.name));}},{key:\"nativeFunctionArguments\",value:function nativeFunctionArguments(){throw new Error(\"\\\"nativeFunctionArguments\\\" called on \".concat(this.name));}},{key:\"nativeFunctionReturnType\",value:function nativeFunctionReturnType(){throw new Error(\"\\\"nativeFunctionReturnType\\\" called on \".concat(this.name));}},{key:\"combineKernels\",value:function combineKernels(){throw new Error(\"\\\"combineKernels\\\" called on \".concat(this.name));}},{key:\"getArgumentTypes\",value:function getArgumentTypes(e,t){var r=new Array(t.length);for(var _i37=0;_i37<t.length;_i37++){var s=t[_i37],a=e.argumentTypes[_i37];if(s.type)r[_i37]=s.type;else switch(a){case\"Number\":case\"Integer\":case\"Float\":case\"ArrayTexture(1)\":r[_i37]=n.getVariableType(s);break;default:r[_i37]=a;}}return r;}},{key:\"getSignature\",value:function getSignature(e,t){throw new Error(\"\\\"getSignature\\\" not implemented on \".concat(this.name));}}]);return Kernel;}()};},{\"../input\":110,\"../utils\":114}],37:[function(e,t,r){var n=\"__HEADER__;\\n__FLOAT_TACTIC_DECLARATION__;\\n__INT_TACTIC_DECLARATION__;\\n__SAMPLER_2D_TACTIC_DECLARATION__;\\n\\nconst int LOOP_MAX = __LOOP_MAX__;\\n\\n__PLUGINS__;\\n__CONSTANTS__;\\n\\nvarying vec2 vTexCoord;\\n\\nfloat acosh(float x) {\\n  return log(x + sqrt(x * x - 1.0));\\n}\\n\\nfloat sinh(float x) {\\n  return (pow(\".concat(Math.E,\", x) - pow(\").concat(Math.E,\", -x)) / 2.0;\\n}\\n\\nfloat asinh(float x) {\\n  return log(x + sqrt(x * x + 1.0));\\n}\\n\\nfloat atan2(float v1, float v2) {\\n  if (v1 == 0.0 || v2 == 0.0) return 0.0;\\n  return atan(v1 / v2);\\n}\\n\\nfloat atanh(float x) {\\n  x = (x + 1.0) / (x - 1.0);\\n  if (x < 0.0) {\\n    return 0.5 * log(-x);\\n  }\\n  return 0.5 * log(x);\\n}\\n\\nfloat cbrt(float x) {\\n  if (x >= 0.0) {\\n    return pow(x, 1.0 / 3.0);\\n  } else {\\n    return -pow(x, 1.0 / 3.0);\\n  }\\n}\\n\\nfloat cosh(float x) {\\n  return (pow(\").concat(Math.E,\", x) + pow(\").concat(Math.E,\", -x)) / 2.0; \\n}\\n\\nfloat expm1(float x) {\\n  return pow(\").concat(Math.E,\", x) - 1.0; \\n}\\n\\nfloat fround(highp float x) {\\n  return x;\\n}\\n\\nfloat imul(float v1, float v2) {\\n  return float(int(v1) * int(v2));\\n}\\n\\nfloat log10(float x) {\\n  return log2(x) * (1.0 / log2(10.0));\\n}\\n\\nfloat log1p(float x) {\\n  return log(1.0 + x);\\n}\\n\\nfloat _pow(float v1, float v2) {\\n  if (v2 == 0.0) return 1.0;\\n  return pow(v1, v2);\\n}\\n\\nfloat tanh(float x) {\\n  float e = exp(2.0 * x);\\n  return (e - 1.0) / (e + 1.0);\\n}\\n\\nfloat trunc(float x) {\\n  if (x >= 0.0) {\\n    return floor(x); \\n  } else {\\n    return ceil(x);\\n  }\\n}\\n\\nvec4 _round(vec4 x) {\\n  return floor(x + 0.5);\\n}\\n\\nfloat _round(float x) {\\n  return floor(x + 0.5);\\n}\\n\\nconst int BIT_COUNT = 32;\\nint modi(int x, int y) {\\n  return x - y * (x / y);\\n}\\n\\nint bitwiseOr(int a, int b) {\\n  int result = 0;\\n  int n = 1;\\n  \\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {\\n      result += n;\\n    }\\n    a = a / 2;\\n    b = b / 2;\\n    n = n * 2;\\n    if(!(a > 0 || b > 0)) {\\n      break;\\n    }\\n  }\\n  return result;\\n}\\nint bitwiseXOR(int a, int b) {\\n  int result = 0;\\n  int n = 1;\\n  \\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {\\n      result += n;\\n    }\\n    a = a / 2;\\n    b = b / 2;\\n    n = n * 2;\\n    if(!(a > 0 || b > 0)) {\\n      break;\\n    }\\n  }\\n  return result;\\n}\\nint bitwiseAnd(int a, int b) {\\n  int result = 0;\\n  int n = 1;\\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\\n      result += n;\\n    }\\n    a = a / 2;\\n    b = b / 2;\\n    n = n * 2;\\n    if(!(a > 0 && b > 0)) {\\n      break;\\n    }\\n  }\\n  return result;\\n}\\nint bitwiseNot(int a) {\\n  int result = 0;\\n  int n = 1;\\n  \\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if (modi(a, 2) == 0) {\\n      result += n;    \\n    }\\n    a = a / 2;\\n    n = n * 2;\\n  }\\n  return result;\\n}\\nint bitwiseZeroFillLeftShift(int n, int shift) {\\n  int maxBytes = BIT_COUNT;\\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if (maxBytes >= n) {\\n      break;\\n    }\\n    maxBytes *= 2;\\n  }\\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if (i >= shift) {\\n      break;\\n    }\\n    n *= 2;\\n  }\\n\\n  int result = 0;\\n  int byteVal = 1;\\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if (i >= maxBytes) break;\\n    if (modi(n, 2) > 0) { result += byteVal; }\\n    n = int(n / 2);\\n    byteVal *= 2;\\n  }\\n  return result;\\n}\\n\\nint bitwiseSignedRightShift(int num, int shifts) {\\n  return int(floor(float(num) / pow(2.0, float(shifts))));\\n}\\n\\nint bitwiseZeroFillRightShift(int n, int shift) {\\n  int maxBytes = BIT_COUNT;\\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if (maxBytes >= n) {\\n      break;\\n    }\\n    maxBytes *= 2;\\n  }\\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if (i >= shift) {\\n      break;\\n    }\\n    n /= 2;\\n  }\\n  int result = 0;\\n  int byteVal = 1;\\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if (i >= maxBytes) break;\\n    if (modi(n, 2) > 0) { result += byteVal; }\\n    n = int(n / 2);\\n    byteVal *= 2;\\n  }\\n  return result;\\n}\\n\\nvec2 integerMod(vec2 x, float y) {\\n  vec2 res = floor(mod(x, y));\\n  return res * step(1.0 - floor(y), -res);\\n}\\n\\nvec3 integerMod(vec3 x, float y) {\\n  vec3 res = floor(mod(x, y));\\n  return res * step(1.0 - floor(y), -res);\\n}\\n\\nvec4 integerMod(vec4 x, vec4 y) {\\n  vec4 res = floor(mod(x, y));\\n  return res * step(1.0 - floor(y), -res);\\n}\\n\\nfloat integerMod(float x, float y) {\\n  float res = floor(mod(x, y));\\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\\n}\\n\\nint integerMod(int x, int y) {\\n  return x - (y * int(x / y));\\n}\\n\\n__DIVIDE_WITH_INTEGER_CHECK__;\\n\\n// Here be dragons!\\n// DO NOT OPTIMIZE THIS CODE\\n// YOU WILL BREAK SOMETHING ON SOMEBODY'S MACHINE\\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\\nfloat decode32(vec4 texel) {\\n  __DECODE32_ENDIANNESS__;\\n  texel *= 255.0;\\n  vec2 gte128;\\n  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;\\n  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;\\n  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);\\n  float res = exp2(_round(exponent));\\n  texel.b = texel.b - 128.0 * gte128.x;\\n  res = dot(texel, SCALE_FACTOR) * exp2(_round(exponent-23.0)) + res;\\n  res *= gte128.y * -2.0 + 1.0;\\n  return res;\\n}\\n\\nfloat decode16(vec4 texel, int index) {\\n  int channel = integerMod(index, 2);\\n  if (channel == 0) return texel.r * 255.0 + texel.g * 65280.0;\\n  if (channel == 1) return texel.b * 255.0 + texel.a * 65280.0;\\n  return 0.0;\\n}\\n\\nfloat decode8(vec4 texel, int index) {\\n  int channel = integerMod(index, 4);\\n  if (channel == 0) return texel.r * 255.0;\\n  if (channel == 1) return texel.g * 255.0;\\n  if (channel == 2) return texel.b * 255.0;\\n  if (channel == 3) return texel.a * 255.0;\\n  return 0.0;\\n}\\n\\nvec4 legacyEncode32(float f) {\\n  float F = abs(f);\\n  float sign = f < 0.0 ? 1.0 : 0.0;\\n  float exponent = floor(log2(F));\\n  float mantissa = (exp2(-exponent) * F);\\n  // exponent += floor(log2(mantissa));\\n  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\\n  texel.rg = integerMod(texel.rg, 256.0);\\n  texel.b = integerMod(texel.b, 128.0);\\n  texel.a = exponent*0.5 + 63.5;\\n  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\\n  texel = floor(texel);\\n  texel *= 0.003921569; // 1/255\\n  __ENCODE32_ENDIANNESS__;\\n  return texel;\\n}\\n\\n// https://github.com/gpujs/gpu.js/wiki/Encoder-details\\nvec4 encode32(float value) {\\n  if (value == 0.0) return vec4(0, 0, 0, 0);\\n\\n  float exponent;\\n  float mantissa;\\n  vec4  result;\\n  float sgn;\\n\\n  sgn = step(0.0, -value);\\n  value = abs(value);\\n\\n  exponent = floor(log2(value));\\n\\n  mantissa = value*pow(2.0, -exponent)-1.0;\\n  exponent = exponent+127.0;\\n  result   = vec4(0,0,0,0);\\n\\n  result.a = floor(exponent/2.0);\\n  exponent = exponent - result.a*2.0;\\n  result.a = result.a + 128.0*sgn;\\n\\n  result.b = floor(mantissa * 128.0);\\n  mantissa = mantissa - result.b / 128.0;\\n  result.b = result.b + exponent*128.0;\\n\\n  result.g = floor(mantissa*32768.0);\\n  mantissa = mantissa - result.g/32768.0;\\n\\n  result.r = floor(mantissa*8388608.0);\\n  return result/255.0;\\n}\\n// Dragons end here\\n\\nint index;\\nivec3 threadId;\\n\\nivec3 indexTo3D(int idx, ivec3 texDim) {\\n  int z = int(idx / (texDim.x * texDim.y));\\n  idx -= z * int(texDim.x * texDim.y);\\n  int y = int(idx / texDim.x);\\n  int x = int(integerMod(idx, texDim.x));\\n  return ivec3(x, y, z);\\n}\\n\\nfloat get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  int index = x + texDim.x * (y + texDim.y * z);\\n  int w = texSize.x;\\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\\n  vec4 texel = texture2D(tex, st / vec2(texSize));\\n  return decode32(texel);\\n}\\n\\nfloat get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  int index = x + texDim.x * (y + texDim.y * z);\\n  int w = texSize.x * 2;\\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\\n  vec4 texel = texture2D(tex, st / vec2(texSize.x * 2, texSize.y));\\n  return decode16(texel, index);\\n}\\n\\nfloat get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  int index = x + texDim.x * (y + texDim.y * z);\\n  int w = texSize.x * 4;\\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\\n  vec4 texel = texture2D(tex, st / vec2(texSize.x * 4, texSize.y));\\n  return decode8(texel, index);\\n}\\n\\nfloat getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  int index = x + texDim.x * (y + texDim.y * z);\\n  int channel = integerMod(index, 4);\\n  index = index / 4;\\n  int w = texSize.x;\\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\\n  vec4 texel = texture2D(tex, st / vec2(texSize));\\n  if (channel == 0) return texel.r;\\n  if (channel == 1) return texel.g;\\n  if (channel == 2) return texel.b;\\n  if (channel == 3) return texel.a;\\n  return 0.0;\\n}\\n\\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  int index = x + texDim.x * (y + texDim.y * z);\\n  int w = texSize.x;\\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\\n  return texture2D(tex, st / vec2(texSize));\\n}\\n\\nfloat getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\\n  return result[0];\\n}\\n\\nvec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\\n  return vec2(result[0], result[1]);\\n}\\n\\nvec2 getMemoryOptimizedVec2(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  int index = x + (texDim.x * (y + (texDim.y * z)));\\n  int channel = integerMod(index, 2);\\n  index = index / 2;\\n  int w = texSize.x;\\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\\n  vec4 texel = texture2D(tex, st / vec2(texSize));\\n  if (channel == 0) return vec2(texel.r, texel.g);\\n  if (channel == 1) return vec2(texel.b, texel.a);\\n  return vec2(0.0, 0.0);\\n}\\n\\nvec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\\n  return vec3(result[0], result[1], result[2]);\\n}\\n\\nvec3 getMemoryOptimizedVec3(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  int fieldIndex = 3 * (x + texDim.x * (y + texDim.y * z));\\n  int vectorIndex = fieldIndex / 4;\\n  int vectorOffset = fieldIndex - vectorIndex * 4;\\n  int readY = vectorIndex / texSize.x;\\n  int readX = vectorIndex - readY * texSize.x;\\n  vec4 tex1 = texture2D(tex, (vec2(readX, readY) + 0.5) / vec2(texSize));\\n  \\n  if (vectorOffset == 0) {\\n    return tex1.xyz;\\n  } else if (vectorOffset == 1) {\\n    return tex1.yzw;\\n  } else {\\n    readX++;\\n    if (readX >= texSize.x) {\\n      readX = 0;\\n      readY++;\\n    }\\n    vec4 tex2 = texture2D(tex, vec2(readX, readY) / vec2(texSize));\\n    if (vectorOffset == 2) {\\n      return vec3(tex1.z, tex1.w, tex2.x);\\n    } else {\\n      return vec3(tex1.w, tex2.x, tex2.y);\\n    }\\n  }\\n}\\n\\nvec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  return getImage2D(tex, texSize, texDim, z, y, x);\\n}\\n\\nvec4 getMemoryOptimizedVec4(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  int index = x + texDim.x * (y + texDim.y * z);\\n  int channel = integerMod(index, 2);\\n  int w = texSize.x;\\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\\n  vec4 texel = texture2D(tex, st / vec2(texSize));\\n  return vec4(texel.r, texel.g, texel.b, texel.a);\\n}\\n\\nvec4 actualColor;\\nvoid color(float r, float g, float b, float a) {\\n  actualColor = vec4(r,g,b,a);\\n}\\n\\nvoid color(float r, float g, float b) {\\n  color(r,g,b,1.0);\\n}\\n\\nvoid color(sampler2D image) {\\n  actualColor = texture2D(image, vTexCoord);\\n}\\n\\nfloat modulo(float number, float divisor) {\\n  if (number < 0.0) {\\n    number = abs(number);\\n    if (divisor < 0.0) {\\n      divisor = abs(divisor);\\n    }\\n    return -mod(number, divisor);\\n  }\\n  if (divisor < 0.0) {\\n    divisor = abs(divisor);\\n  }\\n  return mod(number, divisor);\\n}\\n\\n__INJECTED_NATIVE__;\\n__MAIN_CONSTANTS__;\\n__MAIN_ARGUMENTS__;\\n__KERNEL__;\\n\\nvoid main(void) {\\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\\n  __MAIN_RESULT__;\\n}\");t.exports={fragmentShader:n};},{}],38:[function(e,t,r){var _e127=e(\"../../utils\"),n=_e127.utils,_e128=e(\"../function-node\"),i=_e128.FunctionNode;var s={Array:\"sampler2D\",\"Array(2)\":\"vec2\",\"Array(3)\":\"vec3\",\"Array(4)\":\"vec4\",\"Matrix(2)\":\"mat2\",\"Matrix(3)\":\"mat3\",\"Matrix(4)\":\"mat4\",Array2D:\"sampler2D\",Array3D:\"sampler2D\",Boolean:\"bool\",Float:\"float\",Input:\"sampler2D\",Integer:\"int\",Number:\"float\",LiteralInteger:\"float\",NumberTexture:\"sampler2D\",MemoryOptimizedNumberTexture:\"sampler2D\",\"ArrayTexture(1)\":\"sampler2D\",\"ArrayTexture(2)\":\"sampler2D\",\"ArrayTexture(3)\":\"sampler2D\",\"ArrayTexture(4)\":\"sampler2D\",HTMLVideo:\"sampler2D\",HTMLCanvas:\"sampler2D\",OffscreenCanvas:\"sampler2D\",HTMLImage:\"sampler2D\",ImageBitmap:\"sampler2D\",ImageData:\"sampler2D\",HTMLImageArray:\"sampler2DArray\"},a={\"===\":\"==\",\"!==\":\"!=\"};t.exports={WebGLFunctionNode:/*#__PURE__*/function(_i38){_inherits(WebGLFunctionNode,_i38);var _super25=_createSuper(WebGLFunctionNode);function WebGLFunctionNode(e,t){var _this25;_classCallCheck(this,WebGLFunctionNode);_this25=_super25.call(this,e,t),t&&t.hasOwnProperty(\"fixIntegerDivisionAccuracy\")&&(_this25.fixIntegerDivisionAccuracy=t.fixIntegerDivisionAccuracy);return _this25;}_createClass(WebGLFunctionNode,[{key:\"astConditionalExpression\",value:function astConditionalExpression(e,t){if(\"ConditionalExpression\"!==e.type)throw this.astErrorOutput(\"Not a conditional expression\",e);var r=this.getType(e.consequent),n=this.getType(e.alternate);return null===r&&null===n?(t.push(\"if (\"),this.astGeneric(e.test,t),t.push(\") {\"),this.astGeneric(e.consequent,t),t.push(\";\"),t.push(\"} else {\"),this.astGeneric(e.alternate,t),t.push(\";\"),t.push(\"}\"),t):(t.push(\"(\"),this.astGeneric(e.test,t),t.push(\"?\"),this.astGeneric(e.consequent,t),t.push(\":\"),this.astGeneric(e.alternate,t),t.push(\")\"),t);}},{key:\"astFunction\",value:function astFunction(e,t){if(this.isRootKernel)t.push(\"void\");else{this.returnType||this.findLastReturn()&&(this.returnType=this.getType(e.body),\"LiteralInteger\"===this.returnType&&(this.returnType=\"Number\"));var _r51=this.returnType;if(_r51){var _e129=s[_r51];if(!_e129)throw new Error(\"unknown type \".concat(_r51));t.push(_e129);}else t.push(\"void\");}if(t.push(\" \"),t.push(this.name),t.push(\"(\"),!this.isRootKernel)for(var _r52=0;_r52<this.argumentNames.length;++_r52){var _i39=this.argumentNames[_r52];_r52>0&&t.push(\", \");var _a6=this.argumentTypes[this.argumentNames.indexOf(_i39)];if(!_a6)throw this.astErrorOutput(\"Unknown argument \".concat(_i39,\" type\"),e);\"LiteralInteger\"===_a6&&(this.argumentTypes[_r52]=_a6=\"Number\");var o=s[_a6];if(!o)throw this.astErrorOutput(\"Unexpected expression\",e);var u=n.sanitizeName(_i39);\"sampler2D\"===o||\"sampler2DArray\"===o?t.push(\"\".concat(o,\" user_\").concat(u,\",ivec2 user_\").concat(u,\"Size,ivec3 user_\").concat(u,\"Dim\")):t.push(\"\".concat(o,\" user_\").concat(u));}t.push(\") {\\n\");for(var _r53=0;_r53<e.body.body.length;++_r53){this.astGeneric(e.body.body[_r53],t),t.push(\"\\n\");}return t.push(\"}\\n\"),t;}},{key:\"astReturnStatement\",value:function astReturnStatement(e,t){if(!e.argument)throw this.astErrorOutput(\"Unexpected return statement\",e);this.pushState(\"skip-literal-correction\");var r=this.getType(e.argument);this.popState(\"skip-literal-correction\");var n=[];switch(this.returnType||(this.returnType=\"LiteralInteger\"===r||\"Integer\"===r?\"Number\":r),this.returnType){case\"LiteralInteger\":case\"Number\":case\"Float\":switch(r){case\"Integer\":n.push(\"float(\"),this.astGeneric(e.argument,n),n.push(\")\");break;case\"LiteralInteger\":this.castLiteralToFloat(e.argument,n),\"Integer\"===this.getType(e)&&(n.unshift(\"float(\"),n.push(\")\"));break;default:this.astGeneric(e.argument,n);}break;case\"Integer\":switch(r){case\"Float\":case\"Number\":this.castValueToInteger(e.argument,n);break;case\"LiteralInteger\":this.castLiteralToInteger(e.argument,n);break;default:this.astGeneric(e.argument,n);}break;case\"Array(4)\":case\"Array(3)\":case\"Array(2)\":case\"Matrix(2)\":case\"Matrix(3)\":case\"Matrix(4)\":case\"Input\":this.astGeneric(e.argument,n);break;default:throw this.astErrorOutput(\"unhandled return type \".concat(this.returnType),e);}return this.isRootKernel?(t.push(\"kernelResult = \".concat(n.join(\"\"),\";\")),t.push(\"return;\")):this.isSubKernel?(t.push(\"subKernelResult_\".concat(this.name,\" = \").concat(n.join(\"\"),\";\")),t.push(\"return subKernelResult_\".concat(this.name,\";\"))):t.push(\"return \".concat(n.join(\"\"),\";\")),t;}},{key:\"astLiteral\",value:function astLiteral(e,t){if(isNaN(e.value))throw this.astErrorOutput(\"Non-numeric literal not supported : \"+e.value,e);var r=this.astKey(e);return Number.isInteger(e.value)?this.isState(\"casting-to-integer\")||this.isState(\"building-integer\")?(this.literalTypes[r]=\"Integer\",t.push(\"\".concat(e.value))):(this.isState(\"casting-to-float\")||this.isState(\"building-float\"),this.literalTypes[r]=\"Number\",t.push(\"\".concat(e.value,\".0\"))):this.isState(\"casting-to-integer\")||this.isState(\"building-integer\")?(this.literalTypes[r]=\"Integer\",t.push(Math.round(e.value))):(this.literalTypes[r]=\"Number\",t.push(\"\".concat(e.value))),t;}},{key:\"astBinaryExpression\",value:function astBinaryExpression(e,t){if(this.checkAndUpconvertOperator(e,t))return t;if(this.fixIntegerDivisionAccuracy&&\"/\"===e.operator){switch(t.push(\"divWithIntCheck(\"),this.pushState(\"building-float\"),this.getType(e.left)){case\"Integer\":this.castValueToFloat(e.left,t);break;case\"LiteralInteger\":this.castLiteralToFloat(e.left,t);break;default:this.astGeneric(e.left,t);}switch(t.push(\", \"),this.getType(e.right)){case\"Integer\":this.castValueToFloat(e.right,t);break;case\"LiteralInteger\":this.castLiteralToFloat(e.right,t);break;default:this.astGeneric(e.right,t);}return this.popState(\"building-float\"),t.push(\")\"),t;}t.push(\"(\");var r=this.getType(e.left)||\"Number\",n=this.getType(e.right)||\"Number\";if(!r||!n)throw this.astErrorOutput(\"Unhandled binary expression\",e);var i=r+\" & \"+n;switch(i){case\"Integer & Integer\":this.pushState(\"building-integer\"),this.astGeneric(e.left,t),t.push(a[e.operator]||e.operator),this.astGeneric(e.right,t),this.popState(\"building-integer\");break;case\"Number & Float\":case\"Float & Number\":case\"Float & Float\":case\"Number & Number\":this.pushState(\"building-float\"),this.astGeneric(e.left,t),t.push(a[e.operator]||e.operator),this.astGeneric(e.right,t),this.popState(\"building-float\");break;case\"LiteralInteger & LiteralInteger\":this.isState(\"casting-to-integer\")||this.isState(\"building-integer\")?(this.pushState(\"building-integer\"),this.astGeneric(e.left,t),t.push(a[e.operator]||e.operator),this.astGeneric(e.right,t),this.popState(\"building-integer\")):(this.pushState(\"building-float\"),this.castLiteralToFloat(e.left,t),t.push(a[e.operator]||e.operator),this.castLiteralToFloat(e.right,t),this.popState(\"building-float\"));break;case\"Integer & Float\":case\"Integer & Number\":if((\">\"===e.operator||\"<\"===e.operator&&\"Literal\"===e.right.type)&&!Number.isInteger(e.right.value)){this.pushState(\"building-float\"),this.castValueToFloat(e.left,t),t.push(a[e.operator]||e.operator),this.astGeneric(e.right,t),this.popState(\"building-float\");break;}if(this.pushState(\"building-integer\"),this.astGeneric(e.left,t),t.push(a[e.operator]||e.operator),this.pushState(\"casting-to-integer\"),\"Literal\"===e.right.type){var _r54=[];if(this.astGeneric(e.right,_r54),\"Integer\"!==this.getType(e.right))throw this.astErrorOutput(\"Unhandled binary expression with literal\",e);t.push(_r54.join(\"\"));}else t.push(\"int(\"),this.astGeneric(e.right,t),t.push(\")\");this.popState(\"casting-to-integer\"),this.popState(\"building-integer\");break;case\"Integer & LiteralInteger\":this.pushState(\"building-integer\"),this.astGeneric(e.left,t),t.push(a[e.operator]||e.operator),this.castLiteralToInteger(e.right,t),this.popState(\"building-integer\");break;case\"Number & Integer\":this.pushState(\"building-float\"),this.astGeneric(e.left,t),t.push(a[e.operator]||e.operator),this.castValueToFloat(e.right,t),this.popState(\"building-float\");break;case\"Float & LiteralInteger\":case\"Number & LiteralInteger\":this.pushState(\"building-float\"),this.astGeneric(e.left,t),t.push(a[e.operator]||e.operator),this.castLiteralToFloat(e.right,t),this.popState(\"building-float\");break;case\"LiteralInteger & Float\":case\"LiteralInteger & Number\":this.isState(\"casting-to-integer\")?(this.pushState(\"building-integer\"),this.castLiteralToInteger(e.left,t),t.push(a[e.operator]||e.operator),this.castValueToInteger(e.right,t),this.popState(\"building-integer\")):(this.pushState(\"building-float\"),this.astGeneric(e.left,t),t.push(a[e.operator]||e.operator),this.pushState(\"casting-to-float\"),this.astGeneric(e.right,t),this.popState(\"casting-to-float\"),this.popState(\"building-float\"));break;case\"LiteralInteger & Integer\":this.pushState(\"building-integer\"),this.castLiteralToInteger(e.left,t),t.push(a[e.operator]||e.operator),this.astGeneric(e.right,t),this.popState(\"building-integer\");break;case\"Boolean & Boolean\":this.pushState(\"building-boolean\"),this.astGeneric(e.left,t),t.push(a[e.operator]||e.operator),this.astGeneric(e.right,t),this.popState(\"building-boolean\");break;case\"Float & Integer\":this.pushState(\"building-float\"),this.astGeneric(e.left,t),t.push(a[e.operator]||e.operator),this.castValueToFloat(e.right,t),this.popState(\"building-float\");break;default:throw this.astErrorOutput(\"Unhandled binary expression between \".concat(i),e);}return t.push(\")\"),t;}},{key:\"checkAndUpconvertOperator\",value:function checkAndUpconvertOperator(e,t){var r=this.checkAndUpconvertBitwiseOperators(e,t);if(r)return r;var n={\"%\":this.fixIntegerDivisionAccuracy?\"integerCorrectionModulo\":\"modulo\",\"**\":\"pow\"}[e.operator];if(!n)return null;switch(t.push(n),t.push(\"(\"),this.getType(e.left)){case\"Integer\":this.castValueToFloat(e.left,t);break;case\"LiteralInteger\":this.castLiteralToFloat(e.left,t);break;default:this.astGeneric(e.left,t);}switch(t.push(\",\"),this.getType(e.right)){case\"Integer\":this.castValueToFloat(e.right,t);break;case\"LiteralInteger\":this.castLiteralToFloat(e.right,t);break;default:this.astGeneric(e.right,t);}return t.push(\")\"),t;}},{key:\"checkAndUpconvertBitwiseOperators\",value:function checkAndUpconvertBitwiseOperators(e,t){var r={\"&\":\"bitwiseAnd\",\"|\":\"bitwiseOr\",\"^\":\"bitwiseXOR\",\"<<\":\"bitwiseZeroFillLeftShift\",\">>\":\"bitwiseSignedRightShift\",\">>>\":\"bitwiseZeroFillRightShift\"}[e.operator];if(!r)return null;switch(t.push(r),t.push(\"(\"),this.getType(e.left)){case\"Number\":case\"Float\":this.castValueToInteger(e.left,t);break;case\"LiteralInteger\":this.castLiteralToInteger(e.left,t);break;default:this.astGeneric(e.left,t);}switch(t.push(\",\"),this.getType(e.right)){case\"Number\":case\"Float\":this.castValueToInteger(e.right,t);break;case\"LiteralInteger\":this.castLiteralToInteger(e.right,t);break;default:this.astGeneric(e.right,t);}return t.push(\")\"),t;}},{key:\"checkAndUpconvertBitwiseUnary\",value:function checkAndUpconvertBitwiseUnary(e,t){var r={\"~\":\"bitwiseNot\"}[e.operator];if(!r)return null;switch(t.push(r),t.push(\"(\"),this.getType(e.argument)){case\"Number\":case\"Float\":this.castValueToInteger(e.argument,t);break;case\"LiteralInteger\":this.castLiteralToInteger(e.argument,t);break;default:this.astGeneric(e.argument,t);}return t.push(\")\"),t;}},{key:\"castLiteralToInteger\",value:function castLiteralToInteger(e,t){return this.pushState(\"casting-to-integer\"),this.astGeneric(e,t),this.popState(\"casting-to-integer\"),t;}},{key:\"castLiteralToFloat\",value:function castLiteralToFloat(e,t){return this.pushState(\"casting-to-float\"),this.astGeneric(e,t),this.popState(\"casting-to-float\"),t;}},{key:\"castValueToInteger\",value:function castValueToInteger(e,t){return this.pushState(\"casting-to-integer\"),t.push(\"int(\"),this.astGeneric(e,t),t.push(\")\"),this.popState(\"casting-to-integer\"),t;}},{key:\"castValueToFloat\",value:function castValueToFloat(e,t){return this.pushState(\"casting-to-float\"),t.push(\"float(\"),this.astGeneric(e,t),t.push(\")\"),this.popState(\"casting-to-float\"),t;}},{key:\"astIdentifierExpression\",value:function astIdentifierExpression(e,t){if(\"Identifier\"!==e.type)throw this.astErrorOutput(\"IdentifierExpression - not an Identifier\",e);var r=this.getType(e),i=n.sanitizeName(e.name);return\"Infinity\"===e.name?t.push(\"3.402823466e+38\"):\"Boolean\"===r&&this.argumentNames.indexOf(i)>-1?t.push(\"bool(user_\".concat(i,\")\")):t.push(\"user_\".concat(i)),t;}},{key:\"astForStatement\",value:function astForStatement(e,t){if(\"ForStatement\"!==e.type)throw this.astErrorOutput(\"Invalid for statement\",e);var r=[],n=[],i=[],s=[];var a=null;if(e.init){var _t66=e.init.declarations;_t66.length>1&&(a=!1),this.astGeneric(e.init,r);for(var _e130=0;_e130<_t66.length;_e130++){_t66[_e130].init&&\"Literal\"!==_t66[_e130].init.type&&(a=!1);}}else a=!1;if(e.test?this.astGeneric(e.test,n):a=!1,e.update?this.astGeneric(e.update,i):a=!1,e.body&&(this.pushState(\"loop-body\"),this.astGeneric(e.body,s),this.popState(\"loop-body\")),null===a&&(a=this.isSafe(e.init)&&this.isSafe(e.test)),a){var _e131=r.join(\"\"),_a7=\";\"!==_e131[_e131.length-1];t.push(\"for (\".concat(_e131).concat(_a7?\";\":\"\").concat(n.join(\"\"),\";\").concat(i.join(\"\"),\"){\\n\")),t.push(s.join(\"\")),t.push(\"}\\n\");}else{var _e132=this.getInternalVariableName(\"safeI\");r.length>0&&t.push(r.join(\"\"),\"\\n\"),t.push(\"for (int \".concat(_e132,\"=0;\").concat(_e132,\"<LOOP_MAX;\").concat(_e132,\"++){\\n\")),n.length>0&&t.push(\"if (!\".concat(n.join(\"\"),\") break;\\n\")),t.push(s.join(\"\")),t.push(\"\\n\".concat(i.join(\"\"),\";\")),t.push(\"}\\n\");}return t;}},{key:\"astWhileStatement\",value:function astWhileStatement(e,t){if(\"WhileStatement\"!==e.type)throw this.astErrorOutput(\"Invalid while statement\",e);var r=this.getInternalVariableName(\"safeI\");return t.push(\"for (int \".concat(r,\"=0;\").concat(r,\"<LOOP_MAX;\").concat(r,\"++){\\n\")),t.push(\"if (!\"),this.astGeneric(e.test,t),t.push(\") break;\\n\"),this.astGeneric(e.body,t),t.push(\"}\\n\"),t;}},{key:\"astDoWhileStatement\",value:function astDoWhileStatement(e,t){if(\"DoWhileStatement\"!==e.type)throw this.astErrorOutput(\"Invalid while statement\",e);var r=this.getInternalVariableName(\"safeI\");return t.push(\"for (int \".concat(r,\"=0;\").concat(r,\"<LOOP_MAX;\").concat(r,\"++){\\n\")),this.astGeneric(e.body,t),t.push(\"if (!\"),this.astGeneric(e.test,t),t.push(\") break;\\n\"),t.push(\"}\\n\"),t;}},{key:\"astAssignmentExpression\",value:function astAssignmentExpression(e,t){if(\"%=\"===e.operator)this.astGeneric(e.left,t),t.push(\"=\"),t.push(\"mod(\"),this.astGeneric(e.left,t),t.push(\",\"),this.astGeneric(e.right,t),t.push(\")\");else{if(\"**=\"!==e.operator){var _r55=this.getType(e.left),_n54=this.getType(e.right);return this.astGeneric(e.left,t),t.push(e.operator),\"Integer\"!==_r55&&\"Integer\"===_n54?(t.push(\"float(\"),this.astGeneric(e.right,t),t.push(\")\")):this.astGeneric(e.right,t),t;}this.astGeneric(e.left,t),t.push(\"=\"),t.push(\"pow(\"),this.astGeneric(e.left,t),t.push(\",\"),this.astGeneric(e.right,t),t.push(\")\");}}},{key:\"astBlockStatement\",value:function astBlockStatement(e,t){if(this.isState(\"loop-body\")){this.pushState(\"block-body\");for(var _r56=0;_r56<e.body.length;_r56++){this.astGeneric(e.body[_r56],t);}this.popState(\"block-body\");}else{t.push(\"{\\n\");for(var _r57=0;_r57<e.body.length;_r57++){this.astGeneric(e.body[_r57],t);}t.push(\"}\\n\");}return t;}},{key:\"astVariableDeclaration\",value:function astVariableDeclaration(e,t){var r=e.declarations;if(!r||!r[0]||!r[0].init)throw this.astErrorOutput(\"Unexpected expression\",e);var i=[];var a=null;var o=[];var u=[];for(var _t67=0;_t67<r.length;_t67++){var _i40=r[_t67],l=_i40.init,h=this.getDeclaration(_i40.id),c=this.getType(_i40.init);var p=c;\"LiteralInteger\"===p&&(p=\"Integer\"===h.suggestedType?\"Integer\":\"Number\");var d=s[p];if(!d)throw this.astErrorOutput(\"Markup type \".concat(p,\" not handled\"),e);var m=[];if(\"Integer\"===c&&\"Integer\"===p){if(h.valueType=\"Number\",0===_t67||null===a)m.push(\"float \");else if(p!==a)throw new Error(\"Unhandled declaration\");a=p,m.push(\"user_\".concat(n.sanitizeName(_i40.id.name),\"=\")),m.push(\"float(\"),this.astGeneric(l,m),m.push(\")\");}else h.valueType=p,0===_t67||null===a?m.push(\"\".concat(d,\" \")):p!==a&&(o.push(u.join(\",\")),u=[],m.push(\"\".concat(d,\" \"))),a=p,m.push(\"user_\".concat(n.sanitizeName(_i40.id.name),\"=\")),\"Number\"===c&&\"Integer\"===p?l.left&&\"Literal\"===l.left.type?this.astGeneric(l,m):(m.push(\"int(\"),this.astGeneric(l,m),m.push(\")\")):\"LiteralInteger\"===c&&\"Integer\"===p?this.castLiteralToInteger(l,m):this.astGeneric(l,m);u.push(m.join(\"\"));}return u.length>0&&o.push(u.join(\",\")),i.push(o.join(\";\")),t.push(i.join(\"\")),t.push(\";\"),t;}},{key:\"astIfStatement\",value:function astIfStatement(e,t){return t.push(\"if (\"),this.astGeneric(e.test,t),t.push(\")\"),\"BlockStatement\"===e.consequent.type?this.astGeneric(e.consequent,t):(t.push(\" {\\n\"),this.astGeneric(e.consequent,t),t.push(\"\\n}\\n\")),e.alternate&&(t.push(\"else \"),\"BlockStatement\"===e.alternate.type||\"IfStatement\"===e.alternate.type?this.astGeneric(e.alternate,t):(t.push(\" {\\n\"),this.astGeneric(e.alternate,t),t.push(\"\\n}\\n\"))),t;}},{key:\"astSwitchStatement\",value:function astSwitchStatement(e,t){if(\"SwitchStatement\"!==e.type)throw this.astErrorOutput(\"Invalid switch statement\",e);var r=e.discriminant,n=e.cases,i=this.getType(r),s=\"switchDiscriminant\".concat(this.astKey(e,\"_\"));switch(i){case\"Float\":case\"Number\":t.push(\"float \".concat(s,\" = \")),this.astGeneric(r,t),t.push(\";\\n\");break;case\"Integer\":t.push(\"int \".concat(s,\" = \")),this.astGeneric(r,t),t.push(\";\\n\");}if(1===n.length&&!n[0].test)return this.astGeneric(n[0].consequent,t),t;var a=!1,o=[],u=!1,l=!1;for(var _e133=0;_e133<n.length;_e133++){if(n[_e133].test){if(0!==_e133&&l?a?(t.push(\"\".concat(s,\" == \")),a=!1):t.push(\" else if (\".concat(s,\" == \")):(l=!0,t.push(\"if (\".concat(s,\" == \"))),\"Integer\"===i)switch(this.getType(n[_e133].test)){case\"Number\":case\"Float\":this.castValueToInteger(n[_e133].test,t);break;case\"LiteralInteger\":this.castLiteralToInteger(n[_e133].test,t);}else{if(\"Float\"!==i)throw new Error(\"unhanlded\");switch(this.getType(n[_e133].test)){case\"LiteralInteger\":this.castLiteralToFloat(n[_e133].test,t);break;case\"Integer\":this.castValueToFloat(n[_e133].test,t);}}if(!n[_e133].consequent||0===n[_e133].consequent.length){a=!0,t.push(\" || \");continue;}t.push(\") {\\n\");}else{if(n.length>_e133+1){u=!0,this.astGeneric(n[_e133].consequent,o);continue;}t.push(\" else {\\n\");}this.astGeneric(n[_e133].consequent,t),t.push(\"\\n}\");}return u&&(t.push(\" else {\"),t.push(o.join(\"\")),t.push(\"}\")),t;}},{key:\"astThisExpression\",value:function astThisExpression(e,t){return t.push(\"this\"),t;}},{key:\"astMemberExpression\",value:function astMemberExpression(e,t){var _this$getMemberExpres2=this.getMemberExpressionDetails(e),r=_this$getMemberExpres2.property,i=_this$getMemberExpres2.name,s=_this$getMemberExpres2.signature,a=_this$getMemberExpres2.origin,o=_this$getMemberExpres2.type,u=_this$getMemberExpres2.xProperty,l=_this$getMemberExpres2.yProperty,h=_this$getMemberExpres2.zProperty;switch(s){case\"value.thread.value\":case\"this.thread.value\":if(\"x\"!==i&&\"y\"!==i&&\"z\"!==i)throw this.astErrorOutput(\"Unexpected expression, expected `this.thread.x`, `this.thread.y`, or `this.thread.z`\",e);return t.push(\"threadId.\".concat(i)),t;case\"this.output.value\":if(this.dynamicOutput)switch(i){case\"x\":this.isState(\"casting-to-float\")?t.push(\"float(uOutputDim.x)\"):t.push(\"uOutputDim.x\");break;case\"y\":this.isState(\"casting-to-float\")?t.push(\"float(uOutputDim.y)\"):t.push(\"uOutputDim.y\");break;case\"z\":this.isState(\"casting-to-float\")?t.push(\"float(uOutputDim.z)\"):t.push(\"uOutputDim.z\");break;default:throw this.astErrorOutput(\"Unexpected expression\",e);}else switch(i){case\"x\":this.isState(\"casting-to-integer\")?t.push(this.output[0]):t.push(this.output[0],\".0\");break;case\"y\":this.isState(\"casting-to-integer\")?t.push(this.output[1]):t.push(this.output[1],\".0\");break;case\"z\":this.isState(\"casting-to-integer\")?t.push(this.output[2]):t.push(this.output[2],\".0\");break;default:throw this.astErrorOutput(\"Unexpected expression\",e);}return t;case\"value\":throw this.astErrorOutput(\"Unexpected expression\",e);case\"value[]\":case\"value[][]\":case\"value[][][]\":case\"value[][][][]\":case\"value.value\":if(\"Math\"===a)return t.push(Math[i]),t;var _l3=n.sanitizeName(i);switch(r){case\"r\":return t.push(\"user_\".concat(_l3,\".r\")),t;case\"g\":return t.push(\"user_\".concat(_l3,\".g\")),t;case\"b\":return t.push(\"user_\".concat(_l3,\".b\")),t;case\"a\":return t.push(\"user_\".concat(_l3,\".a\")),t;}break;case\"this.constants.value\":if(void 0===u)switch(o){case\"Array(2)\":case\"Array(3)\":case\"Array(4)\":return t.push(\"constants_\".concat(n.sanitizeName(i))),t;}case\"this.constants.value[]\":case\"this.constants.value[][]\":case\"this.constants.value[][][]\":case\"this.constants.value[][][][]\":break;case\"fn()[]\":return this.astCallExpression(e.object,t),t.push(\"[\"),t.push(this.memberExpressionPropertyMarkup(r)),t.push(\"]\"),t;case\"fn()[][]\":return this.astCallExpression(e.object.object,t),t.push(\"[\"),t.push(this.memberExpressionPropertyMarkup(e.object.property)),t.push(\"]\"),t.push(\"[\"),t.push(this.memberExpressionPropertyMarkup(e.property)),t.push(\"]\"),t;case\"[][]\":return this.astArrayExpression(e.object,t),t.push(\"[\"),t.push(this.memberExpressionPropertyMarkup(r)),t.push(\"]\"),t;default:throw this.astErrorOutput(\"Unexpected expression\",e);}if(!1===e.computed)switch(o){case\"Number\":case\"Integer\":case\"Float\":case\"Boolean\":return t.push(\"\".concat(a,\"_\").concat(n.sanitizeName(i))),t;}var c=\"\".concat(a,\"_\").concat(n.sanitizeName(i));switch(o){case\"Array(2)\":case\"Array(3)\":case\"Array(4)\":this.astGeneric(e.object,t),t.push(\"[\"),t.push(this.memberExpressionPropertyMarkup(u)),t.push(\"]\");break;case\"HTMLImageArray\":t.push(\"getImage3D(\".concat(c,\", \").concat(c,\"Size, \").concat(c,\"Dim, \")),this.memberExpressionXYZ(u,l,h,t),t.push(\")\");break;case\"ArrayTexture(1)\":t.push(\"getFloatFromSampler2D(\".concat(c,\", \").concat(c,\"Size, \").concat(c,\"Dim, \")),this.memberExpressionXYZ(u,l,h,t),t.push(\")\");break;case\"Array1D(2)\":case\"Array2D(2)\":case\"Array3D(2)\":t.push(\"getMemoryOptimizedVec2(\".concat(c,\", \").concat(c,\"Size, \").concat(c,\"Dim, \")),this.memberExpressionXYZ(u,l,h,t),t.push(\")\");break;case\"ArrayTexture(2)\":t.push(\"getVec2FromSampler2D(\".concat(c,\", \").concat(c,\"Size, \").concat(c,\"Dim, \")),this.memberExpressionXYZ(u,l,h,t),t.push(\")\");break;case\"Array1D(3)\":case\"Array2D(3)\":case\"Array3D(3)\":t.push(\"getMemoryOptimizedVec3(\".concat(c,\", \").concat(c,\"Size, \").concat(c,\"Dim, \")),this.memberExpressionXYZ(u,l,h,t),t.push(\")\");break;case\"ArrayTexture(3)\":t.push(\"getVec3FromSampler2D(\".concat(c,\", \").concat(c,\"Size, \").concat(c,\"Dim, \")),this.memberExpressionXYZ(u,l,h,t),t.push(\")\");break;case\"Array1D(4)\":case\"Array2D(4)\":case\"Array3D(4)\":t.push(\"getMemoryOptimizedVec4(\".concat(c,\", \").concat(c,\"Size, \").concat(c,\"Dim, \")),this.memberExpressionXYZ(u,l,h,t),t.push(\")\");break;case\"ArrayTexture(4)\":case\"HTMLCanvas\":case\"OffscreenCanvas\":case\"HTMLImage\":case\"ImageBitmap\":case\"ImageData\":case\"HTMLVideo\":t.push(\"getVec4FromSampler2D(\".concat(c,\", \").concat(c,\"Size, \").concat(c,\"Dim, \")),this.memberExpressionXYZ(u,l,h,t),t.push(\")\");break;case\"NumberTexture\":case\"Array\":case\"Array2D\":case\"Array3D\":case\"Array4D\":case\"Input\":case\"Number\":case\"Float\":case\"Integer\":if(\"single\"===this.precision)t.push(\"getMemoryOptimized32(\".concat(c,\", \").concat(c,\"Size, \").concat(c,\"Dim, \")),this.memberExpressionXYZ(u,l,h,t),t.push(\")\");else{var _e134=\"user\"===a?this.lookupFunctionArgumentBitRatio(this.name,i):this.constantBitRatios[i];switch(_e134){case 1:t.push(\"get8(\".concat(c,\", \").concat(c,\"Size, \").concat(c,\"Dim, \"));break;case 2:t.push(\"get16(\".concat(c,\", \").concat(c,\"Size, \").concat(c,\"Dim, \"));break;case 4:case 0:t.push(\"get32(\".concat(c,\", \").concat(c,\"Size, \").concat(c,\"Dim, \"));break;default:throw new Error(\"unhandled bit ratio of \".concat(_e134));}this.memberExpressionXYZ(u,l,h,t),t.push(\")\");}break;case\"MemoryOptimizedNumberTexture\":t.push(\"getMemoryOptimized32(\".concat(c,\", \").concat(c,\"Size, \").concat(c,\"Dim, \")),this.memberExpressionXYZ(u,l,h,t),t.push(\")\");break;case\"Matrix(2)\":case\"Matrix(3)\":case\"Matrix(4)\":t.push(\"\".concat(c,\"[\").concat(this.memberExpressionPropertyMarkup(l),\"]\")),l&&t.push(\"[\".concat(this.memberExpressionPropertyMarkup(u),\"]\"));break;default:throw new Error(\"unhandled member expression \\\"\".concat(o,\"\\\"\"));}return t;}},{key:\"astCallExpression\",value:function astCallExpression(e,t){if(!e.callee)throw this.astErrorOutput(\"Unknown CallExpression\",e);var r=null;var i=this.isAstMathFunction(e);if(!(r=i||e.callee.object&&\"ThisExpression\"===e.callee.object.type?e.callee.property.name:\"SequenceExpression\"!==e.callee.type||\"Literal\"!==e.callee.expressions[0].type||isNaN(e.callee.expressions[0].raw)?e.callee.name:e.callee.expressions[1].property.name))throw this.astErrorOutput(\"Unhandled function, couldn't find name\",e);switch(r){case\"pow\":r=\"_pow\";break;case\"round\":r=\"_round\";}if(this.calledFunctions.indexOf(r)<0&&this.calledFunctions.push(r),\"random\"===r&&this.plugins&&this.plugins.length>0)for(var _e135=0;_e135<this.plugins.length;_e135++){var _r58=this.plugins[_e135];if(\"Math.random()\"===_r58.functionMatch&&_r58.functionReplace)return t.push(_r58.functionReplace),t;}if(this.onFunctionCall&&this.onFunctionCall(this.name,r,e.arguments),t.push(r),t.push(\"(\"),i)for(var _r59=0;_r59<e.arguments.length;++_r59){var _n55=e.arguments[_r59],_i41=this.getType(_n55);switch(_r59>0&&t.push(\", \"),_i41){case\"Integer\":this.castValueToFloat(_n55,t);break;default:this.astGeneric(_n55,t);}}else{var _i42=this.lookupFunctionArgumentTypes(r)||[];for(var _s12=0;_s12<e.arguments.length;++_s12){var _a8=e.arguments[_s12];var o=_i42[_s12];_s12>0&&t.push(\", \");var u=this.getType(_a8);switch(o||(this.triggerImplyArgumentType(r,_s12,u,this),o=u),u){case\"Boolean\":this.astGeneric(_a8,t);continue;case\"Number\":case\"Float\":if(\"Integer\"===o){t.push(\"int(\"),this.astGeneric(_a8,t),t.push(\")\");continue;}if(\"Number\"===o||\"Float\"===o){this.astGeneric(_a8,t);continue;}if(\"LiteralInteger\"===o){this.castLiteralToFloat(_a8,t);continue;}break;case\"Integer\":if(\"Number\"===o||\"Float\"===o){t.push(\"float(\"),this.astGeneric(_a8,t),t.push(\")\");continue;}if(\"Integer\"===o){this.astGeneric(_a8,t);continue;}break;case\"LiteralInteger\":if(\"Integer\"===o){this.castLiteralToInteger(_a8,t);continue;}if(\"Number\"===o||\"Float\"===o){this.castLiteralToFloat(_a8,t);continue;}if(\"LiteralInteger\"===o){this.astGeneric(_a8,t);continue;}break;case\"Array(2)\":case\"Array(3)\":case\"Array(4)\":if(o===u){if(\"Identifier\"===_a8.type)t.push(\"user_\".concat(n.sanitizeName(_a8.name)));else{if(\"ArrayExpression\"!==_a8.type&&\"MemberExpression\"!==_a8.type&&\"CallExpression\"!==_a8.type)throw this.astErrorOutput(\"Unhandled argument type \".concat(_a8.type),e);this.astGeneric(_a8,t);}continue;}break;case\"HTMLCanvas\":case\"OffscreenCanvas\":case\"HTMLImage\":case\"ImageBitmap\":case\"ImageData\":case\"HTMLImageArray\":case\"HTMLVideo\":case\"ArrayTexture(1)\":case\"ArrayTexture(2)\":case\"ArrayTexture(3)\":case\"ArrayTexture(4)\":case\"Array\":case\"Input\":if(o===u){if(\"Identifier\"!==_a8.type)throw this.astErrorOutput(\"Unhandled argument type \".concat(_a8.type),e);this.triggerImplyArgumentBitRatio(this.name,_a8.name,r,_s12);var _i43=n.sanitizeName(_a8.name);t.push(\"user_\".concat(_i43,\",user_\").concat(_i43,\"Size,user_\").concat(_i43,\"Dim\"));continue;}}throw this.astErrorOutput(\"Unhandled argument combination of \".concat(u,\" and \").concat(o,\" for argument named \\\"\").concat(_a8.name,\"\\\"\"),e);}}return t.push(\")\"),t;}},{key:\"astArrayExpression\",value:function astArrayExpression(e,t){var r=this.getType(e),n=e.elements.length;switch(r){case\"Matrix(2)\":case\"Matrix(3)\":case\"Matrix(4)\":t.push(\"mat\".concat(n,\"(\"));break;default:t.push(\"vec\".concat(n,\"(\"));}for(var _r60=0;_r60<n;++_r60){_r60>0&&t.push(\", \");var _n56=e.elements[_r60];this.astGeneric(_n56,t);}return t.push(\")\"),t;}},{key:\"memberExpressionXYZ\",value:function memberExpressionXYZ(e,t,r,n){return r?n.push(this.memberExpressionPropertyMarkup(r),\", \"):n.push(\"0, \"),t?n.push(this.memberExpressionPropertyMarkup(t),\", \"):n.push(\"0, \"),n.push(this.memberExpressionPropertyMarkup(e)),n;}},{key:\"memberExpressionPropertyMarkup\",value:function memberExpressionPropertyMarkup(e){if(!e)throw new Error(\"Property not set\");var t=[];switch(this.getType(e)){case\"Number\":case\"Float\":this.castValueToInteger(e,t);break;case\"LiteralInteger\":this.castLiteralToInteger(e,t);break;default:this.astGeneric(e,t);}return t.join(\"\");}}]);return WebGLFunctionNode;}(i)};},{\"../../utils\":114,\"../function-node\":10}],39:[function(e,t,r){var _e136=e(\"./kernel-value/boolean\"),n=_e136.WebGLKernelValueBoolean,_e137=e(\"./kernel-value/float\"),i=_e137.WebGLKernelValueFloat,_e138=e(\"./kernel-value/integer\"),s=_e138.WebGLKernelValueInteger,_e139=e(\"./kernel-value/html-image\"),a=_e139.WebGLKernelValueHTMLImage,_e140=e(\"./kernel-value/dynamic-html-image\"),o=_e140.WebGLKernelValueDynamicHTMLImage,_e141=e(\"./kernel-value/html-video\"),u=_e141.WebGLKernelValueHTMLVideo,_e142=e(\"./kernel-value/dynamic-html-video\"),l=_e142.WebGLKernelValueDynamicHTMLVideo,_e143=e(\"./kernel-value/single-input\"),h=_e143.WebGLKernelValueSingleInput,_e144=e(\"./kernel-value/dynamic-single-input\"),c=_e144.WebGLKernelValueDynamicSingleInput,_e145=e(\"./kernel-value/unsigned-input\"),p=_e145.WebGLKernelValueUnsignedInput,_e146=e(\"./kernel-value/dynamic-unsigned-input\"),d=_e146.WebGLKernelValueDynamicUnsignedInput,_e147=e(\"./kernel-value/memory-optimized-number-texture\"),m=_e147.WebGLKernelValueMemoryOptimizedNumberTexture,_e148=e(\"./kernel-value/dynamic-memory-optimized-number-texture\"),f=_e148.WebGLKernelValueDynamicMemoryOptimizedNumberTexture,_e149=e(\"./kernel-value/number-texture\"),g=_e149.WebGLKernelValueNumberTexture,_e150=e(\"./kernel-value/dynamic-number-texture\"),x=_e150.WebGLKernelValueDynamicNumberTexture,_e151=e(\"./kernel-value/single-array\"),y=_e151.WebGLKernelValueSingleArray,_e152=e(\"./kernel-value/dynamic-single-array\"),b=_e152.WebGLKernelValueDynamicSingleArray,_e153=e(\"./kernel-value/single-array1d-i\"),T=_e153.WebGLKernelValueSingleArray1DI,_e154=e(\"./kernel-value/dynamic-single-array1d-i\"),v=_e154.WebGLKernelValueDynamicSingleArray1DI,_e155=e(\"./kernel-value/single-array2d-i\"),S=_e155.WebGLKernelValueSingleArray2DI,_e156=e(\"./kernel-value/dynamic-single-array2d-i\"),A=_e156.WebGLKernelValueDynamicSingleArray2DI,_e157=e(\"./kernel-value/single-array3d-i\"),_=_e157.WebGLKernelValueSingleArray3DI,_e158=e(\"./kernel-value/dynamic-single-array3d-i\"),E=_e158.WebGLKernelValueDynamicSingleArray3DI,_e159=e(\"./kernel-value/array2\"),w=_e159.WebGLKernelValueArray2,_e160=e(\"./kernel-value/array3\"),k=_e160.WebGLKernelValueArray3,_e161=e(\"./kernel-value/array4\"),I=_e161.WebGLKernelValueArray4,_e162=e(\"./kernel-value/unsigned-array\"),D=_e162.WebGLKernelValueUnsignedArray,_e163=e(\"./kernel-value/dynamic-unsigned-array\"),C=_e163.WebGLKernelValueDynamicUnsignedArray,$={unsigned:{dynamic:{Boolean:n,Integer:s,Float:i,Array:C,\"Array(2)\":w,\"Array(3)\":k,\"Array(4)\":I,\"Array1D(2)\":!1,\"Array1D(3)\":!1,\"Array1D(4)\":!1,\"Array2D(2)\":!1,\"Array2D(3)\":!1,\"Array2D(4)\":!1,\"Array3D(2)\":!1,\"Array3D(3)\":!1,\"Array3D(4)\":!1,Input:d,NumberTexture:x,\"ArrayTexture(1)\":x,\"ArrayTexture(2)\":x,\"ArrayTexture(3)\":x,\"ArrayTexture(4)\":x,MemoryOptimizedNumberTexture:f,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:!1,HTMLVideo:l},\"static\":{Boolean:n,Float:i,Integer:s,Array:D,\"Array(2)\":w,\"Array(3)\":k,\"Array(4)\":I,\"Array1D(2)\":!1,\"Array1D(3)\":!1,\"Array1D(4)\":!1,\"Array2D(2)\":!1,\"Array2D(3)\":!1,\"Array2D(4)\":!1,\"Array3D(2)\":!1,\"Array3D(3)\":!1,\"Array3D(4)\":!1,Input:p,NumberTexture:g,\"ArrayTexture(1)\":g,\"ArrayTexture(2)\":g,\"ArrayTexture(3)\":g,\"ArrayTexture(4)\":g,MemoryOptimizedNumberTexture:m,HTMLCanvas:a,OffscreenCanvas:a,HTMLImage:a,ImageBitmap:a,ImageData:a,HTMLImageArray:!1,HTMLVideo:u}},single:{dynamic:{Boolean:n,Integer:s,Float:i,Array:b,\"Array(2)\":w,\"Array(3)\":k,\"Array(4)\":I,\"Array1D(2)\":v,\"Array1D(3)\":v,\"Array1D(4)\":v,\"Array2D(2)\":A,\"Array2D(3)\":A,\"Array2D(4)\":A,\"Array3D(2)\":E,\"Array3D(3)\":E,\"Array3D(4)\":E,Input:c,NumberTexture:x,\"ArrayTexture(1)\":x,\"ArrayTexture(2)\":x,\"ArrayTexture(3)\":x,\"ArrayTexture(4)\":x,MemoryOptimizedNumberTexture:f,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:!1,HTMLVideo:l},\"static\":{Boolean:n,Float:i,Integer:s,Array:y,\"Array(2)\":w,\"Array(3)\":k,\"Array(4)\":I,\"Array1D(2)\":T,\"Array1D(3)\":T,\"Array1D(4)\":T,\"Array2D(2)\":S,\"Array2D(3)\":S,\"Array2D(4)\":S,\"Array3D(2)\":_,\"Array3D(3)\":_,\"Array3D(4)\":_,Input:h,NumberTexture:g,\"ArrayTexture(1)\":g,\"ArrayTexture(2)\":g,\"ArrayTexture(3)\":g,\"ArrayTexture(4)\":g,MemoryOptimizedNumberTexture:m,HTMLCanvas:a,OffscreenCanvas:a,HTMLImage:a,ImageBitmap:a,ImageData:a,HTMLImageArray:!1,HTMLVideo:u}}};t.exports={lookupKernelValueType:function lookupKernelValueType(e,t,r,n){if(!e)throw new Error(\"type missing\");if(!t)throw new Error(\"dynamic missing\");if(!r)throw new Error(\"precision missing\");n.type&&(e=n.type);var i=$[r][t];if(!1===i[e])return null;if(void 0===i[e])throw new Error(\"Could not find a KernelValue for \".concat(e));return i[e];},kernelValueMaps:$};},{\"./kernel-value/array2\":41,\"./kernel-value/array3\":42,\"./kernel-value/array4\":43,\"./kernel-value/boolean\":44,\"./kernel-value/dynamic-html-image\":45,\"./kernel-value/dynamic-html-video\":46,\"./kernel-value/dynamic-memory-optimized-number-texture\":47,\"./kernel-value/dynamic-number-texture\":48,\"./kernel-value/dynamic-single-array\":49,\"./kernel-value/dynamic-single-array1d-i\":50,\"./kernel-value/dynamic-single-array2d-i\":51,\"./kernel-value/dynamic-single-array3d-i\":52,\"./kernel-value/dynamic-single-input\":53,\"./kernel-value/dynamic-unsigned-array\":54,\"./kernel-value/dynamic-unsigned-input\":55,\"./kernel-value/float\":56,\"./kernel-value/html-image\":57,\"./kernel-value/html-video\":58,\"./kernel-value/integer\":60,\"./kernel-value/memory-optimized-number-texture\":61,\"./kernel-value/number-texture\":62,\"./kernel-value/single-array\":63,\"./kernel-value/single-array1d-i\":64,\"./kernel-value/single-array2d-i\":65,\"./kernel-value/single-array3d-i\":66,\"./kernel-value/single-input\":67,\"./kernel-value/unsigned-array\":68,\"./kernel-value/unsigned-input\":69}],40:[function(e,t,r){var _e164=e(\"./index\"),n=_e164.WebGLKernelValue,_e165=e(\"../../../input\"),i=_e165.Input;t.exports={WebGLKernelArray:/*#__PURE__*/function(_n57){_inherits(WebGLKernelArray,_n57);var _super26=_createSuper(WebGLKernelArray);function WebGLKernelArray(){_classCallCheck(this,WebGLKernelArray);return _super26.apply(this,arguments);}_createClass(WebGLKernelArray,[{key:\"checkSize\",value:function checkSize(e,t){if(!this.kernel.validate)return;var r=this.kernel.constructor.features.maxTextureSize;if(e>r||t>r)throw e>t?new Error(\"Argument texture width of \".concat(e,\" larger than maximum size of \").concat(r,\" for your GPU\")):e<t?new Error(\"Argument texture height of \".concat(t,\" larger than maximum size of \").concat(r,\" for your GPU\")):new Error(\"Argument texture height and width of \".concat(t,\" larger than maximum size of \").concat(r,\" for your GPU\"));}},{key:\"setup\",value:function setup(){this.requestTexture(),this.setupTexture(),this.defineTexture();}},{key:\"requestTexture\",value:function requestTexture(){this.texture=this.onRequestTexture();}},{key:\"defineTexture\",value:function defineTexture(){var e=this.context;e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);}},{key:\"setupTexture\",value:function setupTexture(){this.contextHandle=this.onRequestContextHandle(),this.index=this.onRequestIndex(),this.dimensionsId=this.id+\"Dim\",this.sizeId=this.id+\"Size\";}},{key:\"getBitRatio\",value:function getBitRatio(e){if(Array.isArray(e[0]))return this.getBitRatio(e[0]);if(e.constructor===i)return this.getBitRatio(e.value);switch(e.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:return 1;case Uint16Array:case Int16Array:return 2;case Float32Array:case Int32Array:default:return 4;}}},{key:\"destroy\",value:function destroy(){this.prevArg&&this.prevArg[\"delete\"](),this.context.deleteTexture(this.texture);}}]);return WebGLKernelArray;}(n)};},{\"../../../input\":110,\"./index\":59}],41:[function(e,t,r){var _e166=e(\"./index\"),n=_e166.WebGLKernelValue;t.exports={WebGLKernelValueArray2:/*#__PURE__*/function(_n58){_inherits(WebGLKernelValueArray2,_n58);var _super27=_createSuper(WebGLKernelValueArray2);function WebGLKernelValueArray2(e,t){var _this26;_classCallCheck(this,WebGLKernelValueArray2);_this26=_super27.call(this,e,t),_this26.uploadValue=e;return _this26;}_createClass(WebGLKernelValueArray2,[{key:\"getSource\",value:function getSource(e){return\"constants\"===this.origin?\"const vec2 \".concat(this.id,\" = vec2(\").concat(e[0],\",\").concat(e[1],\");\\n\"):\"uniform vec2 \".concat(this.id,\";\\n\");}},{key:\"getStringValueHandler\",value:function getStringValueHandler(){return\"constants\"===this.origin?\"\":\"const uploadValue_\".concat(this.name,\" = \").concat(this.varName,\";\\n\");}},{key:\"updateValue\",value:function updateValue(e){\"constants\"!==this.origin&&this.kernel.setUniform2fv(this.id,this.uploadValue=e);}}]);return WebGLKernelValueArray2;}(n)};},{\"./index\":59}],42:[function(e,t,r){var _e167=e(\"./index\"),n=_e167.WebGLKernelValue;t.exports={WebGLKernelValueArray3:/*#__PURE__*/function(_n59){_inherits(WebGLKernelValueArray3,_n59);var _super28=_createSuper(WebGLKernelValueArray3);function WebGLKernelValueArray3(e,t){var _this27;_classCallCheck(this,WebGLKernelValueArray3);_this27=_super28.call(this,e,t),_this27.uploadValue=e;return _this27;}_createClass(WebGLKernelValueArray3,[{key:\"getSource\",value:function getSource(e){return\"constants\"===this.origin?\"const vec3 \".concat(this.id,\" = vec3(\").concat(e[0],\",\").concat(e[1],\",\").concat(e[2],\");\\n\"):\"uniform vec3 \".concat(this.id,\";\\n\");}},{key:\"getStringValueHandler\",value:function getStringValueHandler(){return\"constants\"===this.origin?\"\":\"const uploadValue_\".concat(this.name,\" = \").concat(this.varName,\";\\n\");}},{key:\"updateValue\",value:function updateValue(e){\"constants\"!==this.origin&&this.kernel.setUniform3fv(this.id,this.uploadValue=e);}}]);return WebGLKernelValueArray3;}(n)};},{\"./index\":59}],43:[function(e,t,r){var _e168=e(\"./index\"),n=_e168.WebGLKernelValue;t.exports={WebGLKernelValueArray4:/*#__PURE__*/function(_n60){_inherits(WebGLKernelValueArray4,_n60);var _super29=_createSuper(WebGLKernelValueArray4);function WebGLKernelValueArray4(e,t){var _this28;_classCallCheck(this,WebGLKernelValueArray4);_this28=_super29.call(this,e,t),_this28.uploadValue=e;return _this28;}_createClass(WebGLKernelValueArray4,[{key:\"getSource\",value:function getSource(e){return\"constants\"===this.origin?\"const vec4 \".concat(this.id,\" = vec4(\").concat(e[0],\",\").concat(e[1],\",\").concat(e[2],\",\").concat(e[3],\");\\n\"):\"uniform vec4 \".concat(this.id,\";\\n\");}},{key:\"getStringValueHandler\",value:function getStringValueHandler(){return\"constants\"===this.origin?\"\":\"const uploadValue_\".concat(this.name,\" = \").concat(this.varName,\";\\n\");}},{key:\"updateValue\",value:function updateValue(e){\"constants\"!==this.origin&&this.kernel.setUniform4fv(this.id,this.uploadValue=e);}}]);return WebGLKernelValueArray4;}(n)};},{\"./index\":59}],44:[function(e,t,r){var _e169=e(\"../../../utils\"),n=_e169.utils,_e170=e(\"./index\"),i=_e170.WebGLKernelValue;t.exports={WebGLKernelValueBoolean:/*#__PURE__*/function(_i44){_inherits(WebGLKernelValueBoolean,_i44);var _super30=_createSuper(WebGLKernelValueBoolean);function WebGLKernelValueBoolean(e,t){var _this29;_classCallCheck(this,WebGLKernelValueBoolean);_this29=_super30.call(this,e,t),_this29.uploadValue=e;return _this29;}_createClass(WebGLKernelValueBoolean,[{key:\"getSource\",value:function getSource(e){return\"constants\"===this.origin?\"const bool \".concat(this.id,\" = \").concat(e,\";\\n\"):\"uniform bool \".concat(this.id,\";\\n\");}},{key:\"getStringValueHandler\",value:function getStringValueHandler(){return\"const uploadValue_\".concat(this.name,\" = \").concat(this.varName,\";\\n\");}},{key:\"updateValue\",value:function updateValue(e){\"constants\"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=e);}}]);return WebGLKernelValueBoolean;}(i)};},{\"../../../utils\":114,\"./index\":59}],45:[function(e,t,r){var _e171=e(\"../../../utils\"),n=_e171.utils,_e172=e(\"./html-image\"),i=_e172.WebGLKernelValueHTMLImage;t.exports={WebGLKernelValueDynamicHTMLImage:/*#__PURE__*/function(_i45){_inherits(WebGLKernelValueDynamicHTMLImage,_i45);var _super31=_createSuper(WebGLKernelValueDynamicHTMLImage);function WebGLKernelValueDynamicHTMLImage(){_classCallCheck(this,WebGLKernelValueDynamicHTMLImage);return _super31.apply(this,arguments);}_createClass(WebGLKernelValueDynamicHTMLImage,[{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"uniform ivec2 \".concat(this.sizeId),\"uniform ivec3 \".concat(this.dimensionsId)]);}},{key:\"updateValue\",value:function updateValue(e){var t=e.width,r=e.height;this.checkSize(t,r),this.dimensions=[t,r,1],this.textureSize=[t,r],this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),_get(_getPrototypeOf(WebGLKernelValueDynamicHTMLImage.prototype),\"updateValue\",this).call(this,e);}}]);return WebGLKernelValueDynamicHTMLImage;}(i)};},{\"../../../utils\":114,\"./html-image\":57}],46:[function(e,t,r){var _e173=e(\"./dynamic-html-image\"),n=_e173.WebGLKernelValueDynamicHTMLImage;t.exports={WebGLKernelValueDynamicHTMLVideo:/*#__PURE__*/function(_n61){_inherits(WebGLKernelValueDynamicHTMLVideo,_n61);var _super32=_createSuper(WebGLKernelValueDynamicHTMLVideo);function WebGLKernelValueDynamicHTMLVideo(){_classCallCheck(this,WebGLKernelValueDynamicHTMLVideo);return _super32.apply(this,arguments);}return _createClass(WebGLKernelValueDynamicHTMLVideo);}(n)};},{\"./dynamic-html-image\":45}],47:[function(e,t,r){var _e174=e(\"../../../utils\"),n=_e174.utils,_e175=e(\"./memory-optimized-number-texture\"),i=_e175.WebGLKernelValueMemoryOptimizedNumberTexture;t.exports={WebGLKernelValueDynamicMemoryOptimizedNumberTexture:/*#__PURE__*/function(_i46){_inherits(WebGLKernelValueDynamicMemoryOptimizedNumberTexture,_i46);var _super33=_createSuper(WebGLKernelValueDynamicMemoryOptimizedNumberTexture);function WebGLKernelValueDynamicMemoryOptimizedNumberTexture(){_classCallCheck(this,WebGLKernelValueDynamicMemoryOptimizedNumberTexture);return _super33.apply(this,arguments);}_createClass(WebGLKernelValueDynamicMemoryOptimizedNumberTexture,[{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"uniform ivec2 \".concat(this.sizeId),\"uniform ivec3 \".concat(this.dimensionsId)]);}},{key:\"updateValue\",value:function updateValue(e){this.dimensions=e.dimensions,this.checkSize(e.size[0],e.size[1]),this.textureSize=e.size,this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),_get(_getPrototypeOf(WebGLKernelValueDynamicMemoryOptimizedNumberTexture.prototype),\"updateValue\",this).call(this,e);}}]);return WebGLKernelValueDynamicMemoryOptimizedNumberTexture;}(i)};},{\"../../../utils\":114,\"./memory-optimized-number-texture\":61}],48:[function(e,t,r){var _e176=e(\"../../../utils\"),n=_e176.utils,_e177=e(\"./number-texture\"),i=_e177.WebGLKernelValueNumberTexture;t.exports={WebGLKernelValueDynamicNumberTexture:/*#__PURE__*/function(_i47){_inherits(WebGLKernelValueDynamicNumberTexture,_i47);var _super34=_createSuper(WebGLKernelValueDynamicNumberTexture);function WebGLKernelValueDynamicNumberTexture(){_classCallCheck(this,WebGLKernelValueDynamicNumberTexture);return _super34.apply(this,arguments);}_createClass(WebGLKernelValueDynamicNumberTexture,[{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"uniform ivec2 \".concat(this.sizeId),\"uniform ivec3 \".concat(this.dimensionsId)]);}},{key:\"updateValue\",value:function updateValue(e){this.dimensions=e.dimensions,this.checkSize(e.size[0],e.size[1]),this.textureSize=e.size,this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),_get(_getPrototypeOf(WebGLKernelValueDynamicNumberTexture.prototype),\"updateValue\",this).call(this,e);}}]);return WebGLKernelValueDynamicNumberTexture;}(i)};},{\"../../../utils\":114,\"./number-texture\":62}],49:[function(e,t,r){var _e178=e(\"../../../utils\"),n=_e178.utils,_e179=e(\"./single-array\"),i=_e179.WebGLKernelValueSingleArray;t.exports={WebGLKernelValueDynamicSingleArray:/*#__PURE__*/function(_i48){_inherits(WebGLKernelValueDynamicSingleArray,_i48);var _super35=_createSuper(WebGLKernelValueDynamicSingleArray);function WebGLKernelValueDynamicSingleArray(){_classCallCheck(this,WebGLKernelValueDynamicSingleArray);return _super35.apply(this,arguments);}_createClass(WebGLKernelValueDynamicSingleArray,[{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"uniform ivec2 \".concat(this.sizeId),\"uniform ivec3 \".concat(this.dimensionsId)]);}},{key:\"updateValue\",value:function updateValue(e){this.dimensions=n.getDimensions(e,!0),this.textureSize=n.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),_get(_getPrototypeOf(WebGLKernelValueDynamicSingleArray.prototype),\"updateValue\",this).call(this,e);}}]);return WebGLKernelValueDynamicSingleArray;}(i)};},{\"../../../utils\":114,\"./single-array\":63}],50:[function(e,t,r){var _e180=e(\"../../../utils\"),n=_e180.utils,_e181=e(\"./single-array1d-i\"),i=_e181.WebGLKernelValueSingleArray1DI;t.exports={WebGLKernelValueDynamicSingleArray1DI:/*#__PURE__*/function(_i49){_inherits(WebGLKernelValueDynamicSingleArray1DI,_i49);var _super36=_createSuper(WebGLKernelValueDynamicSingleArray1DI);function WebGLKernelValueDynamicSingleArray1DI(){_classCallCheck(this,WebGLKernelValueDynamicSingleArray1DI);return _super36.apply(this,arguments);}_createClass(WebGLKernelValueDynamicSingleArray1DI,[{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"uniform ivec2 \".concat(this.sizeId),\"uniform ivec3 \".concat(this.dimensionsId)]);}},{key:\"updateValue\",value:function updateValue(e){this.setShape(e),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),_get(_getPrototypeOf(WebGLKernelValueDynamicSingleArray1DI.prototype),\"updateValue\",this).call(this,e);}}]);return WebGLKernelValueDynamicSingleArray1DI;}(i)};},{\"../../../utils\":114,\"./single-array1d-i\":64}],51:[function(e,t,r){var _e182=e(\"../../../utils\"),n=_e182.utils,_e183=e(\"./single-array2d-i\"),i=_e183.WebGLKernelValueSingleArray2DI;t.exports={WebGLKernelValueDynamicSingleArray2DI:/*#__PURE__*/function(_i50){_inherits(WebGLKernelValueDynamicSingleArray2DI,_i50);var _super37=_createSuper(WebGLKernelValueDynamicSingleArray2DI);function WebGLKernelValueDynamicSingleArray2DI(){_classCallCheck(this,WebGLKernelValueDynamicSingleArray2DI);return _super37.apply(this,arguments);}_createClass(WebGLKernelValueDynamicSingleArray2DI,[{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"uniform ivec2 \".concat(this.sizeId),\"uniform ivec3 \".concat(this.dimensionsId)]);}},{key:\"updateValue\",value:function updateValue(e){this.setShape(e),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),_get(_getPrototypeOf(WebGLKernelValueDynamicSingleArray2DI.prototype),\"updateValue\",this).call(this,e);}}]);return WebGLKernelValueDynamicSingleArray2DI;}(i)};},{\"../../../utils\":114,\"./single-array2d-i\":65}],52:[function(e,t,r){var _e184=e(\"../../../utils\"),n=_e184.utils,_e185=e(\"./single-array3d-i\"),i=_e185.WebGLKernelValueSingleArray3DI;t.exports={WebGLKernelValueDynamicSingleArray3DI:/*#__PURE__*/function(_i51){_inherits(WebGLKernelValueDynamicSingleArray3DI,_i51);var _super38=_createSuper(WebGLKernelValueDynamicSingleArray3DI);function WebGLKernelValueDynamicSingleArray3DI(){_classCallCheck(this,WebGLKernelValueDynamicSingleArray3DI);return _super38.apply(this,arguments);}_createClass(WebGLKernelValueDynamicSingleArray3DI,[{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"uniform ivec2 \".concat(this.sizeId),\"uniform ivec3 \".concat(this.dimensionsId)]);}},{key:\"updateValue\",value:function updateValue(e){this.setShape(e),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),_get(_getPrototypeOf(WebGLKernelValueDynamicSingleArray3DI.prototype),\"updateValue\",this).call(this,e);}}]);return WebGLKernelValueDynamicSingleArray3DI;}(i)};},{\"../../../utils\":114,\"./single-array3d-i\":66}],53:[function(e,t,r){var _e186=e(\"../../../utils\"),n=_e186.utils,_e187=e(\"./single-input\"),i=_e187.WebGLKernelValueSingleInput;t.exports={WebGLKernelValueDynamicSingleInput:/*#__PURE__*/function(_i52){_inherits(WebGLKernelValueDynamicSingleInput,_i52);var _super39=_createSuper(WebGLKernelValueDynamicSingleInput);function WebGLKernelValueDynamicSingleInput(){_classCallCheck(this,WebGLKernelValueDynamicSingleInput);return _super39.apply(this,arguments);}_createClass(WebGLKernelValueDynamicSingleInput,[{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"uniform ivec2 \".concat(this.sizeId),\"uniform ivec3 \".concat(this.dimensionsId)]);}},{key:\"updateValue\",value:function updateValue(e){var _e$size=_slicedToArray(e.size,3),t=_e$size[0],r=_e$size[1],i=_e$size[2];this.dimensions=new Int32Array([t||1,r||1,i||1]),this.textureSize=n.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),_get(_getPrototypeOf(WebGLKernelValueDynamicSingleInput.prototype),\"updateValue\",this).call(this,e);}}]);return WebGLKernelValueDynamicSingleInput;}(i)};},{\"../../../utils\":114,\"./single-input\":67}],54:[function(e,t,r){var _e188=e(\"../../../utils\"),n=_e188.utils,_e189=e(\"./unsigned-array\"),i=_e189.WebGLKernelValueUnsignedArray;t.exports={WebGLKernelValueDynamicUnsignedArray:/*#__PURE__*/function(_i53){_inherits(WebGLKernelValueDynamicUnsignedArray,_i53);var _super40=_createSuper(WebGLKernelValueDynamicUnsignedArray);function WebGLKernelValueDynamicUnsignedArray(){_classCallCheck(this,WebGLKernelValueDynamicUnsignedArray);return _super40.apply(this,arguments);}_createClass(WebGLKernelValueDynamicUnsignedArray,[{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"uniform ivec2 \".concat(this.sizeId),\"uniform ivec3 \".concat(this.dimensionsId)]);}},{key:\"updateValue\",value:function updateValue(e){this.dimensions=n.getDimensions(e,!0),this.textureSize=n.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.checkSize(this.textureSize[0],this.textureSize[1]);var t=this.getTransferArrayType(e);this.preUploadValue=new t(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),_get(_getPrototypeOf(WebGLKernelValueDynamicUnsignedArray.prototype),\"updateValue\",this).call(this,e);}}]);return WebGLKernelValueDynamicUnsignedArray;}(i)};},{\"../../../utils\":114,\"./unsigned-array\":68}],55:[function(e,t,r){var _e190=e(\"../../../utils\"),n=_e190.utils,_e191=e(\"./unsigned-input\"),i=_e191.WebGLKernelValueUnsignedInput;t.exports={WebGLKernelValueDynamicUnsignedInput:/*#__PURE__*/function(_i54){_inherits(WebGLKernelValueDynamicUnsignedInput,_i54);var _super41=_createSuper(WebGLKernelValueDynamicUnsignedInput);function WebGLKernelValueDynamicUnsignedInput(){_classCallCheck(this,WebGLKernelValueDynamicUnsignedInput);return _super41.apply(this,arguments);}_createClass(WebGLKernelValueDynamicUnsignedInput,[{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"uniform ivec2 \".concat(this.sizeId),\"uniform ivec3 \".concat(this.dimensionsId)]);}},{key:\"updateValue\",value:function updateValue(e){var _e$size2=_slicedToArray(e.size,3),t=_e$size2[0],r=_e$size2[1],i=_e$size2[2];this.dimensions=new Int32Array([t||1,r||1,i||1]),this.textureSize=n.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.checkSize(this.textureSize[0],this.textureSize[1]);var s=this.getTransferArrayType(e.value);this.preUploadValue=new s(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),_get(_getPrototypeOf(WebGLKernelValueDynamicUnsignedInput.prototype),\"updateValue\",this).call(this,e);}}]);return WebGLKernelValueDynamicUnsignedInput;}(i)};},{\"../../../utils\":114,\"./unsigned-input\":69}],56:[function(e,t,r){var _e192=e(\"../../../utils\"),n=_e192.utils,_e193=e(\"./index\"),i=_e193.WebGLKernelValue;t.exports={WebGLKernelValueFloat:/*#__PURE__*/function(_i55){_inherits(WebGLKernelValueFloat,_i55);var _super42=_createSuper(WebGLKernelValueFloat);function WebGLKernelValueFloat(e,t){var _this30;_classCallCheck(this,WebGLKernelValueFloat);_this30=_super42.call(this,e,t),_this30.uploadValue=e;return _this30;}_createClass(WebGLKernelValueFloat,[{key:\"getStringValueHandler\",value:function getStringValueHandler(){return\"const uploadValue_\".concat(this.name,\" = \").concat(this.varName,\";\\n\");}},{key:\"getSource\",value:function getSource(e){return\"constants\"===this.origin?Number.isInteger(e)?\"const float \".concat(this.id,\" = \").concat(e,\".0;\\n\"):\"const float \".concat(this.id,\" = \").concat(e,\";\\n\"):\"uniform float \".concat(this.id,\";\\n\");}},{key:\"updateValue\",value:function updateValue(e){\"constants\"!==this.origin&&this.kernel.setUniform1f(this.id,this.uploadValue=e);}}]);return WebGLKernelValueFloat;}(i)};},{\"../../../utils\":114,\"./index\":59}],57:[function(e,t,r){var _e194=e(\"../../../utils\"),n=_e194.utils,_e195=e(\"./array\"),i=_e195.WebGLKernelArray;t.exports={WebGLKernelValueHTMLImage:/*#__PURE__*/function(_i56){_inherits(WebGLKernelValueHTMLImage,_i56);var _super43=_createSuper(WebGLKernelValueHTMLImage);function WebGLKernelValueHTMLImage(e,t){var _this31;_classCallCheck(this,WebGLKernelValueHTMLImage);_this31=_super43.call(this,e,t);var r=e.width,n=e.height;_this31.checkSize(r,n),_this31.dimensions=[r,n,1],_this31.textureSize=[r,n],_this31.uploadValue=e;return _this31;}_createClass(WebGLKernelValueHTMLImage,[{key:\"getStringValueHandler\",value:function getStringValueHandler(){return\"const uploadValue_\".concat(this.name,\" = \").concat(this.varName,\";\\n\");}},{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"ivec2 \".concat(this.sizeId,\" = ivec2(\").concat(this.textureSize[0],\", \").concat(this.textureSize[1],\")\"),\"ivec3 \".concat(this.dimensionsId,\" = ivec3(\").concat(this.dimensions[0],\", \").concat(this.dimensions[1],\", \").concat(this.dimensions[2],\")\")]);}},{key:\"updateValue\",value:function updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);var t=this.context;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue=e),this.kernel.setUniform1i(this.id,this.index);}}]);return WebGLKernelValueHTMLImage;}(i)};},{\"../../../utils\":114,\"./array\":40}],58:[function(e,t,r){var _e196=e(\"./html-image\"),n=_e196.WebGLKernelValueHTMLImage;t.exports={WebGLKernelValueHTMLVideo:/*#__PURE__*/function(_n62){_inherits(WebGLKernelValueHTMLVideo,_n62);var _super44=_createSuper(WebGLKernelValueHTMLVideo);function WebGLKernelValueHTMLVideo(){_classCallCheck(this,WebGLKernelValueHTMLVideo);return _super44.apply(this,arguments);}return _createClass(WebGLKernelValueHTMLVideo);}(n)};},{\"./html-image\":57}],59:[function(e,t,r){var _e197=e(\"../../../utils\"),n=_e197.utils,_e198=e(\"../../kernel-value\"),i=_e198.KernelValue;t.exports={WebGLKernelValue:/*#__PURE__*/function(_i57){_inherits(WebGLKernelValue,_i57);var _super45=_createSuper(WebGLKernelValue);function WebGLKernelValue(e,t){var _this32;_classCallCheck(this,WebGLKernelValue);_this32=_super45.call(this,e,t),_this32.dimensionsId=null,_this32.sizeId=null,_this32.initialValueConstructor=e.constructor,_this32.onRequestTexture=t.onRequestTexture,_this32.onRequestIndex=t.onRequestIndex,_this32.uploadValue=null,_this32.textureSize=null,_this32.bitRatio=null,_this32.prevArg=null;return _this32;}_createClass(WebGLKernelValue,[{key:\"id\",get:function get(){return\"\".concat(this.origin,\"_\").concat(n.sanitizeName(this.name));}},{key:\"setup\",value:function setup(){}},{key:\"getTransferArrayType\",value:function getTransferArrayType(e){if(Array.isArray(e[0]))return this.getTransferArrayType(e[0]);switch(e.constructor){case Array:case Int32Array:case Int16Array:case Int8Array:return Float32Array;case Uint8ClampedArray:case Uint8Array:case Uint16Array:case Uint32Array:case Float32Array:case Float64Array:return e.constructor;}return console.warn(\"Unfamiliar constructor type.  Will go ahead and use, but likley this may result in a transfer of zeros\"),e.constructor;}},{key:\"getStringValueHandler\",value:function getStringValueHandler(){throw new Error(\"\\\"getStringValueHandler\\\" not implemented on \".concat(this.constructor.name));}},{key:\"getVariablePrecisionString\",value:function getVariablePrecisionString(){return this.kernel.getVariablePrecisionString(this.textureSize||void 0,this.tactic||void 0);}},{key:\"destroy\",value:function destroy(){}}]);return WebGLKernelValue;}(i)};},{\"../../../utils\":114,\"../../kernel-value\":35}],60:[function(e,t,r){var _e199=e(\"../../../utils\"),n=_e199.utils,_e200=e(\"./index\"),i=_e200.WebGLKernelValue;t.exports={WebGLKernelValueInteger:/*#__PURE__*/function(_i58){_inherits(WebGLKernelValueInteger,_i58);var _super46=_createSuper(WebGLKernelValueInteger);function WebGLKernelValueInteger(e,t){var _this33;_classCallCheck(this,WebGLKernelValueInteger);_this33=_super46.call(this,e,t),_this33.uploadValue=e;return _this33;}_createClass(WebGLKernelValueInteger,[{key:\"getStringValueHandler\",value:function getStringValueHandler(){return\"const uploadValue_\".concat(this.name,\" = \").concat(this.varName,\";\\n\");}},{key:\"getSource\",value:function getSource(e){return\"constants\"===this.origin?\"const int \".concat(this.id,\" = \").concat(parseInt(e),\";\\n\"):\"uniform int \".concat(this.id,\";\\n\");}},{key:\"updateValue\",value:function updateValue(e){\"constants\"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=e);}}]);return WebGLKernelValueInteger;}(i)};},{\"../../../utils\":114,\"./index\":59}],61:[function(e,t,r){var _e201=e(\"../../../utils\"),n=_e201.utils,_e202=e(\"./array\"),i=_e202.WebGLKernelArray,s=\"Source and destination textures are the same.  Use immutable = true and manually cleanup kernel output texture memory with texture.delete()\";t.exports={WebGLKernelValueMemoryOptimizedNumberTexture:/*#__PURE__*/function(_i59){_inherits(WebGLKernelValueMemoryOptimizedNumberTexture,_i59);var _super47=_createSuper(WebGLKernelValueMemoryOptimizedNumberTexture);function WebGLKernelValueMemoryOptimizedNumberTexture(e,t){var _this34;_classCallCheck(this,WebGLKernelValueMemoryOptimizedNumberTexture);_this34=_super47.call(this,e,t);var _e$size3=_slicedToArray(e.size,2),r=_e$size3[0],n=_e$size3[1];_this34.checkSize(r,n),_this34.dimensions=e.dimensions,_this34.textureSize=e.size,_this34.uploadValue=e.texture,_this34.forceUploadEachRun=!0;return _this34;}_createClass(WebGLKernelValueMemoryOptimizedNumberTexture,[{key:\"setup\",value:function setup(){this.setupTexture();}},{key:\"getStringValueHandler\",value:function getStringValueHandler(){return\"const uploadValue_\".concat(this.name,\" = \").concat(this.varName,\".texture;\\n\");}},{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"ivec2 \".concat(this.sizeId,\" = ivec2(\").concat(this.textureSize[0],\", \").concat(this.textureSize[1],\")\"),\"ivec3 \".concat(this.dimensionsId,\" = ivec3(\").concat(this.dimensions[0],\", \").concat(this.dimensions[1],\", \").concat(this.dimensions[2],\")\")]);}},{key:\"updateValue\",value:function updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);if(this.checkContext&&e.context!==this.context)throw new Error(\"Value \".concat(this.name,\" (\").concat(this.type,\") must be from same context\"));var t=this.kernel,r=this.context;if(t.pipeline)if(t.immutable)t.updateTextureArgumentRefs(this,e);else{if(t.texture&&t.texture.texture===e.texture)throw new Error(s);if(t.mappedTextures){var _r61=t.mappedTextures;for(var _t68=0;_t68<_r61.length;_t68++){if(_r61[_t68].texture===e.texture)throw new Error(s);}}}r.activeTexture(this.contextHandle),r.bindTexture(r.TEXTURE_2D,this.uploadValue=e.texture),this.kernel.setUniform1i(this.id,this.index);}}]);return WebGLKernelValueMemoryOptimizedNumberTexture;}(i),sameError:s};},{\"../../../utils\":114,\"./array\":40}],62:[function(e,t,r){var _e203=e(\"../../../utils\"),n=_e203.utils,_e204=e(\"./array\"),i=_e204.WebGLKernelArray,_e205=e(\"./memory-optimized-number-texture\"),s=_e205.sameError;t.exports={WebGLKernelValueNumberTexture:/*#__PURE__*/function(_i60){_inherits(WebGLKernelValueNumberTexture,_i60);var _super48=_createSuper(WebGLKernelValueNumberTexture);function WebGLKernelValueNumberTexture(e,t){var _this35;_classCallCheck(this,WebGLKernelValueNumberTexture);_this35=_super48.call(this,e,t);var _e$size4=_slicedToArray(e.size,2),r=_e$size4[0],n=_e$size4[1];_this35.checkSize(r,n);var i=e.size,s=e.dimensions;_this35.bitRatio=_this35.getBitRatio(e),_this35.dimensions=s,_this35.textureSize=i,_this35.uploadValue=e.texture,_this35.forceUploadEachRun=!0;return _this35;}_createClass(WebGLKernelValueNumberTexture,[{key:\"setup\",value:function setup(){this.setupTexture();}},{key:\"getStringValueHandler\",value:function getStringValueHandler(){return\"const uploadValue_\".concat(this.name,\" = \").concat(this.varName,\".texture;\\n\");}},{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"ivec2 \".concat(this.sizeId,\" = ivec2(\").concat(this.textureSize[0],\", \").concat(this.textureSize[1],\")\"),\"ivec3 \".concat(this.dimensionsId,\" = ivec3(\").concat(this.dimensions[0],\", \").concat(this.dimensions[1],\", \").concat(this.dimensions[2],\")\")]);}},{key:\"updateValue\",value:function updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);if(this.checkContext&&e.context!==this.context)throw new Error(\"Value \".concat(this.name,\" (\").concat(this.type,\") must be from same context\"));var t=this.kernel,r=this.context;if(t.pipeline)if(t.immutable)t.updateTextureArgumentRefs(this,e);else{if(t.texture&&t.texture.texture===e.texture)throw new Error(s);if(t.mappedTextures){var _r62=t.mappedTextures;for(var _t69=0;_t69<_r62.length;_t69++){if(_r62[_t69].texture===e.texture)throw new Error(s);}}}r.activeTexture(this.contextHandle),r.bindTexture(r.TEXTURE_2D,this.uploadValue=e.texture),this.kernel.setUniform1i(this.id,this.index);}}]);return WebGLKernelValueNumberTexture;}(i)};},{\"../../../utils\":114,\"./array\":40,\"./memory-optimized-number-texture\":61}],63:[function(e,t,r){var _e206=e(\"../../../utils\"),n=_e206.utils,_e207=e(\"./array\"),i=_e207.WebGLKernelArray;t.exports={WebGLKernelValueSingleArray:/*#__PURE__*/function(_i61){_inherits(WebGLKernelValueSingleArray,_i61);var _super49=_createSuper(WebGLKernelValueSingleArray);function WebGLKernelValueSingleArray(e,t){var _this36;_classCallCheck(this,WebGLKernelValueSingleArray);_this36=_super49.call(this,e,t),_this36.bitRatio=4,_this36.dimensions=n.getDimensions(e,!0),_this36.textureSize=n.getMemoryOptimizedFloatTextureSize(_this36.dimensions,_this36.bitRatio),_this36.uploadArrayLength=_this36.textureSize[0]*_this36.textureSize[1]*_this36.bitRatio,_this36.checkSize(_this36.textureSize[0],_this36.textureSize[1]),_this36.uploadValue=new Float32Array(_this36.uploadArrayLength);return _this36;}_createClass(WebGLKernelValueSingleArray,[{key:\"getStringValueHandler\",value:function getStringValueHandler(){return n.linesToString([\"const uploadValue_\".concat(this.name,\" = new Float32Array(\").concat(this.uploadArrayLength,\")\"),\"flattenTo(\".concat(this.varName,\", uploadValue_\").concat(this.name,\")\")]);}},{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"ivec2 \".concat(this.sizeId,\" = ivec2(\").concat(this.textureSize[0],\", \").concat(this.textureSize[1],\")\"),\"ivec3 \".concat(this.dimensionsId,\" = ivec3(\").concat(this.dimensions[0],\", \").concat(this.dimensions[1],\", \").concat(this.dimensions[2],\")\")]);}},{key:\"updateValue\",value:function updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);var t=this.context;n.flattenTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index);}}]);return WebGLKernelValueSingleArray;}(i)};},{\"../../../utils\":114,\"./array\":40}],64:[function(e,t,r){var _e208=e(\"../../../utils\"),n=_e208.utils,_e209=e(\"./array\"),i=_e209.WebGLKernelArray;t.exports={WebGLKernelValueSingleArray1DI:/*#__PURE__*/function(_i62){_inherits(WebGLKernelValueSingleArray1DI,_i62);var _super50=_createSuper(WebGLKernelValueSingleArray1DI);function WebGLKernelValueSingleArray1DI(e,t){var _this37;_classCallCheck(this,WebGLKernelValueSingleArray1DI);_this37=_super50.call(this,e,t),_this37.bitRatio=4,_this37.setShape(e);return _this37;}_createClass(WebGLKernelValueSingleArray1DI,[{key:\"setShape\",value:function setShape(e){var t=n.getDimensions(e,!0);this.textureSize=n.getMemoryOptimizedFloatTextureSize(t,this.bitRatio),this.dimensions=new Int32Array([t[1],1,1]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength);}},{key:\"getStringValueHandler\",value:function getStringValueHandler(){return n.linesToString([\"const uploadValue_\".concat(this.name,\" = new Float32Array(\").concat(this.uploadArrayLength,\")\"),\"flattenTo(\".concat(this.varName,\", uploadValue_\").concat(this.name,\")\")]);}},{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"ivec2 \".concat(this.sizeId,\" = ivec2(\").concat(this.textureSize[0],\", \").concat(this.textureSize[1],\")\"),\"ivec3 \".concat(this.dimensionsId,\" = ivec3(\").concat(this.dimensions[0],\", \").concat(this.dimensions[1],\", \").concat(this.dimensions[2],\")\")]);}},{key:\"updateValue\",value:function updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);var t=this.context;n.flatten2dArrayTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index);}}]);return WebGLKernelValueSingleArray1DI;}(i)};},{\"../../../utils\":114,\"./array\":40}],65:[function(e,t,r){var _e210=e(\"../../../utils\"),n=_e210.utils,_e211=e(\"./array\"),i=_e211.WebGLKernelArray;t.exports={WebGLKernelValueSingleArray2DI:/*#__PURE__*/function(_i63){_inherits(WebGLKernelValueSingleArray2DI,_i63);var _super51=_createSuper(WebGLKernelValueSingleArray2DI);function WebGLKernelValueSingleArray2DI(e,t){var _this38;_classCallCheck(this,WebGLKernelValueSingleArray2DI);_this38=_super51.call(this,e,t),_this38.bitRatio=4,_this38.setShape(e);return _this38;}_createClass(WebGLKernelValueSingleArray2DI,[{key:\"setShape\",value:function setShape(e){var t=n.getDimensions(e,!0);this.textureSize=n.getMemoryOptimizedFloatTextureSize(t,this.bitRatio),this.dimensions=new Int32Array([t[1],t[2],1]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength);}},{key:\"getStringValueHandler\",value:function getStringValueHandler(){return n.linesToString([\"const uploadValue_\".concat(this.name,\" = new Float32Array(\").concat(this.uploadArrayLength,\")\"),\"flattenTo(\".concat(this.varName,\", uploadValue_\").concat(this.name,\")\")]);}},{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"ivec2 \".concat(this.sizeId,\" = ivec2(\").concat(this.textureSize[0],\", \").concat(this.textureSize[1],\")\"),\"ivec3 \".concat(this.dimensionsId,\" = ivec3(\").concat(this.dimensions[0],\", \").concat(this.dimensions[1],\", \").concat(this.dimensions[2],\")\")]);}},{key:\"updateValue\",value:function updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);var t=this.context;n.flatten3dArrayTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index);}}]);return WebGLKernelValueSingleArray2DI;}(i)};},{\"../../../utils\":114,\"./array\":40}],66:[function(e,t,r){var _e212=e(\"../../../utils\"),n=_e212.utils,_e213=e(\"./array\"),i=_e213.WebGLKernelArray;t.exports={WebGLKernelValueSingleArray3DI:/*#__PURE__*/function(_i64){_inherits(WebGLKernelValueSingleArray3DI,_i64);var _super52=_createSuper(WebGLKernelValueSingleArray3DI);function WebGLKernelValueSingleArray3DI(e,t){var _this39;_classCallCheck(this,WebGLKernelValueSingleArray3DI);_this39=_super52.call(this,e,t),_this39.bitRatio=4,_this39.setShape(e);return _this39;}_createClass(WebGLKernelValueSingleArray3DI,[{key:\"setShape\",value:function setShape(e){var t=n.getDimensions(e,!0);this.textureSize=n.getMemoryOptimizedFloatTextureSize(t,this.bitRatio),this.dimensions=new Int32Array([t[1],t[2],t[3]]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength);}},{key:\"getStringValueHandler\",value:function getStringValueHandler(){return n.linesToString([\"const uploadValue_\".concat(this.name,\" = new Float32Array(\").concat(this.uploadArrayLength,\")\"),\"flattenTo(\".concat(this.varName,\", uploadValue_\").concat(this.name,\")\")]);}},{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"ivec2 \".concat(this.sizeId,\" = ivec2(\").concat(this.textureSize[0],\", \").concat(this.textureSize[1],\")\"),\"ivec3 \".concat(this.dimensionsId,\" = ivec3(\").concat(this.dimensions[0],\", \").concat(this.dimensions[1],\", \").concat(this.dimensions[2],\")\")]);}},{key:\"updateValue\",value:function updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);var t=this.context;n.flatten4dArrayTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index);}}]);return WebGLKernelValueSingleArray3DI;}(i)};},{\"../../../utils\":114,\"./array\":40}],67:[function(e,t,r){var _e214=e(\"../../../utils\"),n=_e214.utils,_e215=e(\"./array\"),i=_e215.WebGLKernelArray;t.exports={WebGLKernelValueSingleInput:/*#__PURE__*/function(_i65){_inherits(WebGLKernelValueSingleInput,_i65);var _super53=_createSuper(WebGLKernelValueSingleInput);function WebGLKernelValueSingleInput(e,t){var _this40;_classCallCheck(this,WebGLKernelValueSingleInput);_this40=_super53.call(this,e,t),_this40.bitRatio=4;var _e$size5=_slicedToArray(e.size,3),r=_e$size5[0],i=_e$size5[1],s=_e$size5[2];_this40.dimensions=new Int32Array([r||1,i||1,s||1]),_this40.textureSize=n.getMemoryOptimizedFloatTextureSize(_this40.dimensions,_this40.bitRatio),_this40.uploadArrayLength=_this40.textureSize[0]*_this40.textureSize[1]*_this40.bitRatio,_this40.checkSize(_this40.textureSize[0],_this40.textureSize[1]),_this40.uploadValue=new Float32Array(_this40.uploadArrayLength);return _this40;}_createClass(WebGLKernelValueSingleInput,[{key:\"getStringValueHandler\",value:function getStringValueHandler(){return n.linesToString([\"const uploadValue_\".concat(this.name,\" = new Float32Array(\").concat(this.uploadArrayLength,\")\"),\"flattenTo(\".concat(this.varName,\".value, uploadValue_\").concat(this.name,\")\")]);}},{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"ivec2 \".concat(this.sizeId,\" = ivec2(\").concat(this.textureSize[0],\", \").concat(this.textureSize[1],\")\"),\"ivec3 \".concat(this.dimensionsId,\" = ivec3(\").concat(this.dimensions[0],\", \").concat(this.dimensions[1],\", \").concat(this.dimensions[2],\")\")]);}},{key:\"updateValue\",value:function updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);var t=this.context;n.flattenTo(e.value,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index);}}]);return WebGLKernelValueSingleInput;}(i)};},{\"../../../utils\":114,\"./array\":40}],68:[function(e,t,r){var _e216=e(\"../../../utils\"),n=_e216.utils,_e217=e(\"./array\"),i=_e217.WebGLKernelArray;t.exports={WebGLKernelValueUnsignedArray:/*#__PURE__*/function(_i66){_inherits(WebGLKernelValueUnsignedArray,_i66);var _super54=_createSuper(WebGLKernelValueUnsignedArray);function WebGLKernelValueUnsignedArray(e,t){var _this41;_classCallCheck(this,WebGLKernelValueUnsignedArray);_this41=_super54.call(this,e,t),_this41.bitRatio=_this41.getBitRatio(e),_this41.dimensions=n.getDimensions(e,!0),_this41.textureSize=n.getMemoryOptimizedPackedTextureSize(_this41.dimensions,_this41.bitRatio),_this41.uploadArrayLength=_this41.textureSize[0]*_this41.textureSize[1]*(4/_this41.bitRatio),_this41.checkSize(_this41.textureSize[0],_this41.textureSize[1]),_this41.TranserArrayType=_this41.getTransferArrayType(e),_this41.preUploadValue=new _this41.TranserArrayType(_this41.uploadArrayLength),_this41.uploadValue=new Uint8Array(_this41.preUploadValue.buffer);return _this41;}_createClass(WebGLKernelValueUnsignedArray,[{key:\"getStringValueHandler\",value:function getStringValueHandler(){return n.linesToString([\"const preUploadValue_\".concat(this.name,\" = new \").concat(this.TranserArrayType.name,\"(\").concat(this.uploadArrayLength,\")\"),\"const uploadValue_\".concat(this.name,\" = new Uint8Array(preUploadValue_\").concat(this.name,\".buffer)\"),\"flattenTo(\".concat(this.varName,\", preUploadValue_\").concat(this.name,\")\")]);}},{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"ivec2 \".concat(this.sizeId,\" = ivec2(\").concat(this.textureSize[0],\", \").concat(this.textureSize[1],\")\"),\"ivec3 \".concat(this.dimensionsId,\" = ivec3(\").concat(this.dimensions[0],\", \").concat(this.dimensions[1],\", \").concat(this.dimensions[2],\")\")]);}},{key:\"updateValue\",value:function updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);var t=this.context;n.flattenTo(e,this.preUploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue),this.kernel.setUniform1i(this.id,this.index);}}]);return WebGLKernelValueUnsignedArray;}(i)};},{\"../../../utils\":114,\"./array\":40}],69:[function(e,t,r){var _e218=e(\"../../../utils\"),n=_e218.utils,_e219=e(\"./array\"),i=_e219.WebGLKernelArray;t.exports={WebGLKernelValueUnsignedInput:/*#__PURE__*/function(_i67){_inherits(WebGLKernelValueUnsignedInput,_i67);var _super55=_createSuper(WebGLKernelValueUnsignedInput);function WebGLKernelValueUnsignedInput(e,t){var _this42;_classCallCheck(this,WebGLKernelValueUnsignedInput);_this42=_super55.call(this,e,t),_this42.bitRatio=_this42.getBitRatio(e);var _e$size6=_slicedToArray(e.size,3),r=_e$size6[0],i=_e$size6[1],s=_e$size6[2];_this42.dimensions=new Int32Array([r||1,i||1,s||1]),_this42.textureSize=n.getMemoryOptimizedPackedTextureSize(_this42.dimensions,_this42.bitRatio),_this42.uploadArrayLength=_this42.textureSize[0]*_this42.textureSize[1]*(4/_this42.bitRatio),_this42.checkSize(_this42.textureSize[0],_this42.textureSize[1]),_this42.TranserArrayType=_this42.getTransferArrayType(e.value),_this42.preUploadValue=new _this42.TranserArrayType(_this42.uploadArrayLength),_this42.uploadValue=new Uint8Array(_this42.preUploadValue.buffer);return _this42;}_createClass(WebGLKernelValueUnsignedInput,[{key:\"getStringValueHandler\",value:function getStringValueHandler(){return n.linesToString([\"const preUploadValue_\".concat(this.name,\" = new \").concat(this.TranserArrayType.name,\"(\").concat(this.uploadArrayLength,\")\"),\"const uploadValue_\".concat(this.name,\" = new Uint8Array(preUploadValue_\").concat(this.name,\".buffer)\"),\"flattenTo(\".concat(this.varName,\".value, preUploadValue_\").concat(this.name,\")\")]);}},{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"ivec2 \".concat(this.sizeId,\" = ivec2(\").concat(this.textureSize[0],\", \").concat(this.textureSize[1],\")\"),\"ivec3 \".concat(this.dimensionsId,\" = ivec3(\").concat(this.dimensions[0],\", \").concat(this.dimensions[1],\", \").concat(this.dimensions[2],\")\")]);}},{key:\"updateValue\",value:function updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(value.constructor);var t=this.context;n.flattenTo(e.value,this.preUploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue),this.kernel.setUniform1i(this.id,this.index);}}]);return WebGLKernelValueUnsignedInput;}(i)};},{\"../../../utils\":114,\"./array\":40}],70:[function(e,t,r){var _e220=e(\"../gl/kernel\"),n=_e220.GLKernel,_e221=e(\"../function-builder\"),i=_e221.FunctionBuilder,_e222=e(\"./function-node\"),s=_e222.WebGLFunctionNode,_e223=e(\"../../utils\"),a=_e223.utils,o=e(\"../../plugins/math-random-uniformly-distributed\"),_e224=e(\"./fragment-shader\"),u=_e224.fragmentShader,_e225=e(\"./vertex-shader\"),l=_e225.vertexShader,_e226=e(\"../gl/kernel-string\"),h=_e226.glKernelString,_e227=e(\"./kernel-value-maps\"),c=_e227.lookupKernelValueType;var p=null,d=null,m=null,f=null,g=null;var x=[o],y=[],b={};t.exports={WebGLKernel:/*#__PURE__*/function(_n63){_inherits(WebGLKernel,_n63);var _super56=_createSuper(WebGLKernel);function WebGLKernel(e,t){var _this43;_classCallCheck(this,WebGLKernel);_this43=_super56.call(this,e,t),_this43.program=null,_this43.pipeline=t.pipeline,_this43.endianness=a.systemEndianness(),_this43.extensions={},_this43.argumentTextureCount=0,_this43.constantTextureCount=0,_this43.fragShader=null,_this43.vertShader=null,_this43.drawBuffersMap=null,_this43.maxTexSize=null,_this43.onRequestSwitchKernel=null,_this43.texture=null,_this43.mappedTextures=null,_this43.mergeSettings(e.settings||t),_this43.threadDim=null,_this43.framebuffer=null,_this43.buffer=null,_this43.textureCache=[],_this43.programUniformLocationCache={},_this43.uniform1fCache={},_this43.uniform1iCache={},_this43.uniform2fCache={},_this43.uniform2fvCache={},_this43.uniform2ivCache={},_this43.uniform3fvCache={},_this43.uniform3ivCache={},_this43.uniform4fvCache={},_this43.uniform4ivCache={};return _this43;}_createClass(WebGLKernel,[{key:\"initCanvas\",value:function initCanvas(){if(\"undefined\"!=typeof document){var _e228=document.createElement(\"canvas\");return _e228.width=2,_e228.height=2,_e228;}if(\"undefined\"!=typeof OffscreenCanvas)return new OffscreenCanvas(0,0);}},{key:\"initContext\",value:function initContext(){var e={alpha:!1,depth:!1,antialias:!1};return this.canvas.getContext(\"webgl\",e)||this.canvas.getContext(\"experimental-webgl\",e);}},{key:\"initPlugins\",value:function initPlugins(e){var t=[],r=this.source;if(\"string\"==typeof r)for(var _e229=0;_e229<x.length;_e229++){var _n64=x[_e229];r.match(_n64.functionMatch)&&t.push(_n64);}else if(\"object\"==_typeof(r)&&e.pluginNames){var _loop2=function _loop2(_r63){var n=x[_r63];e.pluginNames.some(function(e){return e===n.name;})&&t.push(n);};for(var _r63=0;_r63<x.length;_r63++){_loop2(_r63);}}return t;}},{key:\"initExtensions\",value:function initExtensions(){this.extensions={OES_texture_float:this.context.getExtension(\"OES_texture_float\"),OES_texture_float_linear:this.context.getExtension(\"OES_texture_float_linear\"),OES_element_index_uint:this.context.getExtension(\"OES_element_index_uint\"),WEBGL_draw_buffers:this.context.getExtension(\"WEBGL_draw_buffers\"),WEBGL_color_buffer_float:this.context.getExtension(\"WEBGL_color_buffer_float\")};}},{key:\"validateSettings\",value:function validateSettings(e){if(!this.validate)return void(this.texSize=a.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output));var t=this.constructor.features;if(!0===this.optimizeFloatMemory&&!t.isTextureFloat)throw new Error(\"Float textures are not supported\");if(\"single\"===this.precision&&!t.isFloatRead)throw new Error(\"Single precision not supported\");if(!this.graphical&&null===this.precision&&t.isTextureFloat&&(this.precision=t.isFloatRead?\"single\":\"unsigned\"),this.subKernels&&this.subKernels.length>0&&!this.extensions.WEBGL_draw_buffers)throw new Error(\"could not instantiate draw buffers extension\");if(null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=!t.isIntegerDivisionAccurate:this.fixIntegerDivisionAccuracy&&t.isIntegerDivisionAccurate&&(this.fixIntegerDivisionAccuracy=!1),this.checkOutput(),!this.output||0===this.output.length){if(1!==e.length)throw new Error(\"Auto output only supported for kernels with only one input\");var _t70=a.getVariableType(e[0],this.strictIntegers);switch(_t70){case\"Array\":this.output=a.getDimensions(_t70);break;case\"NumberTexture\":case\"MemoryOptimizedNumberTexture\":case\"ArrayTexture(1)\":case\"ArrayTexture(2)\":case\"ArrayTexture(3)\":case\"ArrayTexture(4)\":this.output=e[0].output;break;default:throw new Error(\"Auto output not supported for input type: \"+_t70);}}if(this.graphical){if(2!==this.output.length)throw new Error(\"Output must have 2 dimensions on graphical mode\");return\"precision\"===this.precision&&(this.precision=\"unsigned\",console.warn(\"Cannot use graphical mode and single precision at the same time\")),void(this.texSize=a.clone(this.output));}null===this.precision&&t.isTextureFloat&&(this.precision=\"single\"),this.texSize=a.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output),this.checkTextureSize();}},{key:\"updateMaxTexSize\",value:function updateMaxTexSize(){var e=this.texSize,t=this.canvas;if(null===this.maxTexSize){var _r64=y.indexOf(t);-1===_r64&&(_r64=y.length,y.push(t),b[_r64]=[e[0],e[1]]),this.maxTexSize=b[_r64];}this.maxTexSize[0]<e[0]&&(this.maxTexSize[0]=e[0]),this.maxTexSize[1]<e[1]&&(this.maxTexSize[1]=e[1]);}},{key:\"setupArguments\",value:function setupArguments(e){var _this44=this;this.kernelArguments=[],this.argumentTextureCount=0;var t=null===this.argumentTypes;if(t&&(this.argumentTypes=[]),this.argumentSizes=[],this.argumentBitRatios=[],e.length<this.argumentNames.length)throw new Error(\"not enough arguments for kernel\");if(e.length>this.argumentNames.length)throw new Error(\"too many arguments for kernel\");var r=this.context;var n=0;var i=function i(){return _this44.createTexture();},s=function s(){return _this44.constantTextureCount+n++;},o=function o(e){_this44.switchKernels({type:\"argumentMismatch\",needed:e});},u=function u(){return r.TEXTURE0+_this44.constantTextureCount+_this44.argumentTextureCount++;};for(var _n65=0;_n65<e.length;_n65++){var _l4=e[_n65],_h2=this.argumentNames[_n65];var _c2=void 0;t?(_c2=a.getVariableType(_l4,this.strictIntegers),this.argumentTypes.push(_c2)):_c2=this.argumentTypes[_n65];var _p=this.constructor.lookupKernelValueType(_c2,this.dynamicArguments?\"dynamic\":\"static\",this.precision,e[_n65]);if(null===_p)return this.requestFallback(e);var _d2=new _p(_l4,{name:_h2,type:_c2,tactic:this.tactic,origin:\"user\",context:r,checkContext:this.checkContext,kernel:this,strictIntegers:this.strictIntegers,onRequestTexture:i,onRequestIndex:s,onUpdateValueMismatch:o,onRequestContextHandle:u});this.kernelArguments.push(_d2),_d2.setup(),this.argumentSizes.push(_d2.textureSize),this.argumentBitRatios[_n65]=_d2.bitRatio;}}},{key:\"createTexture\",value:function createTexture(){var e=this.context.createTexture();return this.textureCache.push(e),e;}},{key:\"setupConstants\",value:function setupConstants(e){var _this45=this;var t=this.context;this.kernelConstants=[],this.forceUploadKernelConstants=[];var r=null===this.constantTypes;r&&(this.constantTypes={}),this.constantBitRatios={};var n=0;for(var _i68 in this.constants){var _s13=this.constants[_i68];var _o3=void 0;r?(_o3=a.getVariableType(_s13,this.strictIntegers),this.constantTypes[_i68]=_o3):_o3=this.constantTypes[_i68];var _u2=this.constructor.lookupKernelValueType(_o3,\"static\",this.precision,_s13);if(null===_u2)return this.requestFallback(e);var _l5=new _u2(_s13,{name:_i68,type:_o3,tactic:this.tactic,origin:\"constants\",context:this.context,checkContext:this.checkContext,kernel:this,strictIntegers:this.strictIntegers,onRequestTexture:function onRequestTexture(){return _this45.createTexture();},onRequestIndex:function onRequestIndex(){return n++;},onRequestContextHandle:function onRequestContextHandle(){return t.TEXTURE0+_this45.constantTextureCount++;}});this.constantBitRatios[_i68]=_l5.bitRatio,this.kernelConstants.push(_l5),_l5.setup(),_l5.forceUploadEachRun&&this.forceUploadKernelConstants.push(_l5);}}},{key:\"build\",value:function build(){if(this.built)return;if(this.initExtensions(),this.validateSettings(arguments),this.setupConstants(arguments),this.fallbackRequested)return;if(this.setupArguments(arguments),this.fallbackRequested)return;this.updateMaxTexSize(),this.translateSource();var e=this.pickRenderStrategy(arguments);if(e)return e;var t=this.texSize,r=this.context,n=this.canvas;r.enable(r.SCISSOR_TEST),this.pipeline&&this.precision,r.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),n.width=this.maxTexSize[0],n.height=this.maxTexSize[1];var i=this.threadDim=Array.from(this.output);for(;i.length<3;){i.push(1);}var s=this.getVertexShader(arguments),a=r.createShader(r.VERTEX_SHADER);r.shaderSource(a,s),r.compileShader(a),this.vertShader=a;var o=this.getFragmentShader(arguments),u=r.createShader(r.FRAGMENT_SHADER);if(r.shaderSource(u,o),r.compileShader(u),this.fragShader=u,this.debug&&(console.log(\"GLSL Shader Output:\"),console.log(o)),!r.getShaderParameter(a,r.COMPILE_STATUS))throw new Error(\"Error compiling vertex shader: \"+r.getShaderInfoLog(a));if(!r.getShaderParameter(u,r.COMPILE_STATUS))throw new Error(\"Error compiling fragment shader: \"+r.getShaderInfoLog(u));var l=this.program=r.createProgram();r.attachShader(l,a),r.attachShader(l,u),r.linkProgram(l),this.framebuffer=r.createFramebuffer(),this.framebuffer.width=t[0],this.framebuffer.height=t[1],this.rawValueFramebuffers={};var h=new Float32Array([-1,-1,1,-1,-1,1,1,1]),c=new Float32Array([0,0,1,0,0,1,1,1]),p=h.byteLength;var d=this.buffer;d?r.bindBuffer(r.ARRAY_BUFFER,d):(d=this.buffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,d),r.bufferData(r.ARRAY_BUFFER,h.byteLength+c.byteLength,r.STATIC_DRAW)),r.bufferSubData(r.ARRAY_BUFFER,0,h),r.bufferSubData(r.ARRAY_BUFFER,p,c);var m=r.getAttribLocation(this.program,\"aPos\");r.enableVertexAttribArray(m),r.vertexAttribPointer(m,2,r.FLOAT,!1,0,0);var f=r.getAttribLocation(this.program,\"aTexCoord\");r.enableVertexAttribArray(f),r.vertexAttribPointer(f,2,r.FLOAT,!1,0,p),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer);var g=0;r.useProgram(this.program);for(var _e230 in this.constants){this.kernelConstants[g++].updateValue(this.constants[_e230]);}this._setupOutputTexture(),null!==this.subKernels&&this.subKernels.length>0&&(this._mappedTextureSwitched={},this._setupSubOutputTextures()),this.buildSignature(arguments),this.built=!0;}},{key:\"translateSource\",value:function translateSource(){var e=i.fromKernel(this,s,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy});this.translatedSource=e.getPrototypeString(\"kernel\"),this.setupReturnTypes(e);}},{key:\"setupReturnTypes\",value:function setupReturnTypes(e){if(this.graphical||this.returnType||(this.returnType=e.getKernelResultType()),this.subKernels&&this.subKernels.length>0)for(var _t71=0;_t71<this.subKernels.length;_t71++){var _r65=this.subKernels[_t71];_r65.returnType||(_r65.returnType=e.getSubKernelResultType(_t71));}}},{key:\"run\",value:function run(){var e=this.kernelArguments,t=this.texSize,r=this.forceUploadKernelConstants,n=this.context;n.useProgram(this.program),n.scissor(0,0,t[0],t[1]),this.dynamicOutput&&(this.setUniform3iv(\"uOutputDim\",new Int32Array(this.threadDim)),this.setUniform2iv(\"uTexSize\",t)),this.setUniform2f(\"ratio\",t[0]/this.maxTexSize[0],t[1]/this.maxTexSize[1]);for(var _e231=0;_e231<r.length;_e231++){var _t72=r[_e231];if(_t72.updateValue(this.constants[_t72.name]),this.switchingKernels)return;}for(var _t73=0;_t73<e.length;_t73++){if(e[_t73].updateValue(arguments[_t73]),this.switchingKernels)return;}if(this.plugins)for(var _e232=0;_e232<this.plugins.length;_e232++){var _t74=this.plugins[_e232];_t74.onBeforeRun&&_t74.onBeforeRun(this);}if(this.graphical)return this.pipeline?(n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer),this.immutable&&this._replaceOutputTexture(),n.drawArrays(n.TRIANGLE_STRIP,0,4),this.immutable?this.texture.clone():this.texture):(n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,null),void n.drawArrays(n.TRIANGLE_STRIP,0,4));n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer),this.immutable&&this._replaceOutputTexture(),null!==this.subKernels&&(this.immutable&&this._replaceSubOutputTextures(),this.drawBuffers()),n.drawArrays(n.TRIANGLE_STRIP,0,4);}},{key:\"drawBuffers\",value:function drawBuffers(){this.extensions.WEBGL_draw_buffers.drawBuffersWEBGL(this.drawBuffersMap);}},{key:\"getInternalFormat\",value:function getInternalFormat(){return this.context.RGBA;}},{key:\"getTextureFormat\",value:function getTextureFormat(){var e=this.context;switch(this.getInternalFormat()){case e.RGBA:return e.RGBA;default:throw new Error(\"Unknown internal format\");}}},{key:\"_replaceOutputTexture\",value:function _replaceOutputTexture(){if(this.texture.beforeMutate()||this._textureSwitched){var _e233=this.context;_e233.framebufferTexture2D(_e233.FRAMEBUFFER,_e233.COLOR_ATTACHMENT0,_e233.TEXTURE_2D,this.texture.texture,0),this._textureSwitched=!1;}}},{key:\"_setupOutputTexture\",value:function _setupOutputTexture(){var e=this.context,t=this.texSize;if(this.texture)return void e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0);var r=this.createTexture();e.activeTexture(e.TEXTURE0+this.constantTextureCount+this.argumentTextureCount),e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);var n=this.getInternalFormat();\"single\"===this.precision?e.texImage2D(e.TEXTURE_2D,0,n,t[0],t[1],0,e.RGBA,e.FLOAT,null):e.texImage2D(e.TEXTURE_2D,0,n,t[0],t[1],0,n,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),this.texture=new this.TextureConstructor({texture:r,size:t,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this});}},{key:\"_replaceSubOutputTextures\",value:function _replaceSubOutputTextures(){var e=this.context;for(var _t75=0;_t75<this.mappedTextures.length;_t75++){var _r66=this.mappedTextures[_t75];(_r66.beforeMutate()||this._mappedTextureSwitched[_t75])&&(e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+_t75+1,e.TEXTURE_2D,_r66.texture,0),this._mappedTextureSwitched[_t75]=!1);}}},{key:\"_setupSubOutputTextures\",value:function _setupSubOutputTextures(){var e=this.context;if(this.mappedTextures){for(var _t76=0;_t76<this.subKernels.length;_t76++){e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+_t76+1,e.TEXTURE_2D,this.mappedTextures[_t76].texture,0);}return;}var t=this.texSize;this.drawBuffersMap=[e.COLOR_ATTACHMENT0],this.mappedTextures=[];for(var _r67=0;_r67<this.subKernels.length;_r67++){var _n66=this.createTexture();this.drawBuffersMap.push(e.COLOR_ATTACHMENT0+_r67+1),e.activeTexture(e.TEXTURE0+this.constantTextureCount+this.argumentTextureCount+_r67),e.bindTexture(e.TEXTURE_2D,_n66),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),\"single\"===this.precision?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.FLOAT,null):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+_r67+1,e.TEXTURE_2D,_n66,0),this.mappedTextures.push(new this.TextureConstructor({texture:_n66,size:t,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this}));}}},{key:\"setUniform1f\",value:function setUniform1f(e,t){if(this.uniform1fCache.hasOwnProperty(e)&&t===this.uniform1fCache[e])return;this.uniform1fCache[e]=t;var r=this.getUniformLocation(e);this.context.uniform1f(r,t);}},{key:\"setUniform1i\",value:function setUniform1i(e,t){if(this.uniform1iCache.hasOwnProperty(e)&&t===this.uniform1iCache[e])return;this.uniform1iCache[e]=t;var r=this.getUniformLocation(e);this.context.uniform1i(r,t);}},{key:\"setUniform2f\",value:function setUniform2f(e,t,r){if(this.uniform2fCache.hasOwnProperty(e)){var _n67=this.uniform2fCache[e];if(t===_n67[0]&&r===_n67[1])return;}this.uniform2fCache[e]=[t,r];var n=this.getUniformLocation(e);this.context.uniform2f(n,t,r);}},{key:\"setUniform2fv\",value:function setUniform2fv(e,t){if(this.uniform2fvCache.hasOwnProperty(e)){var _r68=this.uniform2fvCache[e];if(t[0]===_r68[0]&&t[1]===_r68[1])return;}this.uniform2fvCache[e]=t;var r=this.getUniformLocation(e);this.context.uniform2fv(r,t);}},{key:\"setUniform2iv\",value:function setUniform2iv(e,t){if(this.uniform2ivCache.hasOwnProperty(e)){var _r69=this.uniform2ivCache[e];if(t[0]===_r69[0]&&t[1]===_r69[1])return;}this.uniform2ivCache[e]=t;var r=this.getUniformLocation(e);this.context.uniform2iv(r,t);}},{key:\"setUniform3fv\",value:function setUniform3fv(e,t){if(this.uniform3fvCache.hasOwnProperty(e)){var _r70=this.uniform3fvCache[e];if(t[0]===_r70[0]&&t[1]===_r70[1]&&t[2]===_r70[2])return;}this.uniform3fvCache[e]=t;var r=this.getUniformLocation(e);this.context.uniform3fv(r,t);}},{key:\"setUniform3iv\",value:function setUniform3iv(e,t){if(this.uniform3ivCache.hasOwnProperty(e)){var _r71=this.uniform3ivCache[e];if(t[0]===_r71[0]&&t[1]===_r71[1]&&t[2]===_r71[2])return;}this.uniform3ivCache[e]=t;var r=this.getUniformLocation(e);this.context.uniform3iv(r,t);}},{key:\"setUniform4fv\",value:function setUniform4fv(e,t){if(this.uniform4fvCache.hasOwnProperty(e)){var _r72=this.uniform4fvCache[e];if(t[0]===_r72[0]&&t[1]===_r72[1]&&t[2]===_r72[2]&&t[3]===_r72[3])return;}this.uniform4fvCache[e]=t;var r=this.getUniformLocation(e);this.context.uniform4fv(r,t);}},{key:\"setUniform4iv\",value:function setUniform4iv(e,t){if(this.uniform4ivCache.hasOwnProperty(e)){var _r73=this.uniform4ivCache[e];if(t[0]===_r73[0]&&t[1]===_r73[1]&&t[2]===_r73[2]&&t[3]===_r73[3])return;}this.uniform4ivCache[e]=t;var r=this.getUniformLocation(e);this.context.uniform4iv(r,t);}},{key:\"getUniformLocation\",value:function getUniformLocation(e){return this.programUniformLocationCache.hasOwnProperty(e)?this.programUniformLocationCache[e]:this.programUniformLocationCache[e]=this.context.getUniformLocation(this.program,e);}},{key:\"_getFragShaderArtifactMap\",value:function _getFragShaderArtifactMap(e){return{HEADER:this._getHeaderString(),LOOP_MAX:this._getLoopMaxString(),PLUGINS:this._getPluginsString(),CONSTANTS:this._getConstantsString(),DECODE32_ENDIANNESS:this._getDecode32EndiannessString(),ENCODE32_ENDIANNESS:this._getEncode32EndiannessString(),DIVIDE_WITH_INTEGER_CHECK:this._getDivideWithIntegerCheckString(),INJECTED_NATIVE:this._getInjectedNative(),MAIN_CONSTANTS:this._getMainConstantsString(),MAIN_ARGUMENTS:this._getMainArgumentsString(e),KERNEL:this.getKernelString(),MAIN_RESULT:this.getMainResultString(),FLOAT_TACTIC_DECLARATION:this.getFloatTacticDeclaration(),INT_TACTIC_DECLARATION:this.getIntTacticDeclaration(),SAMPLER_2D_TACTIC_DECLARATION:this.getSampler2DTacticDeclaration(),SAMPLER_2D_ARRAY_TACTIC_DECLARATION:this.getSampler2DArrayTacticDeclaration()};}},{key:\"_getVertShaderArtifactMap\",value:function _getVertShaderArtifactMap(e){return{FLOAT_TACTIC_DECLARATION:this.getFloatTacticDeclaration(),INT_TACTIC_DECLARATION:this.getIntTacticDeclaration(),SAMPLER_2D_TACTIC_DECLARATION:this.getSampler2DTacticDeclaration(),SAMPLER_2D_ARRAY_TACTIC_DECLARATION:this.getSampler2DArrayTacticDeclaration()};}},{key:\"_getHeaderString\",value:function _getHeaderString(){return null!==this.subKernels?\"#extension GL_EXT_draw_buffers : require\\n\":\"\";}},{key:\"_getLoopMaxString\",value:function _getLoopMaxString(){return this.loopMaxIterations?\" \".concat(parseInt(this.loopMaxIterations),\";\\n\"):\" 1000;\\n\";}},{key:\"_getPluginsString\",value:function _getPluginsString(){var _this46=this;return this.plugins?this.plugins.map(function(e){return e.source&&_this46.source.match(e.functionMatch)?e.source:\"\";}).join(\"\\n\"):\"\\n\";}},{key:\"_getConstantsString\",value:function _getConstantsString(){var e=[],t=this.threadDim,r=this.texSize;return this.dynamicOutput?e.push(\"uniform ivec3 uOutputDim\",\"uniform ivec2 uTexSize\"):e.push(\"ivec3 uOutputDim = ivec3(\".concat(t[0],\", \").concat(t[1],\", \").concat(t[2],\")\"),\"ivec2 uTexSize = ivec2(\".concat(r[0],\", \").concat(r[1],\")\")),a.linesToString(e);}},{key:\"_getTextureCoordinate\",value:function _getTextureCoordinate(){var e=this.subKernels;return null===e||e.length<1?\"varying vec2 vTexCoord;\\n\":\"out vec2 vTexCoord;\\n\";}},{key:\"_getDecode32EndiannessString\",value:function _getDecode32EndiannessString(){return\"LE\"===this.endianness?\"\":\"  texel.rgba = texel.abgr;\\n\";}},{key:\"_getEncode32EndiannessString\",value:function _getEncode32EndiannessString(){return\"LE\"===this.endianness?\"\":\"  texel.rgba = texel.abgr;\\n\";}},{key:\"_getDivideWithIntegerCheckString\",value:function _getDivideWithIntegerCheckString(){return this.fixIntegerDivisionAccuracy?\"float divWithIntCheck(float x, float y) {\\n  if (floor(x) == x && floor(y) == y && integerMod(x, y) == 0.0) {\\n    return float(int(x) / int(y));\\n  }\\n  return x / y;\\n}\\n\\nfloat integerCorrectionModulo(float number, float divisor) {\\n  if (number < 0.0) {\\n    number = abs(number);\\n    if (divisor < 0.0) {\\n      divisor = abs(divisor);\\n    }\\n    return -(number - (divisor * floor(divWithIntCheck(number, divisor))));\\n  }\\n  if (divisor < 0.0) {\\n    divisor = abs(divisor);\\n  }\\n  return number - (divisor * floor(divWithIntCheck(number, divisor)));\\n}\":\"\";}},{key:\"_getMainArgumentsString\",value:function _getMainArgumentsString(e){var t=[],r=this.argumentNames;for(var _n68=0;_n68<r.length;_n68++){t.push(this.kernelArguments[_n68].getSource(e[_n68]));}return t.join(\"\");}},{key:\"_getInjectedNative\",value:function _getInjectedNative(){return this.injectedNative||\"\";}},{key:\"_getMainConstantsString\",value:function _getMainConstantsString(){var e=[],t=this.constants;if(t){var _r74=0;for(var _n69 in t){this.constants.hasOwnProperty(_n69)&&e.push(this.kernelConstants[_r74++].getSource(this.constants[_n69]));}}return e.join(\"\");}},{key:\"getRawValueFramebuffer\",value:function getRawValueFramebuffer(e,t){if(this.rawValueFramebuffers[e]||(this.rawValueFramebuffers[e]={}),!this.rawValueFramebuffers[e][t]){var _r75=this.context.createFramebuffer();_r75.width=e,_r75.height=t,this.rawValueFramebuffers[e][t]=_r75;}return this.rawValueFramebuffers[e][t];}},{key:\"getKernelResultDeclaration\",value:function getKernelResultDeclaration(){switch(this.returnType){case\"Array(2)\":return\"vec2 kernelResult\";case\"Array(3)\":return\"vec3 kernelResult\";case\"Array(4)\":return\"vec4 kernelResult\";case\"LiteralInteger\":case\"Float\":case\"Number\":case\"Integer\":return\"float kernelResult\";default:if(this.graphical)return\"float kernelResult\";throw new Error(\"unrecognized output type \\\"\".concat(this.returnType,\"\\\"\"));}}},{key:\"getKernelString\",value:function getKernelString(){var e=[this.getKernelResultDeclaration()],t=this.subKernels;if(null!==t)switch(this.returnType){case\"Number\":case\"Float\":case\"Integer\":for(var _r76=0;_r76<t.length;_r76++){var _n70=t[_r76];e.push(\"Integer\"===_n70.returnType?\"int subKernelResult_\".concat(_n70.name,\" = 0\"):\"float subKernelResult_\".concat(_n70.name,\" = 0.0\"));}break;case\"Array(2)\":for(var _r77=0;_r77<t.length;_r77++){e.push(\"vec2 subKernelResult_\".concat(t[_r77].name));}break;case\"Array(3)\":for(var _r78=0;_r78<t.length;_r78++){e.push(\"vec3 subKernelResult_\".concat(t[_r78].name));}break;case\"Array(4)\":for(var _r79=0;_r79<t.length;_r79++){e.push(\"vec4 subKernelResult_\".concat(t[_r79].name));}}return a.linesToString(e)+this.translatedSource;}},{key:\"getMainResultGraphical\",value:function getMainResultGraphical(){return a.linesToString([\"  threadId = indexTo3D(index, uOutputDim)\",\"  kernel()\",\"  gl_FragColor = actualColor\"]);}},{key:\"getMainResultPackedPixels\",value:function getMainResultPackedPixels(){switch(this.returnType){case\"LiteralInteger\":case\"Number\":case\"Integer\":case\"Float\":return this.getMainResultKernelPackedPixels()+this.getMainResultSubKernelPackedPixels();default:throw new Error(\"packed output only usable with Numbers, \\\"\".concat(this.returnType,\"\\\" specified\"));}}},{key:\"getMainResultKernelPackedPixels\",value:function getMainResultKernelPackedPixels(){return a.linesToString([\"  threadId = indexTo3D(index, uOutputDim)\",\"  kernel()\",\"  gl_FragData[0] = \".concat(this.useLegacyEncoder?\"legacyEncode32\":\"encode32\",\"(kernelResult)\")]);}},{key:\"getMainResultSubKernelPackedPixels\",value:function getMainResultSubKernelPackedPixels(){var e=[];if(!this.subKernels)return\"\";for(var _t77=0;_t77<this.subKernels.length;_t77++){\"Integer\"===this.subKernels[_t77].returnType?e.push(\"  gl_FragData[\".concat(_t77+1,\"] = \").concat(this.useLegacyEncoder?\"legacyEncode32\":\"encode32\",\"(float(subKernelResult_\").concat(this.subKernels[_t77].name,\"))\")):e.push(\"  gl_FragData[\".concat(_t77+1,\"] = \").concat(this.useLegacyEncoder?\"legacyEncode32\":\"encode32\",\"(subKernelResult_\").concat(this.subKernels[_t77].name,\")\"));}return a.linesToString(e);}},{key:\"getMainResultMemoryOptimizedFloats\",value:function getMainResultMemoryOptimizedFloats(){var e=[\"  index *= 4\"];switch(this.returnType){case\"Number\":case\"Integer\":case\"Float\":var _t78=[\"r\",\"g\",\"b\",\"a\"];for(var _r80=0;_r80<_t78.length;_r80++){var _n71=_t78[_r80];this.getMainResultKernelMemoryOptimizedFloats(e,_n71),this.getMainResultSubKernelMemoryOptimizedFloats(e,_n71),_r80+1<_t78.length&&e.push(\"  index += 1\");}break;default:throw new Error(\"optimized output only usable with Numbers, \".concat(this.returnType,\" specified\"));}return a.linesToString(e);}},{key:\"getMainResultKernelMemoryOptimizedFloats\",value:function getMainResultKernelMemoryOptimizedFloats(e,t){e.push(\"  threadId = indexTo3D(index, uOutputDim)\",\"  kernel()\",\"  gl_FragData[0].\".concat(t,\" = kernelResult\"));}},{key:\"getMainResultSubKernelMemoryOptimizedFloats\",value:function getMainResultSubKernelMemoryOptimizedFloats(e,t){if(!this.subKernels)return e;for(var _r81=0;_r81<this.subKernels.length;_r81++){\"Integer\"===this.subKernels[_r81].returnType?e.push(\"  gl_FragData[\".concat(_r81+1,\"].\").concat(t,\" = float(subKernelResult_\").concat(this.subKernels[_r81].name,\")\")):e.push(\"  gl_FragData[\".concat(_r81+1,\"].\").concat(t,\" = subKernelResult_\").concat(this.subKernels[_r81].name));}}},{key:\"getMainResultKernelNumberTexture\",value:function getMainResultKernelNumberTexture(){return[\"  threadId = indexTo3D(index, uOutputDim)\",\"  kernel()\",\"  gl_FragData[0][0] = kernelResult\"];}},{key:\"getMainResultSubKernelNumberTexture\",value:function getMainResultSubKernelNumberTexture(){var e=[];if(!this.subKernels)return e;for(var _t79=0;_t79<this.subKernels.length;++_t79){var _r82=this.subKernels[_t79];\"Integer\"===_r82.returnType?e.push(\"  gl_FragData[\".concat(_t79+1,\"][0] = float(subKernelResult_\").concat(_r82.name,\")\")):e.push(\"  gl_FragData[\".concat(_t79+1,\"][0] = subKernelResult_\").concat(_r82.name));}return e;}},{key:\"getMainResultKernelArray2Texture\",value:function getMainResultKernelArray2Texture(){return[\"  threadId = indexTo3D(index, uOutputDim)\",\"  kernel()\",\"  gl_FragData[0][0] = kernelResult[0]\",\"  gl_FragData[0][1] = kernelResult[1]\"];}},{key:\"getMainResultSubKernelArray2Texture\",value:function getMainResultSubKernelArray2Texture(){var e=[];if(!this.subKernels)return e;for(var _t80=0;_t80<this.subKernels.length;++_t80){e.push(\"  gl_FragData[\".concat(_t80+1,\"][0] = subKernelResult_\").concat(this.subKernels[_t80].name,\"[0]\"),\"  gl_FragData[\".concat(_t80+1,\"][1] = subKernelResult_\").concat(this.subKernels[_t80].name,\"[1]\"));}return e;}},{key:\"getMainResultKernelArray3Texture\",value:function getMainResultKernelArray3Texture(){return[\"  threadId = indexTo3D(index, uOutputDim)\",\"  kernel()\",\"  gl_FragData[0][0] = kernelResult[0]\",\"  gl_FragData[0][1] = kernelResult[1]\",\"  gl_FragData[0][2] = kernelResult[2]\"];}},{key:\"getMainResultSubKernelArray3Texture\",value:function getMainResultSubKernelArray3Texture(){var e=[];if(!this.subKernels)return e;for(var _t81=0;_t81<this.subKernels.length;++_t81){e.push(\"  gl_FragData[\".concat(_t81+1,\"][0] = subKernelResult_\").concat(this.subKernels[_t81].name,\"[0]\"),\"  gl_FragData[\".concat(_t81+1,\"][1] = subKernelResult_\").concat(this.subKernels[_t81].name,\"[1]\"),\"  gl_FragData[\".concat(_t81+1,\"][2] = subKernelResult_\").concat(this.subKernels[_t81].name,\"[2]\"));}return e;}},{key:\"getMainResultKernelArray4Texture\",value:function getMainResultKernelArray4Texture(){return[\"  threadId = indexTo3D(index, uOutputDim)\",\"  kernel()\",\"  gl_FragData[0] = kernelResult\"];}},{key:\"getMainResultSubKernelArray4Texture\",value:function getMainResultSubKernelArray4Texture(){var e=[];if(!this.subKernels)return e;switch(this.returnType){case\"Number\":case\"Float\":case\"Integer\":for(var _t82=0;_t82<this.subKernels.length;++_t82){\"Integer\"===this.subKernels[_t82].returnType?e.push(\"  gl_FragData[\".concat(_t82+1,\"] = float(subKernelResult_\").concat(this.subKernels[_t82].name,\")\")):e.push(\"  gl_FragData[\".concat(_t82+1,\"] = subKernelResult_\").concat(this.subKernels[_t82].name));}break;case\"Array(2)\":for(var _t83=0;_t83<this.subKernels.length;++_t83){e.push(\"  gl_FragData[\".concat(_t83+1,\"][0] = subKernelResult_\").concat(this.subKernels[_t83].name,\"[0]\"),\"  gl_FragData[\".concat(_t83+1,\"][1] = subKernelResult_\").concat(this.subKernels[_t83].name,\"[1]\"));}break;case\"Array(3)\":for(var _t84=0;_t84<this.subKernels.length;++_t84){e.push(\"  gl_FragData[\".concat(_t84+1,\"][0] = subKernelResult_\").concat(this.subKernels[_t84].name,\"[0]\"),\"  gl_FragData[\".concat(_t84+1,\"][1] = subKernelResult_\").concat(this.subKernels[_t84].name,\"[1]\"),\"  gl_FragData[\".concat(_t84+1,\"][2] = subKernelResult_\").concat(this.subKernels[_t84].name,\"[2]\"));}break;case\"Array(4)\":for(var _t85=0;_t85<this.subKernels.length;++_t85){e.push(\"  gl_FragData[\".concat(_t85+1,\"][0] = subKernelResult_\").concat(this.subKernels[_t85].name,\"[0]\"),\"  gl_FragData[\".concat(_t85+1,\"][1] = subKernelResult_\").concat(this.subKernels[_t85].name,\"[1]\"),\"  gl_FragData[\".concat(_t85+1,\"][2] = subKernelResult_\").concat(this.subKernels[_t85].name,\"[2]\"),\"  gl_FragData[\".concat(_t85+1,\"][3] = subKernelResult_\").concat(this.subKernels[_t85].name,\"[3]\"));}}return e;}},{key:\"replaceArtifacts\",value:function replaceArtifacts(e,t){return e.replace(/[ ]*__([A-Z]+[0-9]*([_]?[A-Z]*[0-9]?)*)__;\\n/g,function(e,r){if(t.hasOwnProperty(r))return t[r];throw\"unhandled artifact \".concat(r);});}},{key:\"getFragmentShader\",value:function getFragmentShader(e){return null!==this.compiledFragmentShader?this.compiledFragmentShader:this.compiledFragmentShader=this.replaceArtifacts(this.constructor.fragmentShader,this._getFragShaderArtifactMap(e));}},{key:\"getVertexShader\",value:function getVertexShader(e){return null!==this.compiledVertexShader?this.compiledVertexShader:this.compiledVertexShader=this.replaceArtifacts(this.constructor.vertexShader,this._getVertShaderArtifactMap(e));}},{key:\"toString\",value:function toString(){var e=a.linesToString([\"const gl = context\"]);return h(this.constructor,arguments,this,e);}},{key:\"destroy\",value:function destroy(e){if(!this.context)return;this.buffer&&this.context.deleteBuffer(this.buffer),this.framebuffer&&this.context.deleteFramebuffer(this.framebuffer);for(var _e234 in this.rawValueFramebuffers){for(var _t86 in this.rawValueFramebuffers[_e234]){this.context.deleteFramebuffer(this.rawValueFramebuffers[_e234][_t86]),delete this.rawValueFramebuffers[_e234][_t86];}delete this.rawValueFramebuffers[_e234];}if(this.vertShader&&this.context.deleteShader(this.vertShader),this.fragShader&&this.context.deleteShader(this.fragShader),this.program&&this.context.deleteProgram(this.program),this.texture){this.texture[\"delete\"]();var _e235=this.textureCache.indexOf(this.texture.texture);_e235>-1&&this.textureCache.splice(_e235,1),this.texture=null;}if(this.mappedTextures&&this.mappedTextures.length){for(var _e236=0;_e236<this.mappedTextures.length;_e236++){var _t87=this.mappedTextures[_e236];_t87[\"delete\"]();var _r83=this.textureCache.indexOf(_t87.texture);_r83>-1&&this.textureCache.splice(_r83,1);}this.mappedTextures=null;}if(this.kernelArguments)for(var _e237=0;_e237<this.kernelArguments.length;_e237++){this.kernelArguments[_e237].destroy();}if(this.kernelConstants)for(var _e238=0;_e238<this.kernelConstants.length;_e238++){this.kernelConstants[_e238].destroy();}for(;this.textureCache.length>0;){var _e239=this.textureCache.pop();this.context.deleteTexture(_e239);}if(e){var _e240=y.indexOf(this.canvas);_e240>=0&&(y[_e240]=null,b[_e240]=null);}if(this.destroyExtensions(),delete this.context,delete this.canvas,!this.gpu)return;var t=this.gpu.kernels.indexOf(this);-1!==t&&this.gpu.kernels.splice(t,1);}},{key:\"destroyExtensions\",value:function destroyExtensions(){this.extensions.OES_texture_float=null,this.extensions.OES_texture_float_linear=null,this.extensions.OES_element_index_uint=null,this.extensions.WEBGL_draw_buffers=null;}},{key:\"toJSON\",value:function toJSON(){var e=_get(_getPrototypeOf(WebGLKernel.prototype),\"toJSON\",this).call(this);return e.functionNodes=i.fromKernel(this,s).toJSON(),e.settings.threadDim=this.threadDim,e;}}],[{key:\"isSupported\",get:function get(){return null!==p?p:(this.setupFeatureChecks(),p=this.isContextMatch(m));}},{key:\"setupFeatureChecks\",value:function setupFeatureChecks(){\"undefined\"!=typeof document?d=document.createElement(\"canvas\"):\"undefined\"!=typeof OffscreenCanvas&&(d=new OffscreenCanvas(0,0)),d&&(m=d.getContext(\"webgl\")||d.getContext(\"experimental-webgl\"))&&m.getExtension&&(f={OES_texture_float:m.getExtension(\"OES_texture_float\"),OES_texture_float_linear:m.getExtension(\"OES_texture_float_linear\"),OES_element_index_uint:m.getExtension(\"OES_element_index_uint\"),WEBGL_draw_buffers:m.getExtension(\"WEBGL_draw_buffers\")},g=this.getFeatures());}},{key:\"isContextMatch\",value:function isContextMatch(e){return\"undefined\"!=typeof WebGLRenderingContext&&e instanceof WebGLRenderingContext;}},{key:\"getIsTextureFloat\",value:function getIsTextureFloat(){return Boolean(f.OES_texture_float);}},{key:\"getIsDrawBuffers\",value:function getIsDrawBuffers(){return Boolean(f.WEBGL_draw_buffers);}},{key:\"getChannelCount\",value:function getChannelCount(){return f.WEBGL_draw_buffers?m.getParameter(f.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL):1;}},{key:\"getMaxTextureSize\",value:function getMaxTextureSize(){return m.getParameter(m.MAX_TEXTURE_SIZE);}},{key:\"lookupKernelValueType\",value:function lookupKernelValueType(e,t,r,n){return c(e,t,r,n);}},{key:\"testCanvas\",get:function get(){return d;}},{key:\"testContext\",get:function get(){return m;}},{key:\"features\",get:function get(){return g;}},{key:\"fragmentShader\",get:function get(){return u;}},{key:\"vertexShader\",get:function get(){return l;}},{key:\"destroyContext\",value:function destroyContext(e){var t=e.getExtension(\"WEBGL_lose_context\");t&&t.loseContext();}}]);return WebGLKernel;}(n)};},{\"../../plugins/math-random-uniformly-distributed\":112,\"../../utils\":114,\"../function-builder\":9,\"../gl/kernel\":13,\"../gl/kernel-string\":12,\"./fragment-shader\":37,\"./function-node\":38,\"./kernel-value-maps\":39,\"./vertex-shader\":71}],71:[function(e,t,r){t.exports={vertexShader:\"__FLOAT_TACTIC_DECLARATION__;\\n__INT_TACTIC_DECLARATION__;\\n__SAMPLER_2D_TACTIC_DECLARATION__;\\n\\nattribute vec2 aPos;\\nattribute vec2 aTexCoord;\\n\\nvarying vec2 vTexCoord;\\nuniform vec2 ratio;\\n\\nvoid main(void) {\\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\\n  vTexCoord = aTexCoord;\\n}\"};},{}],72:[function(e,t,r){var n=\"#version 300 es\\n__HEADER__;\\n__FLOAT_TACTIC_DECLARATION__;\\n__INT_TACTIC_DECLARATION__;\\n__SAMPLER_2D_TACTIC_DECLARATION__;\\n__SAMPLER_2D_ARRAY_TACTIC_DECLARATION__;\\n\\nconst int LOOP_MAX = __LOOP_MAX__;\\n\\n__PLUGINS__;\\n__CONSTANTS__;\\n\\nin vec2 vTexCoord;\\n\\nfloat atan2(float v1, float v2) {\\n  if (v1 == 0.0 || v2 == 0.0) return 0.0;\\n  return atan(v1 / v2);\\n}\\n\\nfloat cbrt(float x) {\\n  if (x >= 0.0) {\\n    return pow(x, 1.0 / 3.0);\\n  } else {\\n    return -pow(x, 1.0 / 3.0);\\n  }\\n}\\n\\nfloat expm1(float x) {\\n  return pow(\".concat(Math.E,\", x) - 1.0; \\n}\\n\\nfloat fround(highp float x) {\\n  return x;\\n}\\n\\nfloat imul(float v1, float v2) {\\n  return float(int(v1) * int(v2));\\n}\\n\\nfloat log10(float x) {\\n  return log2(x) * (1.0 / log2(10.0));\\n}\\n\\nfloat log1p(float x) {\\n  return log(1.0 + x);\\n}\\n\\nfloat _pow(float v1, float v2) {\\n  if (v2 == 0.0) return 1.0;\\n  return pow(v1, v2);\\n}\\n\\nfloat _round(float x) {\\n  return floor(x + 0.5);\\n}\\n\\n\\nconst int BIT_COUNT = 32;\\nint modi(int x, int y) {\\n  return x - y * (x / y);\\n}\\n\\nint bitwiseOr(int a, int b) {\\n  int result = 0;\\n  int n = 1;\\n  \\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {\\n      result += n;\\n    }\\n    a = a / 2;\\n    b = b / 2;\\n    n = n * 2;\\n    if(!(a > 0 || b > 0)) {\\n      break;\\n    }\\n  }\\n  return result;\\n}\\nint bitwiseXOR(int a, int b) {\\n  int result = 0;\\n  int n = 1;\\n  \\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {\\n      result += n;\\n    }\\n    a = a / 2;\\n    b = b / 2;\\n    n = n * 2;\\n    if(!(a > 0 || b > 0)) {\\n      break;\\n    }\\n  }\\n  return result;\\n}\\nint bitwiseAnd(int a, int b) {\\n  int result = 0;\\n  int n = 1;\\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\\n      result += n;\\n    }\\n    a = a / 2;\\n    b = b / 2;\\n    n = n * 2;\\n    if(!(a > 0 && b > 0)) {\\n      break;\\n    }\\n  }\\n  return result;\\n}\\nint bitwiseNot(int a) {\\n  int result = 0;\\n  int n = 1;\\n  \\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if (modi(a, 2) == 0) {\\n      result += n;    \\n    }\\n    a = a / 2;\\n    n = n * 2;\\n  }\\n  return result;\\n}\\nint bitwiseZeroFillLeftShift(int n, int shift) {\\n  int maxBytes = BIT_COUNT;\\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if (maxBytes >= n) {\\n      break;\\n    }\\n    maxBytes *= 2;\\n  }\\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if (i >= shift) {\\n      break;\\n    }\\n    n *= 2;\\n  }\\n\\n  int result = 0;\\n  int byteVal = 1;\\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if (i >= maxBytes) break;\\n    if (modi(n, 2) > 0) { result += byteVal; }\\n    n = int(n / 2);\\n    byteVal *= 2;\\n  }\\n  return result;\\n}\\n\\nint bitwiseSignedRightShift(int num, int shifts) {\\n  return int(floor(float(num) / pow(2.0, float(shifts))));\\n}\\n\\nint bitwiseZeroFillRightShift(int n, int shift) {\\n  int maxBytes = BIT_COUNT;\\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if (maxBytes >= n) {\\n      break;\\n    }\\n    maxBytes *= 2;\\n  }\\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if (i >= shift) {\\n      break;\\n    }\\n    n /= 2;\\n  }\\n  int result = 0;\\n  int byteVal = 1;\\n  for (int i = 0; i < BIT_COUNT; i++) {\\n    if (i >= maxBytes) break;\\n    if (modi(n, 2) > 0) { result += byteVal; }\\n    n = int(n / 2);\\n    byteVal *= 2;\\n  }\\n  return result;\\n}\\n\\nvec2 integerMod(vec2 x, float y) {\\n  vec2 res = floor(mod(x, y));\\n  return res * step(1.0 - floor(y), -res);\\n}\\n\\nvec3 integerMod(vec3 x, float y) {\\n  vec3 res = floor(mod(x, y));\\n  return res * step(1.0 - floor(y), -res);\\n}\\n\\nvec4 integerMod(vec4 x, vec4 y) {\\n  vec4 res = floor(mod(x, y));\\n  return res * step(1.0 - floor(y), -res);\\n}\\n\\nfloat integerMod(float x, float y) {\\n  float res = floor(mod(x, y));\\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\\n}\\n\\nint integerMod(int x, int y) {\\n  return x - (y * int(x/y));\\n}\\n\\n__DIVIDE_WITH_INTEGER_CHECK__;\\n\\n// Here be dragons!\\n// DO NOT OPTIMIZE THIS CODE\\n// YOU WILL BREAK SOMETHING ON SOMEBODY'S MACHINE\\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\\nfloat decode32(vec4 texel) {\\n  __DECODE32_ENDIANNESS__;\\n  texel *= 255.0;\\n  vec2 gte128;\\n  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;\\n  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;\\n  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);\\n  float res = exp2(round(exponent));\\n  texel.b = texel.b - 128.0 * gte128.x;\\n  res = dot(texel, SCALE_FACTOR) * exp2(round(exponent-23.0)) + res;\\n  res *= gte128.y * -2.0 + 1.0;\\n  return res;\\n}\\n\\nfloat decode16(vec4 texel, int index) {\\n  int channel = integerMod(index, 2);\\n  return texel[channel*2] * 255.0 + texel[channel*2 + 1] * 65280.0;\\n}\\n\\nfloat decode8(vec4 texel, int index) {\\n  int channel = integerMod(index, 4);\\n  return texel[channel] * 255.0;\\n}\\n\\nvec4 legacyEncode32(float f) {\\n  float F = abs(f);\\n  float sign = f < 0.0 ? 1.0 : 0.0;\\n  float exponent = floor(log2(F));\\n  float mantissa = (exp2(-exponent) * F);\\n  // exponent += floor(log2(mantissa));\\n  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\\n  texel.rg = integerMod(texel.rg, 256.0);\\n  texel.b = integerMod(texel.b, 128.0);\\n  texel.a = exponent*0.5 + 63.5;\\n  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\\n  texel = floor(texel);\\n  texel *= 0.003921569; // 1/255\\n  __ENCODE32_ENDIANNESS__;\\n  return texel;\\n}\\n\\n// https://github.com/gpujs/gpu.js/wiki/Encoder-details\\nvec4 encode32(float value) {\\n  if (value == 0.0) return vec4(0, 0, 0, 0);\\n\\n  float exponent;\\n  float mantissa;\\n  vec4  result;\\n  float sgn;\\n\\n  sgn = step(0.0, -value);\\n  value = abs(value);\\n\\n  exponent = floor(log2(value));\\n\\n  mantissa = value*pow(2.0, -exponent)-1.0;\\n  exponent = exponent+127.0;\\n  result   = vec4(0,0,0,0);\\n\\n  result.a = floor(exponent/2.0);\\n  exponent = exponent - result.a*2.0;\\n  result.a = result.a + 128.0*sgn;\\n\\n  result.b = floor(mantissa * 128.0);\\n  mantissa = mantissa - result.b / 128.0;\\n  result.b = result.b + exponent*128.0;\\n\\n  result.g = floor(mantissa*32768.0);\\n  mantissa = mantissa - result.g/32768.0;\\n\\n  result.r = floor(mantissa*8388608.0);\\n  return result/255.0;\\n}\\n// Dragons end here\\n\\nint index;\\nivec3 threadId;\\n\\nivec3 indexTo3D(int idx, ivec3 texDim) {\\n  int z = int(idx / (texDim.x * texDim.y));\\n  idx -= z * int(texDim.x * texDim.y);\\n  int y = int(idx / texDim.x);\\n  int x = int(integerMod(idx, texDim.x));\\n  return ivec3(x, y, z);\\n}\\n\\nfloat get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  int index = x + texDim.x * (y + texDim.y * z);\\n  int w = texSize.x;\\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\\n  vec4 texel = texture(tex, st / vec2(texSize));\\n  return decode32(texel);\\n}\\n\\nfloat get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  int index = x + (texDim.x * (y + (texDim.y * z)));\\n  int w = texSize.x * 2;\\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\\n  vec4 texel = texture(tex, st / vec2(texSize.x * 2, texSize.y));\\n  return decode16(texel, index);\\n}\\n\\nfloat get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  int index = x + (texDim.x * (y + (texDim.y * z)));\\n  int w = texSize.x * 4;\\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\\n  vec4 texel = texture(tex, st / vec2(texSize.x * 4, texSize.y));\\n  return decode8(texel, index);\\n}\\n\\nfloat getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  int index = x + (texDim.x * (y + (texDim.y * z)));\\n  int channel = integerMod(index, 4);\\n  index = index / 4;\\n  int w = texSize.x;\\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\\n  index = index / 4;\\n  vec4 texel = texture(tex, st / vec2(texSize));\\n  return texel[channel];\\n}\\n\\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  int index = x + texDim.x * (y + texDim.y * z);\\n  int w = texSize.x;\\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\\n  return texture(tex, st / vec2(texSize));\\n}\\n\\nvec4 getImage3D(sampler2DArray tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  int index = x + texDim.x * (y + texDim.y * z);\\n  int w = texSize.x;\\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\\n  return texture(tex, vec3(st / vec2(texSize), z));\\n}\\n\\nfloat getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\\n  return result[0];\\n}\\n\\nvec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\\n  return vec2(result[0], result[1]);\\n}\\n\\nvec2 getMemoryOptimizedVec2(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  int index = x + texDim.x * (y + texDim.y * z);\\n  int channel = integerMod(index, 2);\\n  index = index / 2;\\n  int w = texSize.x;\\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\\n  vec4 texel = texture(tex, st / vec2(texSize));\\n  if (channel == 0) return vec2(texel.r, texel.g);\\n  if (channel == 1) return vec2(texel.b, texel.a);\\n  return vec2(0.0, 0.0);\\n}\\n\\nvec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\\n  return vec3(result[0], result[1], result[2]);\\n}\\n\\nvec3 getMemoryOptimizedVec3(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  int fieldIndex = 3 * (x + texDim.x * (y + texDim.y * z));\\n  int vectorIndex = fieldIndex / 4;\\n  int vectorOffset = fieldIndex - vectorIndex * 4;\\n  int readY = vectorIndex / texSize.x;\\n  int readX = vectorIndex - readY * texSize.x;\\n  vec4 tex1 = texture(tex, (vec2(readX, readY) + 0.5) / vec2(texSize));\\n\\n  if (vectorOffset == 0) {\\n    return tex1.xyz;\\n  } else if (vectorOffset == 1) {\\n    return tex1.yzw;\\n  } else {\\n    readX++;\\n    if (readX >= texSize.x) {\\n      readX = 0;\\n      readY++;\\n    }\\n    vec4 tex2 = texture(tex, vec2(readX, readY) / vec2(texSize));\\n    if (vectorOffset == 2) {\\n      return vec3(tex1.z, tex1.w, tex2.x);\\n    } else {\\n      return vec3(tex1.w, tex2.x, tex2.y);\\n    }\\n  }\\n}\\n\\nvec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  return getImage2D(tex, texSize, texDim, z, y, x);\\n}\\n\\nvec4 getMemoryOptimizedVec4(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\\n  int index = x + texDim.x * (y + texDim.y * z);\\n  int channel = integerMod(index, 2);\\n  int w = texSize.x;\\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\\n  vec4 texel = texture(tex, st / vec2(texSize));\\n  return vec4(texel.r, texel.g, texel.b, texel.a);\\n}\\n\\nvec4 actualColor;\\nvoid color(float r, float g, float b, float a) {\\n  actualColor = vec4(r,g,b,a);\\n}\\n\\nvoid color(float r, float g, float b) {\\n  color(r,g,b,1.0);\\n}\\n\\nfloat modulo(float number, float divisor) {\\n  if (number < 0.0) {\\n    number = abs(number);\\n    if (divisor < 0.0) {\\n      divisor = abs(divisor);\\n    }\\n    return -mod(number, divisor);\\n  }\\n  if (divisor < 0.0) {\\n    divisor = abs(divisor);\\n  }\\n  return mod(number, divisor);\\n}\\n\\n__INJECTED_NATIVE__;\\n__MAIN_CONSTANTS__;\\n__MAIN_ARGUMENTS__;\\n__KERNEL__;\\n\\nvoid main(void) {\\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\\n  __MAIN_RESULT__;\\n}\");t.exports={fragmentShader:n};},{}],73:[function(e,t,r){var _e241=e(\"../../utils\"),n=_e241.utils,_e242=e(\"../web-gl/function-node\"),i=_e242.WebGLFunctionNode;t.exports={WebGL2FunctionNode:/*#__PURE__*/function(_i69){_inherits(WebGL2FunctionNode,_i69);var _super57=_createSuper(WebGL2FunctionNode);function WebGL2FunctionNode(){_classCallCheck(this,WebGL2FunctionNode);return _super57.apply(this,arguments);}_createClass(WebGL2FunctionNode,[{key:\"astIdentifierExpression\",value:function astIdentifierExpression(e,t){if(\"Identifier\"!==e.type)throw this.astErrorOutput(\"IdentifierExpression - not an Identifier\",e);var r=this.getType(e),i=n.sanitizeName(e.name);return\"Infinity\"===e.name?t.push(\"intBitsToFloat(2139095039)\"):\"Boolean\"===r&&this.argumentNames.indexOf(i)>-1?t.push(\"bool(user_\".concat(i,\")\")):t.push(\"user_\".concat(i)),t;}}]);return WebGL2FunctionNode;}(i)};},{\"../../utils\":114,\"../web-gl/function-node\":38}],74:[function(e,t,r){var _e243=e(\"./kernel-value/boolean\"),n=_e243.WebGL2KernelValueBoolean,_e244=e(\"./kernel-value/float\"),i=_e244.WebGL2KernelValueFloat,_e245=e(\"./kernel-value/integer\"),s=_e245.WebGL2KernelValueInteger,_e246=e(\"./kernel-value/html-image\"),a=_e246.WebGL2KernelValueHTMLImage,_e247=e(\"./kernel-value/dynamic-html-image\"),o=_e247.WebGL2KernelValueDynamicHTMLImage,_e248=e(\"./kernel-value/html-image-array\"),u=_e248.WebGL2KernelValueHTMLImageArray,_e249=e(\"./kernel-value/dynamic-html-image-array\"),l=_e249.WebGL2KernelValueDynamicHTMLImageArray,_e250=e(\"./kernel-value/html-video\"),h=_e250.WebGL2KernelValueHTMLVideo,_e251=e(\"./kernel-value/dynamic-html-video\"),c=_e251.WebGL2KernelValueDynamicHTMLVideo,_e252=e(\"./kernel-value/single-input\"),p=_e252.WebGL2KernelValueSingleInput,_e253=e(\"./kernel-value/dynamic-single-input\"),d=_e253.WebGL2KernelValueDynamicSingleInput,_e254=e(\"./kernel-value/unsigned-input\"),m=_e254.WebGL2KernelValueUnsignedInput,_e255=e(\"./kernel-value/dynamic-unsigned-input\"),f=_e255.WebGL2KernelValueDynamicUnsignedInput,_e256=e(\"./kernel-value/memory-optimized-number-texture\"),g=_e256.WebGL2KernelValueMemoryOptimizedNumberTexture,_e257=e(\"./kernel-value/dynamic-memory-optimized-number-texture\"),x=_e257.WebGL2KernelValueDynamicMemoryOptimizedNumberTexture,_e258=e(\"./kernel-value/number-texture\"),y=_e258.WebGL2KernelValueNumberTexture,_e259=e(\"./kernel-value/dynamic-number-texture\"),b=_e259.WebGL2KernelValueDynamicNumberTexture,_e260=e(\"./kernel-value/single-array\"),T=_e260.WebGL2KernelValueSingleArray,_e261=e(\"./kernel-value/dynamic-single-array\"),v=_e261.WebGL2KernelValueDynamicSingleArray,_e262=e(\"./kernel-value/single-array1d-i\"),S=_e262.WebGL2KernelValueSingleArray1DI,_e263=e(\"./kernel-value/dynamic-single-array1d-i\"),A=_e263.WebGL2KernelValueDynamicSingleArray1DI,_e264=e(\"./kernel-value/single-array2d-i\"),_=_e264.WebGL2KernelValueSingleArray2DI,_e265=e(\"./kernel-value/dynamic-single-array2d-i\"),E=_e265.WebGL2KernelValueDynamicSingleArray2DI,_e266=e(\"./kernel-value/single-array3d-i\"),w=_e266.WebGL2KernelValueSingleArray3DI,_e267=e(\"./kernel-value/dynamic-single-array3d-i\"),k=_e267.WebGL2KernelValueDynamicSingleArray3DI,_e268=e(\"./kernel-value/array2\"),I=_e268.WebGL2KernelValueArray2,_e269=e(\"./kernel-value/array3\"),D=_e269.WebGL2KernelValueArray3,_e270=e(\"./kernel-value/array4\"),C=_e270.WebGL2KernelValueArray4,_e271=e(\"./kernel-value/unsigned-array\"),$=_e271.WebGL2KernelValueUnsignedArray,_e272=e(\"./kernel-value/dynamic-unsigned-array\"),L=_e272.WebGL2KernelValueDynamicUnsignedArray,R={unsigned:{dynamic:{Boolean:n,Integer:s,Float:i,Array:L,\"Array(2)\":I,\"Array(3)\":D,\"Array(4)\":C,\"Array1D(2)\":!1,\"Array1D(3)\":!1,\"Array1D(4)\":!1,\"Array2D(2)\":!1,\"Array2D(3)\":!1,\"Array2D(4)\":!1,\"Array3D(2)\":!1,\"Array3D(3)\":!1,\"Array3D(4)\":!1,Input:f,NumberTexture:b,\"ArrayTexture(1)\":b,\"ArrayTexture(2)\":b,\"ArrayTexture(3)\":b,\"ArrayTexture(4)\":b,MemoryOptimizedNumberTexture:x,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:l,HTMLVideo:c},\"static\":{Boolean:n,Float:i,Integer:s,Array:$,\"Array(2)\":I,\"Array(3)\":D,\"Array(4)\":C,\"Array1D(2)\":!1,\"Array1D(3)\":!1,\"Array1D(4)\":!1,\"Array2D(2)\":!1,\"Array2D(3)\":!1,\"Array2D(4)\":!1,\"Array3D(2)\":!1,\"Array3D(3)\":!1,\"Array3D(4)\":!1,Input:m,NumberTexture:y,\"ArrayTexture(1)\":y,\"ArrayTexture(2)\":y,\"ArrayTexture(3)\":y,\"ArrayTexture(4)\":y,MemoryOptimizedNumberTexture:x,HTMLCanvas:a,OffscreenCanvas:a,HTMLImage:a,ImageBitmap:a,ImageData:a,HTMLImageArray:u,HTMLVideo:h}},single:{dynamic:{Boolean:n,Integer:s,Float:i,Array:v,\"Array(2)\":I,\"Array(3)\":D,\"Array(4)\":C,\"Array1D(2)\":A,\"Array1D(3)\":A,\"Array1D(4)\":A,\"Array2D(2)\":E,\"Array2D(3)\":E,\"Array2D(4)\":E,\"Array3D(2)\":k,\"Array3D(3)\":k,\"Array3D(4)\":k,Input:d,NumberTexture:b,\"ArrayTexture(1)\":b,\"ArrayTexture(2)\":b,\"ArrayTexture(3)\":b,\"ArrayTexture(4)\":b,MemoryOptimizedNumberTexture:x,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:l,HTMLVideo:c},\"static\":{Boolean:n,Float:i,Integer:s,Array:T,\"Array(2)\":I,\"Array(3)\":D,\"Array(4)\":C,\"Array1D(2)\":S,\"Array1D(3)\":S,\"Array1D(4)\":S,\"Array2D(2)\":_,\"Array2D(3)\":_,\"Array2D(4)\":_,\"Array3D(2)\":w,\"Array3D(3)\":w,\"Array3D(4)\":w,Input:p,NumberTexture:y,\"ArrayTexture(1)\":y,\"ArrayTexture(2)\":y,\"ArrayTexture(3)\":y,\"ArrayTexture(4)\":y,MemoryOptimizedNumberTexture:g,HTMLCanvas:a,OffscreenCanvas:a,HTMLImage:a,ImageBitmap:a,ImageData:a,HTMLImageArray:u,HTMLVideo:h}}};t.exports={kernelValueMaps:R,lookupKernelValueType:function lookupKernelValueType(e,t,r,n){if(!e)throw new Error(\"type missing\");if(!t)throw new Error(\"dynamic missing\");if(!r)throw new Error(\"precision missing\");n.type&&(e=n.type);var i=R[r][t];if(!1===i[e])return null;if(void 0===i[e])throw new Error(\"Could not find a KernelValue for \".concat(e));return i[e];}};},{\"./kernel-value/array2\":75,\"./kernel-value/array3\":76,\"./kernel-value/array4\":77,\"./kernel-value/boolean\":78,\"./kernel-value/dynamic-html-image\":80,\"./kernel-value/dynamic-html-image-array\":79,\"./kernel-value/dynamic-html-video\":81,\"./kernel-value/dynamic-memory-optimized-number-texture\":82,\"./kernel-value/dynamic-number-texture\":83,\"./kernel-value/dynamic-single-array\":84,\"./kernel-value/dynamic-single-array1d-i\":85,\"./kernel-value/dynamic-single-array2d-i\":86,\"./kernel-value/dynamic-single-array3d-i\":87,\"./kernel-value/dynamic-single-input\":88,\"./kernel-value/dynamic-unsigned-array\":89,\"./kernel-value/dynamic-unsigned-input\":90,\"./kernel-value/float\":91,\"./kernel-value/html-image\":93,\"./kernel-value/html-image-array\":92,\"./kernel-value/html-video\":94,\"./kernel-value/integer\":95,\"./kernel-value/memory-optimized-number-texture\":96,\"./kernel-value/number-texture\":97,\"./kernel-value/single-array\":98,\"./kernel-value/single-array1d-i\":99,\"./kernel-value/single-array2d-i\":100,\"./kernel-value/single-array3d-i\":101,\"./kernel-value/single-input\":102,\"./kernel-value/unsigned-array\":103,\"./kernel-value/unsigned-input\":104}],75:[function(e,t,r){var _e273=e(\"../../web-gl/kernel-value/array2\"),n=_e273.WebGLKernelValueArray2;t.exports={WebGL2KernelValueArray2:/*#__PURE__*/function(_n72){_inherits(WebGL2KernelValueArray2,_n72);var _super58=_createSuper(WebGL2KernelValueArray2);function WebGL2KernelValueArray2(){_classCallCheck(this,WebGL2KernelValueArray2);return _super58.apply(this,arguments);}return _createClass(WebGL2KernelValueArray2);}(n)};},{\"../../web-gl/kernel-value/array2\":41}],76:[function(e,t,r){var _e274=e(\"../../web-gl/kernel-value/array3\"),n=_e274.WebGLKernelValueArray3;t.exports={WebGL2KernelValueArray3:/*#__PURE__*/function(_n73){_inherits(WebGL2KernelValueArray3,_n73);var _super59=_createSuper(WebGL2KernelValueArray3);function WebGL2KernelValueArray3(){_classCallCheck(this,WebGL2KernelValueArray3);return _super59.apply(this,arguments);}return _createClass(WebGL2KernelValueArray3);}(n)};},{\"../../web-gl/kernel-value/array3\":42}],77:[function(e,t,r){var _e275=e(\"../../web-gl/kernel-value/array4\"),n=_e275.WebGLKernelValueArray4;t.exports={WebGL2KernelValueArray4:/*#__PURE__*/function(_n74){_inherits(WebGL2KernelValueArray4,_n74);var _super60=_createSuper(WebGL2KernelValueArray4);function WebGL2KernelValueArray4(){_classCallCheck(this,WebGL2KernelValueArray4);return _super60.apply(this,arguments);}return _createClass(WebGL2KernelValueArray4);}(n)};},{\"../../web-gl/kernel-value/array4\":43}],78:[function(e,t,r){var _e276=e(\"../../web-gl/kernel-value/boolean\"),n=_e276.WebGLKernelValueBoolean;t.exports={WebGL2KernelValueBoolean:/*#__PURE__*/function(_n75){_inherits(WebGL2KernelValueBoolean,_n75);var _super61=_createSuper(WebGL2KernelValueBoolean);function WebGL2KernelValueBoolean(){_classCallCheck(this,WebGL2KernelValueBoolean);return _super61.apply(this,arguments);}return _createClass(WebGL2KernelValueBoolean);}(n)};},{\"../../web-gl/kernel-value/boolean\":44}],79:[function(e,t,r){var _e277=e(\"../../../utils\"),n=_e277.utils,_e278=e(\"./html-image-array\"),i=_e278.WebGL2KernelValueHTMLImageArray;t.exports={WebGL2KernelValueDynamicHTMLImageArray:/*#__PURE__*/function(_i70){_inherits(WebGL2KernelValueDynamicHTMLImageArray,_i70);var _super62=_createSuper(WebGL2KernelValueDynamicHTMLImageArray);function WebGL2KernelValueDynamicHTMLImageArray(){_classCallCheck(this,WebGL2KernelValueDynamicHTMLImageArray);return _super62.apply(this,arguments);}_createClass(WebGL2KernelValueDynamicHTMLImageArray,[{key:\"getSource\",value:function getSource(){var e=this.getVariablePrecisionString();return n.linesToString([\"uniform \".concat(e,\" sampler2DArray \").concat(this.id),\"uniform \".concat(e,\" ivec2 \").concat(this.sizeId),\"uniform \".concat(e,\" ivec3 \").concat(this.dimensionsId)]);}},{key:\"updateValue\",value:function updateValue(e){var _e$=e[0],t=_e$.width,r=_e$.height;this.checkSize(t,r),this.dimensions=[t,r,e.length],this.textureSize=[t,r],this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),_get(_getPrototypeOf(WebGL2KernelValueDynamicHTMLImageArray.prototype),\"updateValue\",this).call(this,e);}}]);return WebGL2KernelValueDynamicHTMLImageArray;}(i)};},{\"../../../utils\":114,\"./html-image-array\":92}],80:[function(e,t,r){var _e279=e(\"../../../utils\"),n=_e279.utils,_e280=e(\"../../web-gl/kernel-value/dynamic-html-image\"),i=_e280.WebGLKernelValueDynamicHTMLImage;t.exports={WebGL2KernelValueDynamicHTMLImage:/*#__PURE__*/function(_i71){_inherits(WebGL2KernelValueDynamicHTMLImage,_i71);var _super63=_createSuper(WebGL2KernelValueDynamicHTMLImage);function WebGL2KernelValueDynamicHTMLImage(){_classCallCheck(this,WebGL2KernelValueDynamicHTMLImage);return _super63.apply(this,arguments);}_createClass(WebGL2KernelValueDynamicHTMLImage,[{key:\"getSource\",value:function getSource(){var e=this.getVariablePrecisionString();return n.linesToString([\"uniform \".concat(e,\" sampler2D \").concat(this.id),\"uniform \".concat(e,\" ivec2 \").concat(this.sizeId),\"uniform \".concat(e,\" ivec3 \").concat(this.dimensionsId)]);}}]);return WebGL2KernelValueDynamicHTMLImage;}(i)};},{\"../../../utils\":114,\"../../web-gl/kernel-value/dynamic-html-image\":45}],81:[function(e,t,r){var _e281=e(\"../../../utils\"),n=_e281.utils,_e282=e(\"./dynamic-html-image\"),i=_e282.WebGL2KernelValueDynamicHTMLImage;t.exports={WebGL2KernelValueDynamicHTMLVideo:/*#__PURE__*/function(_i72){_inherits(WebGL2KernelValueDynamicHTMLVideo,_i72);var _super64=_createSuper(WebGL2KernelValueDynamicHTMLVideo);function WebGL2KernelValueDynamicHTMLVideo(){_classCallCheck(this,WebGL2KernelValueDynamicHTMLVideo);return _super64.apply(this,arguments);}return _createClass(WebGL2KernelValueDynamicHTMLVideo);}(i)};},{\"../../../utils\":114,\"./dynamic-html-image\":80}],82:[function(e,t,r){var _e283=e(\"../../../utils\"),n=_e283.utils,_e284=e(\"../../web-gl/kernel-value/dynamic-memory-optimized-number-texture\"),i=_e284.WebGLKernelValueDynamicMemoryOptimizedNumberTexture;t.exports={WebGL2KernelValueDynamicMemoryOptimizedNumberTexture:/*#__PURE__*/function(_i73){_inherits(WebGL2KernelValueDynamicMemoryOptimizedNumberTexture,_i73);var _super65=_createSuper(WebGL2KernelValueDynamicMemoryOptimizedNumberTexture);function WebGL2KernelValueDynamicMemoryOptimizedNumberTexture(){_classCallCheck(this,WebGL2KernelValueDynamicMemoryOptimizedNumberTexture);return _super65.apply(this,arguments);}_createClass(WebGL2KernelValueDynamicMemoryOptimizedNumberTexture,[{key:\"getSource\",value:function getSource(){return n.linesToString([\"uniform sampler2D \".concat(this.id),\"uniform ivec2 \".concat(this.sizeId),\"uniform ivec3 \".concat(this.dimensionsId)]);}}]);return WebGL2KernelValueDynamicMemoryOptimizedNumberTexture;}(i)};},{\"../../../utils\":114,\"../../web-gl/kernel-value/dynamic-memory-optimized-number-texture\":47}],83:[function(e,t,r){var _e285=e(\"../../../utils\"),n=_e285.utils,_e286=e(\"../../web-gl/kernel-value/dynamic-number-texture\"),i=_e286.WebGLKernelValueDynamicNumberTexture;t.exports={WebGL2KernelValueDynamicNumberTexture:/*#__PURE__*/function(_i74){_inherits(WebGL2KernelValueDynamicNumberTexture,_i74);var _super66=_createSuper(WebGL2KernelValueDynamicNumberTexture);function WebGL2KernelValueDynamicNumberTexture(){_classCallCheck(this,WebGL2KernelValueDynamicNumberTexture);return _super66.apply(this,arguments);}_createClass(WebGL2KernelValueDynamicNumberTexture,[{key:\"getSource\",value:function getSource(){var e=this.getVariablePrecisionString();return n.linesToString([\"uniform \".concat(e,\" sampler2D \").concat(this.id),\"uniform \".concat(e,\" ivec2 \").concat(this.sizeId),\"uniform \".concat(e,\" ivec3 \").concat(this.dimensionsId)]);}}]);return WebGL2KernelValueDynamicNumberTexture;}(i)};},{\"../../../utils\":114,\"../../web-gl/kernel-value/dynamic-number-texture\":48}],84:[function(e,t,r){var _e287=e(\"../../../utils\"),n=_e287.utils,_e288=e(\"../../web-gl2/kernel-value/single-array\"),i=_e288.WebGL2KernelValueSingleArray;t.exports={WebGL2KernelValueDynamicSingleArray:/*#__PURE__*/function(_i75){_inherits(WebGL2KernelValueDynamicSingleArray,_i75);var _super67=_createSuper(WebGL2KernelValueDynamicSingleArray);function WebGL2KernelValueDynamicSingleArray(){_classCallCheck(this,WebGL2KernelValueDynamicSingleArray);return _super67.apply(this,arguments);}_createClass(WebGL2KernelValueDynamicSingleArray,[{key:\"getSource\",value:function getSource(){var e=this.getVariablePrecisionString();return n.linesToString([\"uniform \".concat(e,\" sampler2D \").concat(this.id),\"uniform \".concat(e,\" ivec2 \").concat(this.sizeId),\"uniform \".concat(e,\" ivec3 \").concat(this.dimensionsId)]);}},{key:\"updateValue\",value:function updateValue(e){this.dimensions=n.getDimensions(e,!0),this.textureSize=n.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),_get(_getPrototypeOf(WebGL2KernelValueDynamicSingleArray.prototype),\"updateValue\",this).call(this,e);}}]);return WebGL2KernelValueDynamicSingleArray;}(i)};},{\"../../../utils\":114,\"../../web-gl2/kernel-value/single-array\":98}],85:[function(e,t,r){var _e289=e(\"../../../utils\"),n=_e289.utils,_e290=e(\"../../web-gl2/kernel-value/single-array1d-i\"),i=_e290.WebGL2KernelValueSingleArray1DI;t.exports={WebGL2KernelValueDynamicSingleArray1DI:/*#__PURE__*/function(_i76){_inherits(WebGL2KernelValueDynamicSingleArray1DI,_i76);var _super68=_createSuper(WebGL2KernelValueDynamicSingleArray1DI);function WebGL2KernelValueDynamicSingleArray1DI(){_classCallCheck(this,WebGL2KernelValueDynamicSingleArray1DI);return _super68.apply(this,arguments);}_createClass(WebGL2KernelValueDynamicSingleArray1DI,[{key:\"getSource\",value:function getSource(){var e=this.getVariablePrecisionString();return n.linesToString([\"uniform \".concat(e,\" sampler2D \").concat(this.id),\"uniform \".concat(e,\" ivec2 \").concat(this.sizeId),\"uniform \".concat(e,\" ivec3 \").concat(this.dimensionsId)]);}},{key:\"updateValue\",value:function updateValue(e){this.setShape(e),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),_get(_getPrototypeOf(WebGL2KernelValueDynamicSingleArray1DI.prototype),\"updateValue\",this).call(this,e);}}]);return WebGL2KernelValueDynamicSingleArray1DI;}(i)};},{\"../../../utils\":114,\"../../web-gl2/kernel-value/single-array1d-i\":99}],86:[function(e,t,r){var _e291=e(\"../../../utils\"),n=_e291.utils,_e292=e(\"../../web-gl2/kernel-value/single-array2d-i\"),i=_e292.WebGL2KernelValueSingleArray2DI;t.exports={WebGL2KernelValueDynamicSingleArray2DI:/*#__PURE__*/function(_i77){_inherits(WebGL2KernelValueDynamicSingleArray2DI,_i77);var _super69=_createSuper(WebGL2KernelValueDynamicSingleArray2DI);function WebGL2KernelValueDynamicSingleArray2DI(){_classCallCheck(this,WebGL2KernelValueDynamicSingleArray2DI);return _super69.apply(this,arguments);}_createClass(WebGL2KernelValueDynamicSingleArray2DI,[{key:\"getSource\",value:function getSource(){var e=this.getVariablePrecisionString();return n.linesToString([\"uniform \".concat(e,\" sampler2D \").concat(this.id),\"uniform \".concat(e,\" ivec2 \").concat(this.sizeId),\"uniform \".concat(e,\" ivec3 \").concat(this.dimensionsId)]);}},{key:\"updateValue\",value:function updateValue(e){this.setShape(e),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),_get(_getPrototypeOf(WebGL2KernelValueDynamicSingleArray2DI.prototype),\"updateValue\",this).call(this,e);}}]);return WebGL2KernelValueDynamicSingleArray2DI;}(i)};},{\"../../../utils\":114,\"../../web-gl2/kernel-value/single-array2d-i\":100}],87:[function(e,t,r){var _e293=e(\"../../../utils\"),n=_e293.utils,_e294=e(\"../../web-gl2/kernel-value/single-array3d-i\"),i=_e294.WebGL2KernelValueSingleArray3DI;t.exports={WebGL2KernelValueDynamicSingleArray3DI:/*#__PURE__*/function(_i78){_inherits(WebGL2KernelValueDynamicSingleArray3DI,_i78);var _super70=_createSuper(WebGL2KernelValueDynamicSingleArray3DI);function WebGL2KernelValueDynamicSingleArray3DI(){_classCallCheck(this,WebGL2KernelValueDynamicSingleArray3DI);return _super70.apply(this,arguments);}_createClass(WebGL2KernelValueDynamicSingleArray3DI,[{key:\"getSource\",value:function getSource(){var e=this.getVariablePrecisionString();return n.linesToString([\"uniform \".concat(e,\" sampler2D \").concat(this.id),\"uniform \".concat(e,\" ivec2 \").concat(this.sizeId),\"uniform \".concat(e,\" ivec3 \").concat(this.dimensionsId)]);}},{key:\"updateValue\",value:function updateValue(e){this.setShape(e),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),_get(_getPrototypeOf(WebGL2KernelValueDynamicSingleArray3DI.prototype),\"updateValue\",this).call(this,e);}}]);return WebGL2KernelValueDynamicSingleArray3DI;}(i)};},{\"../../../utils\":114,\"../../web-gl2/kernel-value/single-array3d-i\":101}],88:[function(e,t,r){var _e295=e(\"../../../utils\"),n=_e295.utils,_e296=e(\"../../web-gl2/kernel-value/single-input\"),i=_e296.WebGL2KernelValueSingleInput;t.exports={WebGL2KernelValueDynamicSingleInput:/*#__PURE__*/function(_i79){_inherits(WebGL2KernelValueDynamicSingleInput,_i79);var _super71=_createSuper(WebGL2KernelValueDynamicSingleInput);function WebGL2KernelValueDynamicSingleInput(){_classCallCheck(this,WebGL2KernelValueDynamicSingleInput);return _super71.apply(this,arguments);}_createClass(WebGL2KernelValueDynamicSingleInput,[{key:\"getSource\",value:function getSource(){var e=this.getVariablePrecisionString();return n.linesToString([\"uniform \".concat(e,\" sampler2D \").concat(this.id),\"uniform \".concat(e,\" ivec2 \").concat(this.sizeId),\"uniform \".concat(e,\" ivec3 \").concat(this.dimensionsId)]);}},{key:\"updateValue\",value:function updateValue(e){var _e$size7=_slicedToArray(e.size,3),t=_e$size7[0],r=_e$size7[1],i=_e$size7[2];this.dimensions=new Int32Array([t||1,r||1,i||1]),this.textureSize=n.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),_get(_getPrototypeOf(WebGL2KernelValueDynamicSingleInput.prototype),\"updateValue\",this).call(this,e);}}]);return WebGL2KernelValueDynamicSingleInput;}(i)};},{\"../../../utils\":114,\"../../web-gl2/kernel-value/single-input\":102}],89:[function(e,t,r){var _e297=e(\"../../../utils\"),n=_e297.utils,_e298=e(\"../../web-gl/kernel-value/dynamic-unsigned-array\"),i=_e298.WebGLKernelValueDynamicUnsignedArray;t.exports={WebGL2KernelValueDynamicUnsignedArray:/*#__PURE__*/function(_i80){_inherits(WebGL2KernelValueDynamicUnsignedArray,_i80);var _super72=_createSuper(WebGL2KernelValueDynamicUnsignedArray);function WebGL2KernelValueDynamicUnsignedArray(){_classCallCheck(this,WebGL2KernelValueDynamicUnsignedArray);return _super72.apply(this,arguments);}_createClass(WebGL2KernelValueDynamicUnsignedArray,[{key:\"getSource\",value:function getSource(){var e=this.getVariablePrecisionString();return n.linesToString([\"uniform \".concat(e,\" sampler2D \").concat(this.id),\"uniform \".concat(e,\" ivec2 \").concat(this.sizeId),\"uniform \".concat(e,\" ivec3 \").concat(this.dimensionsId)]);}}]);return WebGL2KernelValueDynamicUnsignedArray;}(i)};},{\"../../../utils\":114,\"../../web-gl/kernel-value/dynamic-unsigned-array\":54}],90:[function(e,t,r){var _e299=e(\"../../../utils\"),n=_e299.utils,_e300=e(\"../../web-gl/kernel-value/dynamic-unsigned-input\"),i=_e300.WebGLKernelValueDynamicUnsignedInput;t.exports={WebGL2KernelValueDynamicUnsignedInput:/*#__PURE__*/function(_i81){_inherits(WebGL2KernelValueDynamicUnsignedInput,_i81);var _super73=_createSuper(WebGL2KernelValueDynamicUnsignedInput);function WebGL2KernelValueDynamicUnsignedInput(){_classCallCheck(this,WebGL2KernelValueDynamicUnsignedInput);return _super73.apply(this,arguments);}_createClass(WebGL2KernelValueDynamicUnsignedInput,[{key:\"getSource\",value:function getSource(){var e=this.getVariablePrecisionString();return n.linesToString([\"uniform \".concat(e,\" sampler2D \").concat(this.id),\"uniform \".concat(e,\" ivec2 \").concat(this.sizeId),\"uniform \".concat(e,\" ivec3 \").concat(this.dimensionsId)]);}}]);return WebGL2KernelValueDynamicUnsignedInput;}(i)};},{\"../../../utils\":114,\"../../web-gl/kernel-value/dynamic-unsigned-input\":55}],91:[function(e,t,r){var _e301=e(\"../../../utils\"),n=_e301.utils,_e302=e(\"../../web-gl/kernel-value/float\"),i=_e302.WebGLKernelValueFloat;t.exports={WebGL2KernelValueFloat:/*#__PURE__*/function(_i82){_inherits(WebGL2KernelValueFloat,_i82);var _super74=_createSuper(WebGL2KernelValueFloat);function WebGL2KernelValueFloat(){_classCallCheck(this,WebGL2KernelValueFloat);return _super74.apply(this,arguments);}return _createClass(WebGL2KernelValueFloat);}(i)};},{\"../../../utils\":114,\"../../web-gl/kernel-value/float\":56}],92:[function(e,t,r){var _e303=e(\"../../../utils\"),n=_e303.utils,_e304=e(\"../../web-gl/kernel-value/array\"),i=_e304.WebGLKernelArray;t.exports={WebGL2KernelValueHTMLImageArray:/*#__PURE__*/function(_i83){_inherits(WebGL2KernelValueHTMLImageArray,_i83);var _super75=_createSuper(WebGL2KernelValueHTMLImageArray);function WebGL2KernelValueHTMLImageArray(e,t){var _this47;_classCallCheck(this,WebGL2KernelValueHTMLImageArray);_this47=_super75.call(this,e,t),_this47.checkSize(e[0].width,e[0].height),_this47.dimensions=[e[0].width,e[0].height,e.length],_this47.textureSize=[e[0].width,e[0].height];return _this47;}_createClass(WebGL2KernelValueHTMLImageArray,[{key:\"defineTexture\",value:function defineTexture(){var e=this.context;e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D_ARRAY,this.texture),e.texParameteri(e.TEXTURE_2D_ARRAY,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D_ARRAY,e.TEXTURE_MIN_FILTER,e.NEAREST);}},{key:\"getStringValueHandler\",value:function getStringValueHandler(){return\"const uploadValue_\".concat(this.name,\" = \").concat(this.varName,\";\\n\");}},{key:\"getSource\",value:function getSource(){var e=this.getVariablePrecisionString();return n.linesToString([\"uniform \".concat(e,\" sampler2DArray \").concat(this.id),\"\".concat(e,\" ivec2 \").concat(this.sizeId,\" = ivec2(\").concat(this.textureSize[0],\", \").concat(this.textureSize[1],\")\"),\"\".concat(e,\" ivec3 \").concat(this.dimensionsId,\" = ivec3(\").concat(this.dimensions[0],\", \").concat(this.dimensions[1],\", \").concat(this.dimensions[2],\")\")]);}},{key:\"updateValue\",value:function updateValue(e){var t=this.context;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D_ARRAY,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage3D(t.TEXTURE_2D_ARRAY,0,t.RGBA,e[0].width,e[0].height,e.length,0,t.RGBA,t.UNSIGNED_BYTE,null);for(var _r84=0;_r84<e.length;_r84++){var _n76=0,_i84=0,s=1;t.texSubImage3D(t.TEXTURE_2D_ARRAY,0,_n76,_i84,_r84,e[_r84].width,e[_r84].height,s,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue=e[_r84]);}this.kernel.setUniform1i(this.id,this.index);}}]);return WebGL2KernelValueHTMLImageArray;}(i)};},{\"../../../utils\":114,\"../../web-gl/kernel-value/array\":40}],93:[function(e,t,r){var _e305=e(\"../../../utils\"),n=_e305.utils,_e306=e(\"../../web-gl/kernel-value/html-image\"),i=_e306.WebGLKernelValueHTMLImage;t.exports={WebGL2KernelValueHTMLImage:/*#__PURE__*/function(_i85){_inherits(WebGL2KernelValueHTMLImage,_i85);var _super76=_createSuper(WebGL2KernelValueHTMLImage);function WebGL2KernelValueHTMLImage(){_classCallCheck(this,WebGL2KernelValueHTMLImage);return _super76.apply(this,arguments);}_createClass(WebGL2KernelValueHTMLImage,[{key:\"getSource\",value:function getSource(){var e=this.getVariablePrecisionString();return n.linesToString([\"uniform \".concat(e,\" sampler2D \").concat(this.id),\"\".concat(e,\" ivec2 \").concat(this.sizeId,\" = ivec2(\").concat(this.textureSize[0],\", \").concat(this.textureSize[1],\")\"),\"\".concat(e,\" ivec3 \").concat(this.dimensionsId,\" = ivec3(\").concat(this.dimensions[0],\", \").concat(this.dimensions[1],\", \").concat(this.dimensions[2],\")\")]);}}]);return WebGL2KernelValueHTMLImage;}(i)};},{\"../../../utils\":114,\"../../web-gl/kernel-value/html-image\":57}],94:[function(e,t,r){var _e307=e(\"../../../utils\"),n=_e307.utils,_e308=e(\"./html-image\"),i=_e308.WebGL2KernelValueHTMLImage;t.exports={WebGL2KernelValueHTMLVideo:/*#__PURE__*/function(_i86){_inherits(WebGL2KernelValueHTMLVideo,_i86);var _super77=_createSuper(WebGL2KernelValueHTMLVideo);function WebGL2KernelValueHTMLVideo(){_classCallCheck(this,WebGL2KernelValueHTMLVideo);return _super77.apply(this,arguments);}return _createClass(WebGL2KernelValueHTMLVideo);}(i)};},{\"../../../utils\":114,\"./html-image\":93}],95:[function(e,t,r){var _e309=e(\"../../web-gl/kernel-value/integer\"),n=_e309.WebGLKernelValueInteger;t.exports={WebGL2KernelValueInteger:/*#__PURE__*/function(_n77){_inherits(WebGL2KernelValueInteger,_n77);var _super78=_createSuper(WebGL2KernelValueInteger);function WebGL2KernelValueInteger(){_classCallCheck(this,WebGL2KernelValueInteger);return _super78.apply(this,arguments);}_createClass(WebGL2KernelValueInteger,[{key:\"getSource\",value:function getSource(e){var t=this.getVariablePrecisionString();return\"constants\"===this.origin?\"const \".concat(t,\" int \").concat(this.id,\" = \").concat(parseInt(e),\";\\n\"):\"uniform \".concat(t,\" int \").concat(this.id,\";\\n\");}},{key:\"updateValue\",value:function updateValue(e){\"constants\"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=e);}}]);return WebGL2KernelValueInteger;}(n)};},{\"../../web-gl/kernel-value/integer\":60}],96:[function(e,t,r){var _e310=e(\"../../../utils\"),n=_e310.utils,_e311=e(\"../../web-gl/kernel-value/memory-optimized-number-texture\"),i=_e311.WebGLKernelValueMemoryOptimizedNumberTexture;t.exports={WebGL2KernelValueMemoryOptimizedNumberTexture:/*#__PURE__*/function(_i87){_inherits(WebGL2KernelValueMemoryOptimizedNumberTexture,_i87);var _super79=_createSuper(WebGL2KernelValueMemoryOptimizedNumberTexture);function WebGL2KernelValueMemoryOptimizedNumberTexture(){_classCallCheck(this,WebGL2KernelValueMemoryOptimizedNumberTexture);return _super79.apply(this,arguments);}_createClass(WebGL2KernelValueMemoryOptimizedNumberTexture,[{key:\"getSource\",value:function getSource(){var e=this.id,t=this.sizeId,r=this.textureSize,i=this.dimensionsId,s=this.dimensions,a=this.getVariablePrecisionString();return n.linesToString([\"uniform sampler2D \".concat(e),\"\".concat(a,\" ivec2 \").concat(t,\" = ivec2(\").concat(r[0],\", \").concat(r[1],\")\"),\"\".concat(a,\" ivec3 \").concat(i,\" = ivec3(\").concat(s[0],\", \").concat(s[1],\", \").concat(s[2],\")\")]);}}]);return WebGL2KernelValueMemoryOptimizedNumberTexture;}(i)};},{\"../../../utils\":114,\"../../web-gl/kernel-value/memory-optimized-number-texture\":61}],97:[function(e,t,r){var _e312=e(\"../../../utils\"),n=_e312.utils,_e313=e(\"../../web-gl/kernel-value/number-texture\"),i=_e313.WebGLKernelValueNumberTexture;t.exports={WebGL2KernelValueNumberTexture:/*#__PURE__*/function(_i88){_inherits(WebGL2KernelValueNumberTexture,_i88);var _super80=_createSuper(WebGL2KernelValueNumberTexture);function WebGL2KernelValueNumberTexture(){_classCallCheck(this,WebGL2KernelValueNumberTexture);return _super80.apply(this,arguments);}_createClass(WebGL2KernelValueNumberTexture,[{key:\"getSource\",value:function getSource(){var e=this.id,t=this.sizeId,r=this.textureSize,i=this.dimensionsId,s=this.dimensions,a=this.getVariablePrecisionString();return n.linesToString([\"uniform \".concat(a,\" sampler2D \").concat(e),\"\".concat(a,\" ivec2 \").concat(t,\" = ivec2(\").concat(r[0],\", \").concat(r[1],\")\"),\"\".concat(a,\" ivec3 \").concat(i,\" = ivec3(\").concat(s[0],\", \").concat(s[1],\", \").concat(s[2],\")\")]);}}]);return WebGL2KernelValueNumberTexture;}(i)};},{\"../../../utils\":114,\"../../web-gl/kernel-value/number-texture\":62}],98:[function(e,t,r){var _e314=e(\"../../../utils\"),n=_e314.utils,_e315=e(\"../../web-gl/kernel-value/single-array\"),i=_e315.WebGLKernelValueSingleArray;t.exports={WebGL2KernelValueSingleArray:/*#__PURE__*/function(_i89){_inherits(WebGL2KernelValueSingleArray,_i89);var _super81=_createSuper(WebGL2KernelValueSingleArray);function WebGL2KernelValueSingleArray(){_classCallCheck(this,WebGL2KernelValueSingleArray);return _super81.apply(this,arguments);}_createClass(WebGL2KernelValueSingleArray,[{key:\"getSource\",value:function getSource(){var e=this.getVariablePrecisionString();return n.linesToString([\"uniform \".concat(e,\" sampler2D \").concat(this.id),\"\".concat(e,\" ivec2 \").concat(this.sizeId,\" = ivec2(\").concat(this.textureSize[0],\", \").concat(this.textureSize[1],\")\"),\"\".concat(e,\" ivec3 \").concat(this.dimensionsId,\" = ivec3(\").concat(this.dimensions[0],\", \").concat(this.dimensions[1],\", \").concat(this.dimensions[2],\")\")]);}},{key:\"updateValue\",value:function updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);var t=this.context;n.flattenTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index);}}]);return WebGL2KernelValueSingleArray;}(i)};},{\"../../../utils\":114,\"../../web-gl/kernel-value/single-array\":63}],99:[function(e,t,r){var _e316=e(\"../../../utils\"),n=_e316.utils,_e317=e(\"../../web-gl/kernel-value/single-array1d-i\"),i=_e317.WebGLKernelValueSingleArray1DI;t.exports={WebGL2KernelValueSingleArray1DI:/*#__PURE__*/function(_i90){_inherits(WebGL2KernelValueSingleArray1DI,_i90);var _super82=_createSuper(WebGL2KernelValueSingleArray1DI);function WebGL2KernelValueSingleArray1DI(){_classCallCheck(this,WebGL2KernelValueSingleArray1DI);return _super82.apply(this,arguments);}_createClass(WebGL2KernelValueSingleArray1DI,[{key:\"updateValue\",value:function updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);var t=this.context;n.flattenTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index);}}]);return WebGL2KernelValueSingleArray1DI;}(i)};},{\"../../../utils\":114,\"../../web-gl/kernel-value/single-array1d-i\":64}],100:[function(e,t,r){var _e318=e(\"../../../utils\"),n=_e318.utils,_e319=e(\"../../web-gl/kernel-value/single-array2d-i\"),i=_e319.WebGLKernelValueSingleArray2DI;t.exports={WebGL2KernelValueSingleArray2DI:/*#__PURE__*/function(_i91){_inherits(WebGL2KernelValueSingleArray2DI,_i91);var _super83=_createSuper(WebGL2KernelValueSingleArray2DI);function WebGL2KernelValueSingleArray2DI(){_classCallCheck(this,WebGL2KernelValueSingleArray2DI);return _super83.apply(this,arguments);}_createClass(WebGL2KernelValueSingleArray2DI,[{key:\"updateValue\",value:function updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);var t=this.context;n.flattenTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index);}}]);return WebGL2KernelValueSingleArray2DI;}(i)};},{\"../../../utils\":114,\"../../web-gl/kernel-value/single-array2d-i\":65}],101:[function(e,t,r){var _e320=e(\"../../../utils\"),n=_e320.utils,_e321=e(\"../../web-gl/kernel-value/single-array3d-i\"),i=_e321.WebGLKernelValueSingleArray3DI;t.exports={WebGL2KernelValueSingleArray3DI:/*#__PURE__*/function(_i92){_inherits(WebGL2KernelValueSingleArray3DI,_i92);var _super84=_createSuper(WebGL2KernelValueSingleArray3DI);function WebGL2KernelValueSingleArray3DI(){_classCallCheck(this,WebGL2KernelValueSingleArray3DI);return _super84.apply(this,arguments);}_createClass(WebGL2KernelValueSingleArray3DI,[{key:\"updateValue\",value:function updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);var t=this.context;n.flattenTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index);}}]);return WebGL2KernelValueSingleArray3DI;}(i)};},{\"../../../utils\":114,\"../../web-gl/kernel-value/single-array3d-i\":66}],102:[function(e,t,r){var _e322=e(\"../../../utils\"),n=_e322.utils,_e323=e(\"../../web-gl/kernel-value/single-input\"),i=_e323.WebGLKernelValueSingleInput;t.exports={WebGL2KernelValueSingleInput:/*#__PURE__*/function(_i93){_inherits(WebGL2KernelValueSingleInput,_i93);var _super85=_createSuper(WebGL2KernelValueSingleInput);function WebGL2KernelValueSingleInput(){_classCallCheck(this,WebGL2KernelValueSingleInput);return _super85.apply(this,arguments);}_createClass(WebGL2KernelValueSingleInput,[{key:\"getSource\",value:function getSource(){var e=this.getVariablePrecisionString();return n.linesToString([\"uniform \".concat(e,\" sampler2D \").concat(this.id),\"\".concat(e,\" ivec2 \").concat(this.sizeId,\" = ivec2(\").concat(this.textureSize[0],\", \").concat(this.textureSize[1],\")\"),\"\".concat(e,\" ivec3 \").concat(this.dimensionsId,\" = ivec3(\").concat(this.dimensions[0],\", \").concat(this.dimensions[1],\", \").concat(this.dimensions[2],\")\")]);}},{key:\"updateValue\",value:function updateValue(e){var t=this.context;n.flattenTo(e.value,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index);}}]);return WebGL2KernelValueSingleInput;}(i)};},{\"../../../utils\":114,\"../../web-gl/kernel-value/single-input\":67}],103:[function(e,t,r){var _e324=e(\"../../../utils\"),n=_e324.utils,_e325=e(\"../../web-gl/kernel-value/unsigned-array\"),i=_e325.WebGLKernelValueUnsignedArray;t.exports={WebGL2KernelValueUnsignedArray:/*#__PURE__*/function(_i94){_inherits(WebGL2KernelValueUnsignedArray,_i94);var _super86=_createSuper(WebGL2KernelValueUnsignedArray);function WebGL2KernelValueUnsignedArray(){_classCallCheck(this,WebGL2KernelValueUnsignedArray);return _super86.apply(this,arguments);}_createClass(WebGL2KernelValueUnsignedArray,[{key:\"getSource\",value:function getSource(){var e=this.getVariablePrecisionString();return n.linesToString([\"uniform \".concat(e,\" sampler2D \").concat(this.id),\"\".concat(e,\" ivec2 \").concat(this.sizeId,\" = ivec2(\").concat(this.textureSize[0],\", \").concat(this.textureSize[1],\")\"),\"\".concat(e,\" ivec3 \").concat(this.dimensionsId,\" = ivec3(\").concat(this.dimensions[0],\", \").concat(this.dimensions[1],\", \").concat(this.dimensions[2],\")\")]);}}]);return WebGL2KernelValueUnsignedArray;}(i)};},{\"../../../utils\":114,\"../../web-gl/kernel-value/unsigned-array\":68}],104:[function(e,t,r){var _e326=e(\"../../../utils\"),n=_e326.utils,_e327=e(\"../../web-gl/kernel-value/unsigned-input\"),i=_e327.WebGLKernelValueUnsignedInput;t.exports={WebGL2KernelValueUnsignedInput:/*#__PURE__*/function(_i95){_inherits(WebGL2KernelValueUnsignedInput,_i95);var _super87=_createSuper(WebGL2KernelValueUnsignedInput);function WebGL2KernelValueUnsignedInput(){_classCallCheck(this,WebGL2KernelValueUnsignedInput);return _super87.apply(this,arguments);}_createClass(WebGL2KernelValueUnsignedInput,[{key:\"getSource\",value:function getSource(){var e=this.getVariablePrecisionString();return n.linesToString([\"uniform \".concat(e,\" sampler2D \").concat(this.id),\"\".concat(e,\" ivec2 \").concat(this.sizeId,\" = ivec2(\").concat(this.textureSize[0],\", \").concat(this.textureSize[1],\")\"),\"\".concat(e,\" ivec3 \").concat(this.dimensionsId,\" = ivec3(\").concat(this.dimensions[0],\", \").concat(this.dimensions[1],\", \").concat(this.dimensions[2],\")\")]);}}]);return WebGL2KernelValueUnsignedInput;}(i)};},{\"../../../utils\":114,\"../../web-gl/kernel-value/unsigned-input\":69}],105:[function(e,t,r){var _e328=e(\"../web-gl/kernel\"),n=_e328.WebGLKernel,_e329=e(\"./function-node\"),i=_e329.WebGL2FunctionNode,_e330=e(\"../function-builder\"),s=_e330.FunctionBuilder,_e331=e(\"../../utils\"),a=_e331.utils,_e332=e(\"./fragment-shader\"),o=_e332.fragmentShader,_e333=e(\"./vertex-shader\"),u=_e333.vertexShader,_e334=e(\"./kernel-value-maps\"),l=_e334.lookupKernelValueType;var h=null,c=null,p=null,d=null,m=null;t.exports={WebGL2Kernel:/*#__PURE__*/function(_n78){_inherits(WebGL2Kernel,_n78);var _super88=_createSuper(WebGL2Kernel);function WebGL2Kernel(){_classCallCheck(this,WebGL2Kernel);return _super88.apply(this,arguments);}_createClass(WebGL2Kernel,[{key:\"initContext\",value:function initContext(){return this.canvas.getContext(\"webgl2\",{alpha:!1,depth:!1,antialias:!1});}},{key:\"initExtensions\",value:function initExtensions(){this.extensions={EXT_color_buffer_float:this.context.getExtension(\"EXT_color_buffer_float\"),OES_texture_float_linear:this.context.getExtension(\"OES_texture_float_linear\")};}},{key:\"validateSettings\",value:function validateSettings(e){if(!this.validate)return void(this.texSize=a.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output));var t=this.constructor.features;if(\"single\"===this.precision&&!t.isFloatRead)throw new Error(\"Float texture outputs are not supported\");if(this.graphical||null!==this.precision||(this.precision=t.isFloatRead?\"single\":\"unsigned\"),null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=!t.isIntegerDivisionAccurate:this.fixIntegerDivisionAccuracy&&t.isIntegerDivisionAccurate&&(this.fixIntegerDivisionAccuracy=!1),this.checkOutput(),!this.output||0===this.output.length){if(1!==e.length)throw new Error(\"Auto output only supported for kernels with only one input\");var _t88=a.getVariableType(e[0],this.strictIntegers);switch(_t88){case\"Array\":this.output=a.getDimensions(_t88);break;case\"NumberTexture\":case\"MemoryOptimizedNumberTexture\":case\"ArrayTexture(1)\":case\"ArrayTexture(2)\":case\"ArrayTexture(3)\":case\"ArrayTexture(4)\":this.output=e[0].output;break;default:throw new Error(\"Auto output not supported for input type: \"+_t88);}}if(this.graphical){if(2!==this.output.length)throw new Error(\"Output must have 2 dimensions on graphical mode\");return\"single\"===this.precision&&(console.warn(\"Cannot use graphical mode and single precision at the same time\"),this.precision=\"unsigned\"),void(this.texSize=a.clone(this.output));}!this.graphical&&null===this.precision&&t.isTextureFloat&&(this.precision=\"single\"),this.texSize=a.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output),this.checkTextureSize();}},{key:\"translateSource\",value:function translateSource(){var e=s.fromKernel(this,i,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy});this.translatedSource=e.getPrototypeString(\"kernel\"),this.setupReturnTypes(e);}},{key:\"drawBuffers\",value:function drawBuffers(){this.context.drawBuffers(this.drawBuffersMap);}},{key:\"getTextureFormat\",value:function getTextureFormat(){var e=this.context;switch(this.getInternalFormat()){case e.R32F:return e.RED;case e.RG32F:return e.RG;case e.RGBA32F:case e.RGBA:return e.RGBA;default:throw new Error(\"Unknown internal format\");}}},{key:\"getInternalFormat\",value:function getInternalFormat(){var e=this.context;if(\"single\"===this.precision){if(this.pipeline)switch(this.returnType){case\"Number\":case\"Float\":case\"Integer\":return this.optimizeFloatMemory?e.RGBA32F:e.R32F;case\"Array(2)\":return e.RG32F;case\"Array(3)\":case\"Array(4)\":return e.RGBA32F;default:throw new Error(\"Unhandled return type\");}return e.RGBA32F;}return e.RGBA;}},{key:\"_setupOutputTexture\",value:function _setupOutputTexture(){var e=this.context;if(this.texture)return void e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0);e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer);var t=e.createTexture(),r=this.texSize;e.activeTexture(e.TEXTURE0+this.constantTextureCount+this.argumentTextureCount),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);var n=this.getInternalFormat();\"single\"===this.precision?e.texStorage2D(e.TEXTURE_2D,1,n,r[0],r[1]):e.texImage2D(e.TEXTURE_2D,0,n,r[0],r[1],0,n,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.texture=new this.TextureConstructor({texture:t,size:r,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this});}},{key:\"_setupSubOutputTextures\",value:function _setupSubOutputTextures(){var e=this.context;if(this.mappedTextures){for(var _t89=0;_t89<this.subKernels.length;_t89++){e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+_t89+1,e.TEXTURE_2D,this.mappedTextures[_t89].texture,0);}return;}var t=this.texSize;this.drawBuffersMap=[e.COLOR_ATTACHMENT0],this.mappedTextures=[];for(var _r85=0;_r85<this.subKernels.length;_r85++){var _n79=this.createTexture();this.drawBuffersMap.push(e.COLOR_ATTACHMENT0+_r85+1),e.activeTexture(e.TEXTURE0+this.constantTextureCount+this.argumentTextureCount+_r85),e.bindTexture(e.TEXTURE_2D,_n79),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);var _i96=this.getInternalFormat();\"single\"===this.precision?e.texStorage2D(e.TEXTURE_2D,1,_i96,t[0],t[1]):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+_r85+1,e.TEXTURE_2D,_n79,0),this.mappedTextures.push(new this.TextureConstructor({texture:_n79,size:t,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this}));}}},{key:\"_getHeaderString\",value:function _getHeaderString(){return\"\";}},{key:\"_getTextureCoordinate\",value:function _getTextureCoordinate(){var e=this.subKernels,t=this.getVariablePrecisionString(this.texSize,this.tactic);return null===e||e.length<1?\"in \".concat(t,\" vec2 vTexCoord;\\n\"):\"out \".concat(t,\" vec2 vTexCoord;\\n\");}},{key:\"_getMainArgumentsString\",value:function _getMainArgumentsString(e){var t=[],r=this.argumentNames;for(var _n80=0;_n80<r.length;_n80++){t.push(this.kernelArguments[_n80].getSource(e[_n80]));}return t.join(\"\");}},{key:\"getKernelString\",value:function getKernelString(){var e=[this.getKernelResultDeclaration()],t=this.subKernels;if(null!==t)switch(e.push(\"layout(location = 0) out vec4 data0\"),this.returnType){case\"Number\":case\"Float\":case\"Integer\":for(var _r86=0;_r86<t.length;_r86++){var _n81=t[_r86];e.push(\"Integer\"===_n81.returnType?\"int subKernelResult_\".concat(_n81.name,\" = 0\"):\"float subKernelResult_\".concat(_n81.name,\" = 0.0\"),\"layout(location = \".concat(_r86+1,\") out vec4 data\").concat(_r86+1));}break;case\"Array(2)\":for(var _r87=0;_r87<t.length;_r87++){e.push(\"vec2 subKernelResult_\".concat(t[_r87].name),\"layout(location = \".concat(_r87+1,\") out vec4 data\").concat(_r87+1));}break;case\"Array(3)\":for(var _r88=0;_r88<t.length;_r88++){e.push(\"vec3 subKernelResult_\".concat(t[_r88].name),\"layout(location = \".concat(_r88+1,\") out vec4 data\").concat(_r88+1));}break;case\"Array(4)\":for(var _r89=0;_r89<t.length;_r89++){e.push(\"vec4 subKernelResult_\".concat(t[_r89].name),\"layout(location = \".concat(_r89+1,\") out vec4 data\").concat(_r89+1));}}else e.push(\"out vec4 data0\");return a.linesToString(e)+this.translatedSource;}},{key:\"getMainResultGraphical\",value:function getMainResultGraphical(){return a.linesToString([\"  threadId = indexTo3D(index, uOutputDim)\",\"  kernel()\",\"  data0 = actualColor\"]);}},{key:\"getMainResultPackedPixels\",value:function getMainResultPackedPixels(){switch(this.returnType){case\"LiteralInteger\":case\"Number\":case\"Integer\":case\"Float\":return this.getMainResultKernelPackedPixels()+this.getMainResultSubKernelPackedPixels();default:throw new Error(\"packed output only usable with Numbers, \\\"\".concat(this.returnType,\"\\\" specified\"));}}},{key:\"getMainResultKernelPackedPixels\",value:function getMainResultKernelPackedPixels(){return a.linesToString([\"  threadId = indexTo3D(index, uOutputDim)\",\"  kernel()\",\"  data0 = \".concat(this.useLegacyEncoder?\"legacyEncode32\":\"encode32\",\"(kernelResult)\")]);}},{key:\"getMainResultSubKernelPackedPixels\",value:function getMainResultSubKernelPackedPixels(){var e=[];if(!this.subKernels)return\"\";for(var _t90=0;_t90<this.subKernels.length;_t90++){\"Integer\"===this.subKernels[_t90].returnType?e.push(\"  data\".concat(_t90+1,\" = \").concat(this.useLegacyEncoder?\"legacyEncode32\":\"encode32\",\"(float(subKernelResult_\").concat(this.subKernels[_t90].name,\"))\")):e.push(\"  data\".concat(_t90+1,\" = \").concat(this.useLegacyEncoder?\"legacyEncode32\":\"encode32\",\"(subKernelResult_\").concat(this.subKernels[_t90].name,\")\"));}return a.linesToString(e);}},{key:\"getMainResultKernelMemoryOptimizedFloats\",value:function getMainResultKernelMemoryOptimizedFloats(e,t){e.push(\"  threadId = indexTo3D(index, uOutputDim)\",\"  kernel()\",\"  data0.\".concat(t,\" = kernelResult\"));}},{key:\"getMainResultSubKernelMemoryOptimizedFloats\",value:function getMainResultSubKernelMemoryOptimizedFloats(e,t){if(!this.subKernels)return e;for(var _r90=0;_r90<this.subKernels.length;_r90++){var _n82=this.subKernels[_r90];\"Integer\"===_n82.returnType?e.push(\"  data\".concat(_r90+1,\".\").concat(t,\" = float(subKernelResult_\").concat(_n82.name,\")\")):e.push(\"  data\".concat(_r90+1,\".\").concat(t,\" = subKernelResult_\").concat(_n82.name));}}},{key:\"getMainResultKernelNumberTexture\",value:function getMainResultKernelNumberTexture(){return[\"  threadId = indexTo3D(index, uOutputDim)\",\"  kernel()\",\"  data0[0] = kernelResult\"];}},{key:\"getMainResultSubKernelNumberTexture\",value:function getMainResultSubKernelNumberTexture(){var e=[];if(!this.subKernels)return e;for(var _t91=0;_t91<this.subKernels.length;++_t91){var _r91=this.subKernels[_t91];\"Integer\"===_r91.returnType?e.push(\"  data\".concat(_t91+1,\"[0] = float(subKernelResult_\").concat(_r91.name,\")\")):e.push(\"  data\".concat(_t91+1,\"[0] = subKernelResult_\").concat(_r91.name));}return e;}},{key:\"getMainResultKernelArray2Texture\",value:function getMainResultKernelArray2Texture(){return[\"  threadId = indexTo3D(index, uOutputDim)\",\"  kernel()\",\"  data0[0] = kernelResult[0]\",\"  data0[1] = kernelResult[1]\"];}},{key:\"getMainResultSubKernelArray2Texture\",value:function getMainResultSubKernelArray2Texture(){var e=[];if(!this.subKernels)return e;for(var _t92=0;_t92<this.subKernels.length;++_t92){var _r92=this.subKernels[_t92];e.push(\"  data\".concat(_t92+1,\"[0] = subKernelResult_\").concat(_r92.name,\"[0]\"),\"  data\".concat(_t92+1,\"[1] = subKernelResult_\").concat(_r92.name,\"[1]\"));}return e;}},{key:\"getMainResultKernelArray3Texture\",value:function getMainResultKernelArray3Texture(){return[\"  threadId = indexTo3D(index, uOutputDim)\",\"  kernel()\",\"  data0[0] = kernelResult[0]\",\"  data0[1] = kernelResult[1]\",\"  data0[2] = kernelResult[2]\"];}},{key:\"getMainResultSubKernelArray3Texture\",value:function getMainResultSubKernelArray3Texture(){var e=[];if(!this.subKernels)return e;for(var _t93=0;_t93<this.subKernels.length;++_t93){var _r93=this.subKernels[_t93];e.push(\"  data\".concat(_t93+1,\"[0] = subKernelResult_\").concat(_r93.name,\"[0]\"),\"  data\".concat(_t93+1,\"[1] = subKernelResult_\").concat(_r93.name,\"[1]\"),\"  data\".concat(_t93+1,\"[2] = subKernelResult_\").concat(_r93.name,\"[2]\"));}return e;}},{key:\"getMainResultKernelArray4Texture\",value:function getMainResultKernelArray4Texture(){return[\"  threadId = indexTo3D(index, uOutputDim)\",\"  kernel()\",\"  data0 = kernelResult\"];}},{key:\"getMainResultSubKernelArray4Texture\",value:function getMainResultSubKernelArray4Texture(){var e=[];if(!this.subKernels)return e;for(var _t94=0;_t94<this.subKernels.length;++_t94){e.push(\"  data\".concat(_t94+1,\" = subKernelResult_\").concat(this.subKernels[_t94].name));}return e;}},{key:\"destroyExtensions\",value:function destroyExtensions(){this.extensions.EXT_color_buffer_float=null,this.extensions.OES_texture_float_linear=null;}},{key:\"toJSON\",value:function toJSON(){var e=_get(_getPrototypeOf(WebGL2Kernel.prototype),\"toJSON\",this).call(this);return e.functionNodes=s.fromKernel(this,i).toJSON(),e.settings.threadDim=this.threadDim,e;}}],[{key:\"isSupported\",get:function get(){return null!==h?h:(this.setupFeatureChecks(),h=this.isContextMatch(p));}},{key:\"setupFeatureChecks\",value:function setupFeatureChecks(){\"undefined\"!=typeof document?c=document.createElement(\"canvas\"):\"undefined\"!=typeof OffscreenCanvas&&(c=new OffscreenCanvas(0,0)),c&&(p=c.getContext(\"webgl2\"))&&p.getExtension&&(d={EXT_color_buffer_float:p.getExtension(\"EXT_color_buffer_float\"),OES_texture_float_linear:p.getExtension(\"OES_texture_float_linear\")},m=this.getFeatures());}},{key:\"isContextMatch\",value:function isContextMatch(e){return\"undefined\"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;}},{key:\"getFeatures\",value:function getFeatures(){var e=this.testContext;return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),isSpeedTacticSupported:this.getIsSpeedTacticSupported(),kernelMap:!0,isTextureFloat:!0,isDrawBuffers:!0,channelCount:this.getChannelCount(),maxTextureSize:this.getMaxTextureSize(),lowIntPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_INT),lowFloatPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_FLOAT),mediumIntPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_INT),mediumFloatPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT),highIntPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT),highFloatPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT)});}},{key:\"getIsTextureFloat\",value:function getIsTextureFloat(){return!0;}},{key:\"getChannelCount\",value:function getChannelCount(){return p.getParameter(p.MAX_DRAW_BUFFERS);}},{key:\"getMaxTextureSize\",value:function getMaxTextureSize(){return p.getParameter(p.MAX_TEXTURE_SIZE);}},{key:\"lookupKernelValueType\",value:function lookupKernelValueType(e,t,r,n){return l(e,t,r,n);}},{key:\"testCanvas\",get:function get(){return c;}},{key:\"testContext\",get:function get(){return p;}},{key:\"features\",get:function get(){return m;}},{key:\"fragmentShader\",get:function get(){return o;}},{key:\"vertexShader\",get:function get(){return u;}}]);return WebGL2Kernel;}(n)};},{\"../../utils\":114,\"../function-builder\":9,\"../web-gl/kernel\":70,\"./fragment-shader\":72,\"./function-node\":73,\"./kernel-value-maps\":74,\"./vertex-shader\":106}],106:[function(e,t,r){t.exports={vertexShader:\"#version 300 es\\n__FLOAT_TACTIC_DECLARATION__;\\n__INT_TACTIC_DECLARATION__;\\n__SAMPLER_2D_TACTIC_DECLARATION__;\\n\\nin vec2 aPos;\\nin vec2 aTexCoord;\\n\\nout vec2 vTexCoord;\\nuniform vec2 ratio;\\n\\nvoid main(void) {\\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\\n  vTexCoord = aTexCoord;\\n}\"};},{}],107:[function(e,t,r){var n=e(\"./index\"),i=n.GPU;for(var _e335 in n){n.hasOwnProperty(_e335)&&\"GPU\"!==_e335&&(i[_e335]=n[_e335]);}function s(e){e.GPU||Object.defineProperty(e,\"GPU\",{get:function get(){return i;}});}\"undefined\"!=typeof window&&s(window),\"undefined\"!=typeof self&&s(self),t.exports=n;},{\"./index\":109}],108:[function(e,t,r){var _e336=e(\"gpu-mock.js\"),n=_e336.gpuMock,_e337=e(\"./utils\"),i=_e337.utils,_e338=e(\"./backend/kernel\"),s=_e338.Kernel,_e339=e(\"./backend/cpu/kernel\"),a=_e339.CPUKernel,_e340=e(\"./backend/headless-gl/kernel\"),o=_e340.HeadlessGLKernel,_e341=e(\"./backend/web-gl2/kernel\"),u=_e341.WebGL2Kernel,_e342=e(\"./backend/web-gl/kernel\"),l=_e342.WebGLKernel,_e343=e(\"./kernel-run-shortcut\"),h=_e343.kernelRunShortcut,c=[o,u,l],p=[\"gpu\",\"cpu\"],d={headlessgl:o,webgl2:u,webgl:l};var m=!0;function f(e){if(!e)return{};var t=Object.assign({},e);return e.hasOwnProperty(\"floatOutput\")&&(i.warnDeprecated(\"setting\",\"floatOutput\",\"precision\"),t.precision=e.floatOutput?\"single\":\"unsigned\"),e.hasOwnProperty(\"outputToTexture\")&&(i.warnDeprecated(\"setting\",\"outputToTexture\",\"pipeline\"),t.pipeline=Boolean(e.outputToTexture)),e.hasOwnProperty(\"outputImmutable\")&&(i.warnDeprecated(\"setting\",\"outputImmutable\",\"immutable\"),t.immutable=Boolean(e.outputImmutable)),e.hasOwnProperty(\"floatTextures\")&&(i.warnDeprecated(\"setting\",\"floatTextures\",\"optimizeFloatMemory\"),t.optimizeFloatMemory=Boolean(e.floatTextures)),t;}t.exports={GPU:/*#__PURE__*/function(){function GPU(e){_classCallCheck(this,GPU);if(e=e||{},this.canvas=e.canvas||null,this.context=e.context||null,this.mode=e.mode,this.Kernel=null,this.kernels=[],this.functions=[],this.nativeFunctions=[],this.injectedNative=null,\"dev\"!==this.mode){if(this.chooseKernel(),e.functions)for(var _t95=0;_t95<e.functions.length;_t95++){this.addFunction(e.functions[_t95]);}if(e.nativeFunctions)for(var _t96 in e.nativeFunctions){if(!e.nativeFunctions.hasOwnProperty(_t96))continue;var _r94=e.nativeFunctions[_t96],_n83=_r94.name,_i97=_r94.source;this.addNativeFunction(_n83,_i97,_r94);}}}_createClass(GPU,[{key:\"chooseKernel\",value:function chooseKernel(){if(this.Kernel)return;var e=null;if(this.context){for(var _t97=0;_t97<c.length;_t97++){var _r95=c[_t97];if(_r95.isContextMatch(this.context)){if(!_r95.isSupported)throw new Error(\"Kernel type \".concat(_r95.name,\" not supported\"));e=_r95;break;}}if(null===e)throw new Error(\"unknown Context\");}else if(this.mode){if(this.mode in d)m&&!d[this.mode].isSupported||(e=d[this.mode]);else if(\"gpu\"===this.mode){for(var _t98=0;_t98<c.length;_t98++){if(c[_t98].isSupported){e=c[_t98];break;}}}else\"cpu\"===this.mode&&(e=a);if(!e)throw new Error(\"A requested mode of \\\"\".concat(this.mode,\"\\\" and is not supported\"));}else{for(var _t99=0;_t99<c.length;_t99++){if(c[_t99].isSupported){e=c[_t99];break;}}e||(e=a);}this.mode||(this.mode=e.mode),this.Kernel=e;}},{key:\"createKernel\",value:function createKernel(e,t){if(void 0===e)throw new Error(\"Missing source parameter\");if(\"object\"!=_typeof(e)&&!i.isFunction(e)&&\"string\"!=typeof e)throw new Error(\"source parameter not a function\");var r=this.kernels;if(\"dev\"===this.mode){var _i98=n(e,f(t));return r.push(_i98),_i98;}e=\"function\"==typeof e?e.toString():e;var s={},o=f(t)||{};function u(t){console.warn(\"Falling back to CPU\");var r=new a(e,{argumentTypes:p.argumentTypes,constantTypes:p.constantTypes,graphical:p.graphical,loopMaxIterations:p.loopMaxIterations,constants:p.constants,dynamicOutput:p.dynamicOutput,dynamicArgument:p.dynamicArguments,output:p.output,precision:p.precision,pipeline:p.pipeline,immutable:p.immutable,optimizeFloatMemory:p.optimizeFloatMemory,fixIntegerDivisionAccuracy:p.fixIntegerDivisionAccuracy,functions:p.functions,nativeFunctions:p.nativeFunctions,injectedNative:p.injectedNative,subKernels:p.subKernels,strictIntegers:p.strictIntegers,debug:p.debug});r.build.apply(r,t);var n=r.run.apply(r,t);return p.replaceKernel(r),n;}t&&\"object\"==_typeof(t.argumentTypes)&&(o.argumentTypes=Object.keys(t.argumentTypes).map(function(e){return t.argumentTypes[e];}));var l=Object.assign({context:this.context,canvas:this.canvas,functions:this.functions,nativeFunctions:this.nativeFunctions,injectedNative:this.injectedNative,gpu:this,validate:m,onRequestFallback:u,onRequestSwitchKernel:function t(n,i,a){a.debug&&console.warn(\"Switching kernels\");var o=null;if(a.signature&&!s[a.signature]&&(s[a.signature]=a),a.dynamicOutput)for(var _e344=n.length-1;_e344>=0;_e344--){var _t100=n[_e344];\"outputPrecisionMismatch\"===_t100.type&&(o=_t100.needed);}var l=a.constructor,h=l.getArgumentTypes(a,i),c=l.getSignature(a,h),d=s[c];if(d)return d.onActivate(a),d;var f=s[c]=new l(e,{argumentTypes:h,constantTypes:a.constantTypes,graphical:a.graphical,loopMaxIterations:a.loopMaxIterations,constants:a.constants,dynamicOutput:a.dynamicOutput,dynamicArgument:a.dynamicArguments,context:a.context,canvas:a.canvas,output:o||a.output,precision:a.precision,pipeline:a.pipeline,immutable:a.immutable,optimizeFloatMemory:a.optimizeFloatMemory,fixIntegerDivisionAccuracy:a.fixIntegerDivisionAccuracy,functions:a.functions,nativeFunctions:a.nativeFunctions,injectedNative:a.injectedNative,subKernels:a.subKernels,strictIntegers:a.strictIntegers,debug:a.debug,gpu:a.gpu,validate:m,returnType:a.returnType,tactic:a.tactic,onRequestFallback:u,onRequestSwitchKernel:t,texture:a.texture,mappedTextures:a.mappedTextures,drawBuffersMap:a.drawBuffersMap});return f.build.apply(f,i),p.replaceKernel(f),r.push(f),f;}},o),c=new this.Kernel(e,l),p=h(c);return this.canvas||(this.canvas=c.canvas),this.context||(this.context=c.context),r.push(c),p;}},{key:\"createKernelMap\",value:function createKernelMap(){var e,t;var r=_typeof(arguments[arguments.length-2]);if(\"function\"===r||\"string\"===r?(e=arguments[arguments.length-2],t=arguments[arguments.length-1]):e=arguments[arguments.length-1],\"dev\"!==this.mode&&(!this.Kernel.isSupported||!this.Kernel.features.kernelMap)&&this.mode&&p.indexOf(this.mode)<0)throw new Error(\"kernelMap not supported on \".concat(this.Kernel.name));var n=f(t);if(t&&\"object\"==_typeof(t.argumentTypes)&&(n.argumentTypes=Object.keys(t.argumentTypes).map(function(e){return t.argumentTypes[e];})),Array.isArray(arguments[0])){n.subKernels=[];var _e345=arguments[0];for(var _t101=0;_t101<_e345.length;_t101++){var _r96=_e345[_t101].toString(),_s14=i.getFunctionNameFromString(_r96);n.subKernels.push({name:_s14,source:_r96,property:_t101});}}else{n.subKernels=[];var _e346=arguments[0];for(var _t102 in _e346){if(!_e346.hasOwnProperty(_t102))continue;var _r97=_e346[_t102].toString(),_s15=i.getFunctionNameFromString(_r97);n.subKernels.push({name:_s15||_t102,source:_r97,property:_t102});}}return this.createKernel(e,n);}},{key:\"combineKernels\",value:function combineKernels(){var e=arguments[0],t=arguments[arguments.length-1];if(\"cpu\"===e.kernel.constructor.mode)return t;var r=arguments[0].canvas,n=arguments[0].context,i=arguments.length-1;for(var _e347=0;_e347<i;_e347++){arguments[_e347].setCanvas(r).setContext(n).setPipeline(!0);}return function(){var e=t.apply(this,arguments);return e.toArray?e.toArray():e;};}},{key:\"setFunctions\",value:function setFunctions(e){return this.functions=e,this;}},{key:\"setNativeFunctions\",value:function setNativeFunctions(e){return this.nativeFunctions=e,this;}},{key:\"addFunction\",value:function addFunction(e,t){return this.functions.push({source:e,settings:t}),this;}},{key:\"addNativeFunction\",value:function addNativeFunction(e,t,r){if(this.kernels.length>0)throw new Error('Cannot call \"addNativeFunction\" after \"createKernels\" has been called.');return this.nativeFunctions.push(Object.assign({name:e,source:t},r)),this;}},{key:\"injectNative\",value:function injectNative(e){return this.injectedNative=e,this;}},{key:\"destroy\",value:function destroy(){var _this48=this;return new Promise(function(e,t){_this48.kernels||e(),setTimeout(function(){try{for(var _e349=0;_e349<_this48.kernels.length;_e349++){_this48.kernels[_e349].destroy(!0);}var _e348=_this48.kernels[0];_e348&&(_e348.kernel&&(_e348=_e348.kernel),_e348.constructor.destroyContext&&_e348.constructor.destroyContext(_this48.context));}catch(e){t(e);}e();},0);});}}],[{key:\"disableValidation\",value:function disableValidation(){m=!1;}},{key:\"enableValidation\",value:function enableValidation(){m=!0;}},{key:\"isGPUSupported\",get:function get(){return c.some(function(e){return e.isSupported;});}},{key:\"isKernelMapSupported\",get:function get(){return c.some(function(e){return e.isSupported&&e.features.kernelMap;});}},{key:\"isOffscreenCanvasSupported\",get:function get(){return\"undefined\"!=typeof Worker&&\"undefined\"!=typeof OffscreenCanvas||\"undefined\"!=typeof importScripts;}},{key:\"isWebGLSupported\",get:function get(){return l.isSupported;}},{key:\"isWebGL2Supported\",get:function get(){return u.isSupported;}},{key:\"isHeadlessGLSupported\",get:function get(){return o.isSupported;}},{key:\"isCanvasSupported\",get:function get(){return\"undefined\"!=typeof HTMLCanvasElement;}},{key:\"isGPUHTMLImageArraySupported\",get:function get(){return u.isSupported;}},{key:\"isSinglePrecisionSupported\",get:function get(){return c.some(function(e){return e.isSupported&&e.features.isFloatRead&&e.features.isTextureFloat;});}}]);return GPU;}(),kernelOrder:c,kernelTypes:p};},{\"./backend/cpu/kernel\":8,\"./backend/headless-gl/kernel\":34,\"./backend/kernel\":36,\"./backend/web-gl/kernel\":70,\"./backend/web-gl2/kernel\":105,\"./kernel-run-shortcut\":111,\"./utils\":114,\"gpu-mock.js\":4}],109:[function(e,t,r){var _e350=e(\"./gpu\"),n=_e350.GPU,_e351=e(\"./alias\"),i=_e351.alias,_e352=e(\"./utils\"),s=_e352.utils,_e353=e(\"./input\"),a=_e353.Input,o=_e353.input,_e354=e(\"./texture\"),u=_e354.Texture,_e355=e(\"./backend/function-builder\"),l=_e355.FunctionBuilder,_e356=e(\"./backend/function-node\"),h=_e356.FunctionNode,_e357=e(\"./backend/cpu/function-node\"),c=_e357.CPUFunctionNode,_e358=e(\"./backend/cpu/kernel\"),p=_e358.CPUKernel,_e359=e(\"./backend/headless-gl/kernel\"),d=_e359.HeadlessGLKernel,_e360=e(\"./backend/web-gl/function-node\"),m=_e360.WebGLFunctionNode,_e361=e(\"./backend/web-gl/kernel\"),f=_e361.WebGLKernel,_e362=e(\"./backend/web-gl/kernel-value-maps\"),g=_e362.kernelValueMaps,_e363=e(\"./backend/web-gl2/function-node\"),x=_e363.WebGL2FunctionNode,_e364=e(\"./backend/web-gl2/kernel\"),y=_e364.WebGL2Kernel,_e365=e(\"./backend/web-gl2/kernel-value-maps\"),b=_e365.kernelValueMaps,_e366=e(\"./backend/gl/kernel\"),T=_e366.GLKernel,_e367=e(\"./backend/kernel\"),v=_e367.Kernel,_e368=e(\"./backend/function-tracer\"),S=_e368.FunctionTracer,A=e(\"./plugins/math-random-uniformly-distributed\");t.exports={alias:i,CPUFunctionNode:c,CPUKernel:p,GPU:n,FunctionBuilder:l,FunctionNode:h,HeadlessGLKernel:d,Input:a,input:o,Texture:u,utils:s,WebGL2FunctionNode:x,WebGL2Kernel:y,webGL2KernelValueMaps:b,WebGLFunctionNode:m,WebGLKernel:f,webGLKernelValueMaps:g,GLKernel:T,Kernel:v,FunctionTracer:S,plugins:{mathRandom:A}};},{\"./alias\":5,\"./backend/cpu/function-node\":6,\"./backend/cpu/kernel\":8,\"./backend/function-builder\":9,\"./backend/function-node\":10,\"./backend/function-tracer\":11,\"./backend/gl/kernel\":13,\"./backend/headless-gl/kernel\":34,\"./backend/kernel\":36,\"./backend/web-gl/function-node\":38,\"./backend/web-gl/kernel\":70,\"./backend/web-gl/kernel-value-maps\":39,\"./backend/web-gl2/function-node\":73,\"./backend/web-gl2/kernel\":105,\"./backend/web-gl2/kernel-value-maps\":74,\"./gpu\":108,\"./input\":110,\"./plugins/math-random-uniformly-distributed\":112,\"./texture\":113,\"./utils\":114}],110:[function(e,t,r){var n=/*#__PURE__*/function(){function n(e,t){_classCallCheck(this,n);this.value=e,Array.isArray(t)?this.size=t:(this.size=new Int32Array(3),t.z?this.size=new Int32Array([t.x,t.y,t.z]):t.y?this.size=new Int32Array([t.x,t.y]):this.size=new Int32Array([t.x]));var _this$size=_slicedToArray(this.size,3),r=_this$size[0],_n84=_this$size[1],i=_this$size[2];if(i){if(this.value.length!==r*_n84*i)throw new Error(\"Input size \".concat(this.value.length,\" does not match \").concat(r,\" * \").concat(_n84,\" * \").concat(i,\" = \").concat(_n84*r*i));}else if(_n84){if(this.value.length!==r*_n84)throw new Error(\"Input size \".concat(this.value.length,\" does not match \").concat(r,\" * \").concat(_n84,\" = \").concat(_n84*r));}else if(this.value.length!==r)throw new Error(\"Input size \".concat(this.value.length,\" does not match \").concat(r));}_createClass(n,[{key:\"toArray\",value:function toArray(){var _e369=e(\"./utils\"),t=_e369.utils,_this$size2=_slicedToArray(this.size,3),r=_this$size2[0],_n85=_this$size2[1],i=_this$size2[2];return i?t.erectMemoryOptimized3DFloat(this.value.subarray?this.value:new Float32Array(this.value),r,_n85,i):_n85?t.erectMemoryOptimized2DFloat(this.value.subarray?this.value:new Float32Array(this.value),r,_n85):this.value;}}]);return n;}();t.exports={Input:n,input:function input(e,t){return new n(e,t);}};},{\"./utils\":114}],111:[function(e,t,r){var _e370=e(\"./utils\"),n=_e370.utils;function i(e,t){if(t.kernel)return void(t.kernel=e);var r=n.allPropertiesOf(e);var _loop3=function _loop3(_n86){var i=r[_n86];\"_\"===i[0]&&\"_\"===i[1]||(\"function\"==typeof e[i]?\"add\"===i.substring(0,3)||\"set\"===i.substring(0,3)?t[i]=function(){return t.kernel[i].apply(t.kernel,arguments),t;}:t[i]=function(){return t.kernel[i].apply(t.kernel,arguments);}:(t.__defineGetter__(i,function(){return t.kernel[i];}),t.__defineSetter__(i,function(e){t.kernel[i]=e;})));};for(var _n86=0;_n86<r.length;_n86++){_loop3(_n86);}t.kernel=e;}t.exports={kernelRunShortcut:function kernelRunShortcut(e){var _t103=function t(){return e.build.apply(e,arguments),(_t103=function t(){var t=e.run.apply(e,arguments);if(e.switchingKernels){var _n87=e.resetSwitchingKernels(),_i99=e.onRequestSwitchKernel(_n87,arguments,e);r.kernel=e=_i99,t=_i99.run.apply(_i99,arguments);}return e.renderKernels?e.renderKernels():e.renderOutput?e.renderOutput():t;}).apply(e,arguments);};var r=function r(){return _t103.apply(e,arguments);};return r.exec=function(){var _arguments2=arguments,_this49=this;return new Promise(function(e,r){try{e(_t103.apply(_this49,_arguments2));}catch(e){r(e);}});},r.replaceKernel=function(t){i(e=t,r);},i(e,r),r;}};},{\"./utils\":114}],112:[function(e,t,r){var n={name:\"math-random-uniformly-distributed\",onBeforeRun:function onBeforeRun(e){e.setUniform1f(\"randomSeed1\",Math.random()),e.setUniform1f(\"randomSeed2\",Math.random());},functionMatch:\"Math.random()\",functionReplace:\"nrand(vTexCoord)\",functionReturnType:\"Number\",source:\"// https://www.shadertoy.com/view/4t2SDh\\n//note: uniformly distributed, normalized rand, [0,1]\\nhighp float randomSeedShift = 1.0;\\nhighp float slide = 1.0;\\nuniform highp float randomSeed1;\\nuniform highp float randomSeed2;\\n\\nhighp float nrand(highp vec2 n) {\\n  highp float result = fract(sin(dot((n.xy + 1.0) * vec2(randomSeed1 * slide, randomSeed2 * randomSeedShift), vec2(12.9898, 78.233))) * 43758.5453);\\n  randomSeedShift = result;\\n  if (randomSeedShift > 0.5) {\\n    slide += 0.00009; \\n  } else {\\n    slide += 0.0009;\\n  }\\n  return result;\\n}\"};t.exports=n;},{}],113:[function(e,t,r){t.exports={Texture:/*#__PURE__*/function(){function Texture(e){_classCallCheck(this,Texture);var t=e.texture,r=e.size,n=e.dimensions,i=e.output,s=e.context,_e$type=e.type,a=_e$type===void 0?\"NumberTexture\":_e$type,o=e.kernel,u=e.internalFormat,l=e.textureFormat;if(!i)throw new Error('settings property \"output\" required.');if(!s)throw new Error('settings property \"context\" required.');if(!t)throw new Error('settings property \"texture\" required.');if(!o)throw new Error('settings property \"kernel\" required.');this.texture=t,t._refs?t._refs++:t._refs=1,this.size=r,this.dimensions=n,this.output=i,this.context=s,this.kernel=o,this.type=a,this._deleted=!1,this.internalFormat=u,this.textureFormat=l;}_createClass(Texture,[{key:\"toArray\",value:function toArray(){throw new Error(\"Not implemented on \".concat(this.constructor.name));}},{key:\"clone\",value:function clone(){throw new Error(\"Not implemented on \".concat(this.constructor.name));}},{key:\"delete\",value:function _delete(){throw new Error(\"Not implemented on \".concat(this.constructor.name));}},{key:\"clear\",value:function clear(){throw new Error(\"Not implemented on \".concat(this.constructor.name));}}]);return Texture;}()};},{}],114:[function(e,t,r){var n=e(\"acorn\"),_e371=e(\"./input\"),i=_e371.Input,_e372=e(\"./texture\"),s=_e372.Texture,a=/function ([^(]*)/,o=/((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/gm,u=/([^\\s,]+)/g,l={systemEndianness:function systemEndianness(){return d;},getSystemEndianness:function getSystemEndianness(){var e=new ArrayBuffer(4),t=new Uint32Array(e),r=new Uint8Array(e);if(t[0]=3735928559,239===r[0])return\"LE\";if(222===r[0])return\"BE\";throw new Error(\"unknown endianness\");},isFunction:function isFunction(e){return\"function\"==typeof e;},isFunctionString:function isFunctionString(e){return\"string\"==typeof e&&\"function\"===e.slice(0,\"function\".length).toLowerCase();},getFunctionNameFromString:function getFunctionNameFromString(e){var t=a.exec(e);return t&&0!==t.length?t[1].trim():null;},getFunctionBodyFromString:function getFunctionBodyFromString(e){return e.substring(e.indexOf(\"{\")+1,e.lastIndexOf(\"}\"));},getArgumentNamesFromString:function getArgumentNamesFromString(e){var t=e.replace(o,\"\");var r=t.slice(t.indexOf(\"(\")+1,t.indexOf(\")\")).match(u);return null===r&&(r=[]),r;},clone:function clone(e){if(null===e||\"object\"!=_typeof(e)||e.hasOwnProperty(\"isActiveClone\"))return e;var t=e.constructor();for(var _r98 in e){Object.prototype.hasOwnProperty.call(e,_r98)&&(e.isActiveClone=null,t[_r98]=l.clone(e[_r98]),delete e.isActiveClone);}return t;},isArray:function isArray(e){return!isNaN(e.length);},getVariableType:function getVariableType(e,t){if(l.isArray(e))return e.length>0&&\"IMG\"===e[0].nodeName?\"HTMLImageArray\":\"Array\";switch(e.constructor){case Boolean:return\"Boolean\";case Number:return t&&Number.isInteger(e)?\"Integer\":\"Float\";case s:return e.type;case i:return\"Input\";}if(\"nodeName\"in e)switch(e.nodeName){case\"IMG\":case\"CANVAS\":return\"HTMLImage\";case\"VIDEO\":return\"HTMLVideo\";}else{if(e.hasOwnProperty(\"type\"))return e.type;if(\"undefined\"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)return\"OffscreenCanvas\";if(\"undefined\"!=typeof ImageBitmap&&e instanceof ImageBitmap)return\"ImageBitmap\";if(\"undefined\"!=typeof ImageData&&e instanceof ImageData)return\"ImageData\";}return\"Unknown\";},getKernelTextureSize:function getKernelTextureSize(e,t){var _t104=_slicedToArray(t,3),r=_t104[0],n=_t104[1],i=_t104[2],s=(r||1)*(n||1)*(i||1);return e.optimizeFloatMemory&&\"single\"===e.precision&&(r=s=Math.ceil(s/4)),n>1&&r*n===s?new Int32Array([r,n]):l.closestSquareDimensions(s);},closestSquareDimensions:function closestSquareDimensions(e){var t=Math.sqrt(e);var r=Math.ceil(t),n=Math.floor(t);for(;r*n<e;){r--,n=Math.ceil(e/r);}return new Int32Array([n,Math.ceil(e/n)]);},getMemoryOptimizedFloatTextureSize:function getMemoryOptimizedFloatTextureSize(e,t){var r=l.roundTo((e[0]||1)*(e[1]||1)*(e[2]||1)*(e[3]||1),4)/t;return l.closestSquareDimensions(r);},getMemoryOptimizedPackedTextureSize:function getMemoryOptimizedPackedTextureSize(e,t){var _e373=_slicedToArray(e,3),r=_e373[0],n=_e373[1],i=_e373[2],s=l.roundTo((r||1)*(n||1)*(i||1),4)/(4/t);return l.closestSquareDimensions(s);},roundTo:function roundTo(e,t){return Math.floor((e+t-1)/t)*t;},getDimensions:function getDimensions(e,t){var r;if(l.isArray(e)){var _t105=[];var _n88=e;for(;l.isArray(_n88);){_t105.push(_n88.length),_n88=_n88[0];}r=_t105.reverse();}else if(e instanceof s)r=e.output;else{if(!(e instanceof i))throw new Error(\"Unknown dimensions of \".concat(e));r=e.size;}if(t)for(r=Array.from(r);r.length<3;){r.push(1);}return new Int32Array(r);},flatten2dArrayTo:function flatten2dArrayTo(e,t){var r=0;for(var _n89=0;_n89<e.length;_n89++){t.set(e[_n89],r),r+=e[_n89].length;}},flatten3dArrayTo:function flatten3dArrayTo(e,t){var r=0;for(var _n90=0;_n90<e.length;_n90++){for(var _i100=0;_i100<e[_n90].length;_i100++){t.set(e[_n90][_i100],r),r+=e[_n90][_i100].length;}}},flatten4dArrayTo:function flatten4dArrayTo(e,t){var r=0;for(var _n91=0;_n91<e.length;_n91++){for(var _i101=0;_i101<e[_n91].length;_i101++){for(var _s16=0;_s16<e[_n91][_i101].length;_s16++){t.set(e[_n91][_i101][_s16],r),r+=e[_n91][_i101][_s16].length;}}}},flattenTo:function flattenTo(e,t){l.isArray(e[0])?l.isArray(e[0][0])?l.isArray(e[0][0][0])?l.flatten4dArrayTo(e,t):l.flatten3dArrayTo(e,t):l.flatten2dArrayTo(e,t):t.set(e);},splitArray:function splitArray(e,t){var r=[];for(var _n92=0;_n92<e.length;_n92+=t){r.push(new e.constructor(e.buffer,4*_n92+e.byteOffset,t));}return r;},getAstString:function getAstString(e,t){var r=Array.isArray(e)?e:e.split(/\\r?\\n/g),n=t.loc.start,i=t.loc.end,s=[];if(n.line===i.line)s.push(r[n.line-1].substring(n.column,i.column));else{s.push(r[n.line-1].slice(n.column));for(var _e374=n.line;_e374<i.line;_e374++){s.push(r[_e374]);}s.push(r[i.line-1].slice(0,i.column));}return s.join(\"\\n\");},allPropertiesOf:function allPropertiesOf(e){var t=[];do{t.push.apply(t,Object.getOwnPropertyNames(e));}while(e=Object.getPrototypeOf(e));return t;},linesToString:function linesToString(e){return e.length>0?e.join(\";\\n\")+\";\\n\":\"\\n\";},warnDeprecated:function warnDeprecated(e,t,r){r?console.warn(\"You are using a deprecated \".concat(e,\" \\\"\").concat(t,\"\\\". It has been replaced with \\\"\").concat(r,\"\\\". Fixing, but please upgrade as it will soon be removed.\")):console.warn(\"You are using a deprecated \".concat(e,\" \\\"\").concat(t,\"\\\". It has been removed. Fixing, but please upgrade as it will soon be removed.\"));},flipPixels:function flipPixels(e,t,r){var n=r/2|0,i=4*t,s=new Uint8ClampedArray(4*t),a=e.slice(0);for(var _e375=0;_e375<n;++_e375){var _t106=_e375*i,_n93=(r-_e375-1)*i;s.set(a.subarray(_t106,_t106+i)),a.copyWithin(_t106,_n93,_n93+i),a.set(s,_n93);}return a;},erectPackedFloat:function erectPackedFloat(e,t){return e.subarray(0,t);},erect2DPackedFloat:function erect2DPackedFloat(e,t,r){var n=new Array(r);for(var _i102=0;_i102<r;_i102++){var _r99=_i102*t,_s17=_r99+t;n[_i102]=e.subarray(_r99,_s17);}return n;},erect3DPackedFloat:function erect3DPackedFloat(e,t,r,n){var i=new Array(n);for(var _s18=0;_s18<n;_s18++){var _n94=new Array(r);for(var _i103=0;_i103<r;_i103++){var _a9=_s18*r*t+_i103*t,_o4=_a9+t;_n94[_i103]=e.subarray(_a9,_o4);}i[_s18]=_n94;}return i;},erectMemoryOptimizedFloat:function erectMemoryOptimizedFloat(e,t){return e.subarray(0,t);},erectMemoryOptimized2DFloat:function erectMemoryOptimized2DFloat(e,t,r){var n=new Array(r);for(var _i104=0;_i104<r;_i104++){var _r100=_i104*t;n[_i104]=e.subarray(_r100,_r100+t);}return n;},erectMemoryOptimized3DFloat:function erectMemoryOptimized3DFloat(e,t,r,n){var i=new Array(n);for(var _s19=0;_s19<n;_s19++){var _n95=new Array(r);for(var _i105=0;_i105<r;_i105++){var _a10=_s19*r*t+_i105*t;_n95[_i105]=e.subarray(_a10,_a10+t);}i[_s19]=_n95;}return i;},erectFloat:function erectFloat(e,t){var r=new Float32Array(t);var n=0;for(var _i106=0;_i106<t;_i106++){r[_i106]=e[n],n+=4;}return r;},erect2DFloat:function erect2DFloat(e,t,r){var n=new Array(r);var i=0;for(var _s20=0;_s20<r;_s20++){var _r101=new Float32Array(t);for(var _n96=0;_n96<t;_n96++){_r101[_n96]=e[i],i+=4;}n[_s20]=_r101;}return n;},erect3DFloat:function erect3DFloat(e,t,r,n){var i=new Array(n);var s=0;for(var _a11=0;_a11<n;_a11++){var _n97=new Array(r);for(var _i107=0;_i107<r;_i107++){var _r102=new Float32Array(t);for(var _n98=0;_n98<t;_n98++){_r102[_n98]=e[s],s+=4;}_n97[_i107]=_r102;}i[_a11]=_n97;}return i;},erectArray2:function erectArray2(e,t){var r=new Array(t),n=4*t;var i=0;for(var _t107=0;_t107<n;_t107+=4){r[i++]=e.subarray(_t107,_t107+2);}return r;},erect2DArray2:function erect2DArray2(e,t,r){var n=new Array(r),i=4*t;for(var _s21=0;_s21<r;_s21++){var _r103=new Array(t),_a12=_s21*i;var _o5=0;for(var _t108=0;_t108<i;_t108+=4){_r103[_o5++]=e.subarray(_t108+_a12,_t108+_a12+2);}n[_s21]=_r103;}return n;},erect3DArray2:function erect3DArray2(e,t,r,n){var i=4*t,s=new Array(n);for(var _a13=0;_a13<n;_a13++){var _n99=new Array(r);for(var _s22=0;_s22<r;_s22++){var _o6=new Array(t),_u3=_a13*i*r+_s22*i;var _l6=0;for(var _t109=0;_t109<i;_t109+=4){_o6[_l6++]=e.subarray(_t109+_u3,_t109+_u3+2);}_n99[_s22]=_o6;}s[_a13]=_n99;}return s;},erectArray3:function erectArray3(e,t){var r=new Array(t),n=4*t;var i=0;for(var _t110=0;_t110<n;_t110+=4){r[i++]=e.subarray(_t110,_t110+3);}return r;},erect2DArray3:function erect2DArray3(e,t,r){var n=4*t,i=new Array(r);for(var _s23=0;_s23<r;_s23++){var _r104=new Array(t),_a14=_s23*n;var _o7=0;for(var _t111=0;_t111<n;_t111+=4){_r104[_o7++]=e.subarray(_t111+_a14,_t111+_a14+3);}i[_s23]=_r104;}return i;},erect3DArray3:function erect3DArray3(e,t,r,n){var i=4*t,s=new Array(n);for(var _a15=0;_a15<n;_a15++){var _n100=new Array(r);for(var _s24=0;_s24<r;_s24++){var _o8=new Array(t),_u4=_a15*i*r+_s24*i;var _l7=0;for(var _t112=0;_t112<i;_t112+=4){_o8[_l7++]=e.subarray(_t112+_u4,_t112+_u4+3);}_n100[_s24]=_o8;}s[_a15]=_n100;}return s;},erectArray4:function erectArray4(e,t){var r=new Array(e),n=4*t;var i=0;for(var _t113=0;_t113<n;_t113+=4){r[i++]=e.subarray(_t113,_t113+4);}return r;},erect2DArray4:function erect2DArray4(e,t,r){var n=4*t,i=new Array(r);for(var _s25=0;_s25<r;_s25++){var _r105=new Array(t),_a16=_s25*n;var _o9=0;for(var _t114=0;_t114<n;_t114+=4){_r105[_o9++]=e.subarray(_t114+_a16,_t114+_a16+4);}i[_s25]=_r105;}return i;},erect3DArray4:function erect3DArray4(e,t,r,n){var i=4*t,s=new Array(n);for(var _a17=0;_a17<n;_a17++){var _n101=new Array(r);for(var _s26=0;_s26<r;_s26++){var _o10=new Array(t),_u5=_a17*i*r+_s26*i;var _l8=0;for(var _t115=0;_t115<i;_t115+=4){_o10[_l8++]=e.subarray(_t115+_u5,_t115+_u5+4);}_n101[_s26]=_o10;}s[_a17]=_n101;}return s;},flattenFunctionToString:function flattenFunctionToString(e,t){var r=t.findDependency,i=t.thisLookup,s=t.doNotDefine;var a=t.flattened;a||(a=t.flattened={});var o=n.parse(e),u=[];var h=0;var c=function e(t){if(Array.isArray(t)){var _r106=[];for(var _n102=0;_n102<t.length;_n102++){_r106.push(e(t[_n102]));}return _r106.join(\"\");}switch(t.type){case\"Program\":return e(t.body)+(\"VariableDeclaration\"===t.body[0].type?\";\":\"\");case\"FunctionDeclaration\":return\"function \".concat(t.id.name,\"(\").concat(t.params.map(e).join(\", \"),\") \").concat(e(t.body));case\"BlockStatement\":{var _r107=[];h+=2;for(var _n104=0;_n104<t.body.length;_n104++){var _i108=e(t.body[_n104]);_i108&&_r107.push(\" \".repeat(h)+_i108,\";\\n\");}return h-=2,\"{\\n\".concat(_r107.join(\"\"),\"}\");}case\"VariableDeclaration\":var _n103=l.normalizeDeclarations(t).map(e).filter(function(e){return null!==e;});return _n103.length<1?\"\":\"\".concat(t.kind,\" \").concat(_n103.join(\",\"));case\"VariableDeclarator\":return t.init.object&&\"ThisExpression\"===t.init.object.type?i(t.init.property.name,!0)?\"\".concat(t.id.name,\" = \").concat(e(t.init)):null:\"\".concat(t.id.name,\" = \").concat(e(t.init));case\"CallExpression\":if(\"subarray\"===t.callee.property.name)return\"\".concat(e(t.callee.object),\".\").concat(e(t.callee.property),\"(\").concat(t.arguments.map(function(t){return e(t);}).join(\", \"),\")\");if(\"gl\"===t.callee.object.name||\"context\"===t.callee.object.name)return\"\".concat(e(t.callee.object),\".\").concat(e(t.callee.property),\"(\").concat(t.arguments.map(function(t){return e(t);}).join(\", \"),\")\");if(\"ThisExpression\"===t.callee.object.type)return u.push(r(\"this\",t.callee.property.name)),\"\".concat(t.callee.property.name,\"(\").concat(t.arguments.map(function(t){return e(t);}).join(\", \"),\")\");if(t.callee.object.name){var _n105=r(t.callee.object.name,t.callee.property.name);return null===_n105?\"\".concat(t.callee.object.name,\".\").concat(t.callee.property.name,\"(\").concat(t.arguments.map(function(t){return e(t);}).join(\", \"),\")\"):(u.push(_n105),\"\".concat(t.callee.property.name,\"(\").concat(t.arguments.map(function(t){return e(t);}).join(\", \"),\")\"));}if(\"MemberExpression\"===t.callee.object.type)return\"\".concat(e(t.callee.object),\".\").concat(t.callee.property.name,\"(\").concat(t.arguments.map(function(t){return e(t);}).join(\", \"),\")\");throw new Error(\"unknown ast.callee\");case\"ReturnStatement\":return\"return \".concat(e(t.argument));case\"BinaryExpression\":return\"(\".concat(e(t.left)).concat(t.operator).concat(e(t.right),\")\");case\"UnaryExpression\":return t.prefix?\"\".concat(t.operator,\" \").concat(e(t.argument)):\"\".concat(e(t.argument),\" \").concat(t.operator);case\"ExpressionStatement\":return\"\".concat(e(t.expression));case\"SequenceExpression\":return\"(\".concat(e(t.expressions),\")\");case\"ArrowFunctionExpression\":return\"(\".concat(t.params.map(e).join(\", \"),\") => \").concat(e(t.body));case\"Literal\":return t.raw;case\"Identifier\":return t.name;case\"MemberExpression\":return\"ThisExpression\"===t.object.type?i(t.property.name):t.computed?\"\".concat(e(t.object),\"[\").concat(e(t.property),\"]\"):e(t.object)+\".\"+e(t.property);case\"ThisExpression\":return\"this\";case\"NewExpression\":return\"new \".concat(e(t.callee),\"(\").concat(t.arguments.map(function(t){return e(t);}).join(\", \"),\")\");case\"ForStatement\":return\"for (\".concat(e(t.init),\";\").concat(e(t.test),\";\").concat(e(t.update),\") \").concat(e(t.body));case\"AssignmentExpression\":return\"\".concat(e(t.left)).concat(t.operator).concat(e(t.right));case\"UpdateExpression\":return\"\".concat(e(t.argument)).concat(t.operator);case\"IfStatement\":return\"if (\".concat(e(t.test),\") \").concat(e(t.consequent));case\"ThrowStatement\":return\"throw \".concat(e(t.argument));case\"ObjectPattern\":return t.properties.map(e).join(\", \");case\"ArrayPattern\":return t.elements.map(e).join(\", \");case\"DebuggerStatement\":return\"debugger;\";case\"ConditionalExpression\":return\"\".concat(e(t.test),\"?\").concat(e(t.consequent),\":\").concat(e(t.alternate));case\"Property\":if(\"init\"===t.kind)return e(t.key);}throw new Error(\"unhandled ast.type of \".concat(t.type));}(o);if(u.length>0){var _e376=[];for(var _r108=0;_r108<u.length;_r108++){var _n106=u[_r108];a[_n106]||(a[_n106]=!0),_n106&&_e376.push(l.flattenFunctionToString(_n106,t)+\"\\n\");}return _e376.join(\"\")+c;}return c;},normalizeDeclarations:function normalizeDeclarations(e){if(\"VariableDeclaration\"!==e.type)throw new Error('Ast is not of type \"VariableDeclaration\"');var t=[];for(var _r109=0;_r109<e.declarations.length;_r109++){var _n107=e.declarations[_r109];if(_n107.id&&\"ObjectPattern\"===_n107.id.type&&_n107.id.properties){var _e377=_n107.id.properties;for(var _r110=0;_r110<_e377.length;_r110++){var _i109=_e377[_r110];if(\"ObjectPattern\"===_i109.value.type&&_i109.value.properties)for(var _e378=0;_e378<_i109.value.properties.length;_e378++){var _r111=_i109.value.properties[_e378];if(\"Property\"!==_r111.type)throw new Error(\"unexpected state\");t.push({type:\"VariableDeclarator\",id:{type:\"Identifier\",name:_r111.key.name},init:{type:\"MemberExpression\",object:{type:\"MemberExpression\",object:_n107.init,property:{type:\"Identifier\",name:_i109.key.name},computed:!1},property:{type:\"Identifier\",name:_r111.key.name},computed:!1}});}else{if(\"Identifier\"!==_i109.value.type)throw new Error(\"unexpected state\");t.push({type:\"VariableDeclarator\",id:{type:\"Identifier\",name:_i109.value&&_i109.value.name?_i109.value.name:_i109.key.name},init:{type:\"MemberExpression\",object:_n107.init,property:{type:\"Identifier\",name:_i109.key.name},computed:!1}});}}}else if(_n107.id&&\"ArrayPattern\"===_n107.id.type&&_n107.id.elements){var _e379=_n107.id.elements;for(var _r112=0;_r112<_e379.length;_r112++){var _i110=_e379[_r112];if(\"Identifier\"!==_i110.type)throw new Error(\"unexpected state\");t.push({type:\"VariableDeclarator\",id:{type:\"Identifier\",name:_i110.name},init:{type:\"MemberExpression\",object:_n107.init,property:{type:\"Literal\",value:_r112,raw:_r112.toString(),start:_i110.start,end:_i110.end},computed:!0}});}}else t.push(_n107);}return t;},splitHTMLImageToRGB:function splitHTMLImageToRGB(e,t){var r=e.createKernel(function(e){return 255*e[this.thread.y][this.thread.x].r;},{output:[t.width,t.height],precision:\"unsigned\",argumentTypes:{a:\"HTMLImage\"}}),n=e.createKernel(function(e){return 255*e[this.thread.y][this.thread.x].g;},{output:[t.width,t.height],precision:\"unsigned\",argumentTypes:{a:\"HTMLImage\"}}),i=e.createKernel(function(e){return 255*e[this.thread.y][this.thread.x].b;},{output:[t.width,t.height],precision:\"unsigned\",argumentTypes:{a:\"HTMLImage\"}}),s=e.createKernel(function(e){return 255*e[this.thread.y][this.thread.x].a;},{output:[t.width,t.height],precision:\"unsigned\",argumentTypes:{a:\"HTMLImage\"}}),a=[r(t),n(t),i(t),s(t)];return a.rKernel=r,a.gKernel=n,a.bKernel=i,a.aKernel=s,a.gpu=e,a;},splitRGBAToCanvases:function splitRGBAToCanvases(e,t,r,n){var i=e.createKernel(function(e){var t=e[this.thread.y][this.thread.x];this.color(t.r/255,0,0,255);},{output:[r,n],graphical:!0,argumentTypes:{v:\"Array2D(4)\"}});i(t);var s=e.createKernel(function(e){var t=e[this.thread.y][this.thread.x];this.color(0,t.g/255,0,255);},{output:[r,n],graphical:!0,argumentTypes:{v:\"Array2D(4)\"}});s(t);var a=e.createKernel(function(e){var t=e[this.thread.y][this.thread.x];this.color(0,0,t.b/255,255);},{output:[r,n],graphical:!0,argumentTypes:{v:\"Array2D(4)\"}});a(t);var o=e.createKernel(function(e){var t=e[this.thread.y][this.thread.x];this.color(255,255,255,t.a/255);},{output:[r,n],graphical:!0,argumentTypes:{v:\"Array2D(4)\"}});return o(t),[i.canvas,s.canvas,a.canvas,o.canvas];},getMinifySafeName:function getMinifySafeName(e){try{var _t116=n.parse(\"const value = \".concat(e.toString())),_r113=_t116.body[0].declarations[0].init;return _r113.body.name||_r113.body.body[0].argument.name;}catch(e){throw new Error(\"Unrecognized function type.  Please use `() => yourFunctionVariableHere` or function() { return yourFunctionVariableHere; }\");}},sanitizeName:function sanitizeName(e){return h.test(e)&&(e=e.replace(h,\"S_S\")),c.test(e)?e=e.replace(c,\"U_U\"):p.test(e)&&(e=e.replace(p,\"u_u\")),e;}},h=/\\$/,c=/__/,p=/_/,d=l.getSystemEndianness();t.exports={utils:l};},{\"./input\":110,\"./texture\":113,acorn:1}]},{},[107])(107);});\n\n//# sourceURL=webpack://raytracer-gpu/./src/modules/gpu.js?");

/***/ }),

/***/ "./src/modules/vec3.js":
/*!*****************************!*\
  !*** ./src/modules/vec3.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Vector3\": () => (/* binding */ Vector3),\n/* harmony export */   \"cross\": () => (/* binding */ cross),\n/* harmony export */   \"dot\": () => (/* binding */ dot),\n/* harmony export */   \"normalize\": () => (/* binding */ normalize),\n/* harmony export */   \"reflect\": () => (/* binding */ reflect)\n/* harmony export */ });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nvar Vector3 = /*#__PURE__*/function () {\n  function Vector3() {\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    _classCallCheck(this, Vector3);\n\n    this.x = x;\n    this.y = y;\n    this.z = z;\n  }\n\n  _createClass(Vector3, [{\n    key: \"sub\",\n    value: function sub(v) {\n      return new Vector3(this.x - v.x, this.y - v.y, this.z - v.z);\n    }\n  }, {\n    key: \"add\",\n    value: function add(v) {\n      return new Vector3(this.x + v.x, this.y + v.y, this.z + v.z);\n    }\n  }, {\n    key: \"multiplyScalar\",\n    value: function multiplyScalar(s) {\n      return new Vector3(this.x * s, this.y * s, this.z * s);\n    }\n  }, {\n    key: \"divideScalar\",\n    value: function divideScalar(s) {\n      return new Vector3(this.x / s, this.y / s, this.z / s);\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared() {\n      return this.x * this.x + this.y * this.y + this.z * this.z;\n    }\n  }, {\n    key: \"length\",\n    value: function length() {\n      return Math.sqrt(this.lengthSquared());\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      return [this.x, this.y, this.z];\n    }\n  }]);\n\n  return Vector3;\n}();\nfunction dot(v1, v2) {\n  return v1.x * v2.x + v1.y * v2.y + v1.z * v2.z;\n}\nfunction cross(v1, v2) {\n  return new Vector3(v1.y * v2.z - v1.z * v2.y, v1.z * v2.x - v1.x * v2.z, v1.x * v2.y - v1.y * v2.x);\n}\nfunction normalize(v) {\n  return v.divideScalar(v.length());\n}\nfunction reflect(v, n) {\n  return v.sub(n.multiplyScalar(2 * dot(v, n)));\n}\n\n//# sourceURL=webpack://raytracer-gpu/./src/modules/vec3.js?");

/***/ }),

/***/ "./src/style.css":
/*!***********************!*\
  !*** ./src/style.css ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://raytracer-gpu/./src/style.css?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 	
/******/ })()
;